#[[
This source file is part of the Swift Atomics Open Source Project

Copyright (c) 2021 Apple Inc. and the Swift project authors
Licensed under Apache License v2.0 with Runtime Library Exception

See https://swift.org/LICENSE.txt for license information
#]]

add_library(Atomics
  autogenerated/AtomicBool.swift
  autogenerated/AtomicLazyReference.swift
  autogenerated/HighLevelTypes.swift
  autogenerated/IntegerConformances.swift
  autogenerated/PointerConformances.swift
  AtomicInteger.swift
  AtomicMemoryOrderings.swift
  AtomicOptional.swift
  AtomicRawRepresentable.swift
  AtomicStrongReference.swift
  AtomicValue.swift
  DoubleWord.swift)
set_target_properties(Atomics PROPERTIES
  INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_Swift_MODULE_DIRECTORY})
target_compile_definitions(Atomics PUBLIC
  ENABLE_DOUBLEWIDE_ATOMICS)
if(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64|AMD64")
  target_compile_options(Atomics PUBLIC
    "$<$<COMPILE_LANGUAGE:Swift>:SHELL:-Xcc -mcx16>")
endif()
target_link_libraries(Atomics PUBLIC
  _AtomicsShims)

_install_target(Atomics)
set_property(GLOBAL APPEND PROPERTY SWIFT_ATOMICS_EXPORTS Atomics)
