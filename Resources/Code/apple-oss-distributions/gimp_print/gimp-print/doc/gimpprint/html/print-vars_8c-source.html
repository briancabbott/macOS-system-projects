<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libgimpprint API Reference: src/main/print-vars.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>src/main/print-vars.c</h1><a href="print-vars_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * "$Id: print-vars_8c-source.html,v 1.1.1.2 2004/12/22 23:49:10 jlovell Exp $"</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *   Print plug-in driver utility functions for the GIMP.</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *   Copyright 1997-2000 Michael Sweet (mike@easysw.com) and</span>
00007 <span class="comment"> *      Robert Krawitz (rlk@alum.mit.edu)</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *   This program is free software; you can redistribute it and/or modify it</span>
00010 <span class="comment"> *   under the terms of the GNU General Public License as published by the Free</span>
00011 <span class="comment"> *   Software Foundation; either version 2 of the License, or (at your option)</span>
00012 <span class="comment"> *   any later version.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> *   This program is distributed in the hope that it will be useful, but</span>
00015 <span class="comment"> *   WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
00016 <span class="comment"> *   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
00017 <span class="comment"> *   for more details.</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
00020 <span class="comment"> *   along with this program; if not, write to the Free Software</span>
00021 <span class="comment"> *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00022 <span class="comment"> */</span>
00023 
00024 <span class="comment">/*</span>
00025 <span class="comment"> * This file must include only standard C header files.  The core code must</span>
00026 <span class="comment"> * compile on generic platforms that don't support glib, gimp, gtk, etc.</span>
00027 <span class="comment"> */</span>
00028 
00029 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span>
00031 <span class="preprocessor">#endif</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#include &lt;math.h&gt;</span>
00033 <span class="preprocessor">#ifdef HAVE_LIMITS_H</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#include &lt;limits.h&gt;</span>
00035 <span class="preprocessor">#endif</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
00037 <span class="preprocessor">#include &lt;<a class="code" href="gimp-print_8h.html">gimp-print/gimp-print.h</a>&gt;</span>
00038 <span class="preprocessor">#include "<a class="code" href="gimp-print-internal_8h.html">gimp-print-internal.h</a>"</span>
00039 <span class="preprocessor">#include &lt;<a class="code" href="gimp-print-intl-internal_8h.html">gimp-print/gimp-print-intl-internal.h</a>&gt;</span>
00040 <span class="preprocessor">#include "<a class="code" href="generic-options_8h.html">generic-options.h</a>"</span>
00041 
<a name="l00042"></a><a class="code" href="structvalue__t.html">00042</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00043 <span class="keyword"></span>{
<a name="l00044"></a><a class="code" href="structvalue__t.html#o0">00044</a>   <span class="keywordtype">char</span> *name;
<a name="l00045"></a><a class="code" href="structvalue__t.html#o1">00045</a>   <a class="code" href="group__vars.html#ga132">stp_parameter_type_t</a> typ;
<a name="l00046"></a><a class="code" href="structvalue__t.html#o2">00046</a>   <a class="code" href="group__vars.html#ga135">stp_parameter_activity_t</a> active;
00047   <span class="keyword">union</span>
00048 <span class="keyword">  </span>{
<a name="l00049"></a><a class="code" href="structvalue__t.html#o3">00049</a>     <span class="keywordtype">int</span> ival;
<a name="l00050"></a><a class="code" href="structvalue__t.html#o4">00050</a>     <span class="keywordtype">int</span> bval;
<a name="l00051"></a><a class="code" href="structvalue__t.html#o5">00051</a>     <span class="keywordtype">double</span> dval;
<a name="l00052"></a><a class="code" href="structvalue__t.html#o6">00052</a>     <a class="code" href="structstp__curve.html">stp_curve_t</a> *cval;
<a name="l00053"></a><a class="code" href="structvalue__t.html#o7">00053</a>     <a class="code" href="structstp__array.html">stp_array_t</a> *aval;
<a name="l00054"></a><a class="code" href="structvalue__t.html#o8">00054</a>     <a class="code" href="structstp__raw__t.html">stp_raw_t</a> rval;
00055   } value;
00056 } <a class="code" href="structvalue__t.html">value_t</a>;
00057 
<a name="l00058"></a><a class="code" href="structstp__compdata.html">00058</a> <span class="keyword">struct </span><a class="code" href="structstp__compdata.html">stp_compdata</a>
00059 {
<a name="l00060"></a><a class="code" href="structstp__compdata.html#o0">00060</a>   <span class="keywordtype">char</span> *name;
<a name="l00061"></a><a class="code" href="structstp__compdata.html#o1">00061</a>   <a class="code" href="group__vars.html#ga4">stp_copy_data_func_t</a> copyfunc;
<a name="l00062"></a><a class="code" href="structstp__compdata.html#o2">00062</a>   <a class="code" href="group__vars.html#ga5">stp_free_data_func_t</a> freefunc;
<a name="l00063"></a><a class="code" href="structstp__compdata.html#o3">00063</a>   <span class="keywordtype">void</span> *data;
00064 };
00065 
<a name="l00066"></a><a class="code" href="structstp__vars.html">00066</a> <span class="keyword">struct </span><a class="code" href="structstp__vars.html">stp_vars</a>                 <span class="comment">/* Plug-in variables */</span>
00067 {
<a name="l00068"></a><a class="code" href="structstp__vars.html#o0">00068</a>   <span class="keywordtype">char</span> *<a class="code" href="structstp__vars.html#o0">driver</a>;                 <span class="comment">/* Name of printer "driver" */</span>
<a name="l00069"></a><a class="code" href="structstp__vars.html#o1">00069</a>   <span class="keywordtype">char</span> *<a class="code" href="structstp__vars.html#o1">color_conversion</a>;       <span class="comment">/* Color module in use */</span>
<a name="l00070"></a><a class="code" href="structstp__vars.html#o2">00070</a>   <span class="keywordtype">int</span>   left;                   <span class="comment">/* Offset from left-upper corner, points */</span>
<a name="l00071"></a><a class="code" href="structstp__vars.html#o3">00071</a>   <span class="keywordtype">int</span>   top;                    <span class="comment">/* ... */</span>
<a name="l00072"></a><a class="code" href="structstp__vars.html#o4">00072</a>   <span class="keywordtype">int</span>   width;                  <span class="comment">/* Width of the image, points */</span>
<a name="l00073"></a><a class="code" href="structstp__vars.html#o5">00073</a>   <span class="keywordtype">int</span>   height;                 <span class="comment">/* ... */</span>
<a name="l00074"></a><a class="code" href="structstp__vars.html#o6">00074</a>   <span class="keywordtype">int</span>   page_width;             <span class="comment">/* Width of page in points */</span>
<a name="l00075"></a><a class="code" href="structstp__vars.html#o7">00075</a>   <span class="keywordtype">int</span>   page_height;            <span class="comment">/* Height of page in points */</span>
<a name="l00076"></a><a class="code" href="structstp__vars.html#o8">00076</a>   <a class="code" href="structstp__list.html">stp_list_t</a> *<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>];
<a name="l00077"></a><a class="code" href="structstp__vars.html#o9">00077</a>   <a class="code" href="structstp__list.html">stp_list_t</a> *<a class="code" href="structstp__vars.html#o9">internal_data</a>;
00078   void (*outfunc)(<span class="keywordtype">void</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *buffer, size_t bytes);
<a name="l00079"></a><a class="code" href="structstp__vars.html#o11">00079</a>   <span class="keywordtype">void</span> *<a class="code" href="structstp__vars.html#o11">outdata</a>;
00080   void (*errfunc)(<span class="keywordtype">void</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *buffer, size_t bytes);
<a name="l00081"></a><a class="code" href="structstp__vars.html#o13">00081</a>   <span class="keywordtype">void</span> *<a class="code" href="structstp__vars.html#o13">errdata</a>;
<a name="l00082"></a><a class="code" href="structstp__vars.html#o14">00082</a>   <span class="keywordtype">int</span> <a class="code" href="structstp__vars.html#o14">verified</a>;                 <span class="comment">/* Ensure that params are OK! */</span>
00083 };
00084 
<a name="l00085"></a><a class="code" href="print-vars_8c.html#a5">00085</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="print-vars_8c.html#a5">standard_vars_initialized</a> = 0;
00086 
<a name="l00087"></a><a class="code" href="print-vars_8c.html#a6">00087</a> <span class="keyword">static</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> <a class="code" href="print-vars_8c.html#a6">default_vars</a>;
00088 
00089 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00090"></a><a class="code" href="print-vars_8c.html#a7">00090</a> <a class="code" href="print-vars_8c.html#a7">null_vars</a>(<span class="keywordtype">void</span>)
00091 {
00092   <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"Null stp_vars_t! Please report this bug.\n"</span>);
00093   <a class="code" href="group__util.html#ga3">stp_abort</a>();
00094 }
00095 
00096 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00097"></a><a class="code" href="print-vars_8c.html#a8">00097</a> <a class="code" href="print-vars_8c.html#a8">check_vars</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
00098 {
00099   <span class="keywordflow">if</span> (v == NULL)
00100     <a class="code" href="print-vars_8c.html#a7">null_vars</a>();
00101 }
00102 
00103 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00104"></a><a class="code" href="print-vars_8c.html#a9">00104</a> <a class="code" href="print-vars_8c.html#a9">value_namefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00105 {
00106   <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *v = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) (item);
00107   <span class="keywordflow">return</span> v-&gt;<a class="code" href="structvalue__t.html#o0">name</a>;
00108 }
00109 
00110 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00111"></a><a class="code" href="print-vars_8c.html#a10">00111</a> <a class="code" href="print-vars_8c.html#a10">value_freefunc</a>(<span class="keywordtype">void</span> *item)
00112 {
00113   <a class="code" href="structvalue__t.html">value_t</a> *v = (<a class="code" href="structvalue__t.html">value_t</a> *) (item);
00114   <span class="keywordflow">switch</span> (v-&gt;<a class="code" href="structvalue__t.html#o1">typ</a>)
00115     {
00116     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>:
00117     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>:
00118     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>:
00119       <a class="code" href="group__util.html#ga31">stp_free</a>((<span class="keywordtype">void</span> *) v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.data);
00120       <span class="keywordflow">break</span>;
00121     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>:
00122       <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval)
00123         <a class="code" href="group__curve.html#ga22">stp_curve_destroy</a>(v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval);
00124       <span class="keywordflow">break</span>;
00125     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>:
00126       <a class="code" href="group__array.html#ga4">stp_array_destroy</a>(v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval);
00127       <span class="keywordflow">break</span>;
00128     <span class="keywordflow">default</span>:
00129       <span class="keywordflow">break</span>;
00130     }
00131   <a class="code" href="group__util.html#ga31">stp_free</a>(v-&gt;<a class="code" href="structvalue__t.html#o0">name</a>);
00132   <a class="code" href="group__util.html#ga31">stp_free</a>(v);
00133 }
00134 
00135 <span class="keyword">static</span> <a class="code" href="structstp__list.html">stp_list_t</a> *
<a name="l00136"></a><a class="code" href="print-vars_8c.html#a11">00136</a> <a class="code" href="print-vars_8c.html#a11">create_vars_list</a>(<span class="keywordtype">void</span>)
00137 {
00138   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="list_8h.html#a7">stp_list_create</a>();
00139   <a class="code" href="print-list_8c.html#a19">stp_list_set_freefunc</a>(ret, <a class="code" href="print-vars_8c.html#a10">value_freefunc</a>);
00140   <a class="code" href="print-list_8c.html#a23">stp_list_set_namefunc</a>(ret, <a class="code" href="print-vars_8c.html#a9">value_namefunc</a>);
00141   <span class="keywordflow">return</span> ret;
00142 }
00143 
00144 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00145"></a><a class="code" href="print-vars_8c.html#a12">00145</a> <a class="code" href="print-vars_8c.html#a12">copy_to_raw</a>(<a class="code" href="structstp__raw__t.html">stp_raw_t</a> *<a class="code" href="structraw.html">raw</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, size_t bytes)
00146 {
00147   <span class="keywordtype">char</span> *ndata = <a class="code" href="group__util.html#ga28">stp_malloc</a>(bytes + 1);
00148   memcpy(ndata, data, bytes);
00149   ndata[bytes] = <span class="charliteral">'\0'</span>;
00150   raw-&gt;<a class="code" href="structstp__raw__t.html#o1">data</a> = (<span class="keywordtype">void</span> *) ndata;
00151   raw-&gt;<a class="code" href="structstp__raw__t.html#o0">bytes</a> = bytes;
00152 }
00153 
00154 <span class="keyword">static</span> <a class="code" href="structvalue__t.html">value_t</a> *
<a name="l00155"></a><a class="code" href="print-vars_8c.html#a13">00155</a> <a class="code" href="print-vars_8c.html#a13">value_copy</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00156 {
00157   <a class="code" href="structvalue__t.html">value_t</a> *ret = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00158   <span class="keyword">const</span> value_t *v = (<span class="keyword">const</span> value_t *) (item);
00159   ret-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(v-&gt;<a class="code" href="structvalue__t.html#o0">name</a>);
00160   ret-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = v-&gt;<a class="code" href="structvalue__t.html#o1">typ</a>;
00161   ret-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = v-&gt;<a class="code" href="structvalue__t.html#o2">active</a>;
00162   <span class="keywordflow">switch</span> (v-&gt;<a class="code" href="structvalue__t.html#o1">typ</a>)
00163     {
00164     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>:
00165       ret-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval = <a class="code" href="group__curve.html#ga24">stp_curve_create_copy</a>(v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval);
00166       <span class="keywordflow">break</span>;
00167     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>:
00168       ret-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval = <a class="code" href="group__array.html#ga6">stp_array_create_copy</a>(v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval);
00169       <span class="keywordflow">break</span>;
00170     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>:
00171     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>:
00172     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>:
00173       <a class="code" href="print-vars_8c.html#a12">copy_to_raw</a>(&amp;(ret-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval), v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.data, v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.bytes);
00174       <span class="keywordflow">break</span>;
00175     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>:
00176     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>:
00177     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>:
00178       ret-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival;
00179       <span class="keywordflow">break</span>;
00180     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>:
00181       ret-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.dval = v-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.dval;
00182       <span class="keywordflow">break</span>;
00183     <span class="keywordflow">default</span>:
00184       <span class="keywordflow">break</span>;
00185     }
00186   <span class="keywordflow">return</span> ret;
00187 }
00188 
00189 <span class="keyword">static</span> <a class="code" href="structstp__list.html">stp_list_t</a> *
<a name="l00190"></a><a class="code" href="print-vars_8c.html#a14">00190</a> <a class="code" href="print-vars_8c.html#a14">copy_value_list</a>(<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *src)
00191 {
00192   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="print-vars_8c.html#a11">create_vars_list</a>();
00193   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a12">stp_list_get_start</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)src);
00194   <span class="keywordflow">while</span> (item)
00195     {
00196       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(ret, NULL, <a class="code" href="print-vars_8c.html#a13">value_copy</a>(<a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item)));
00197       item = <a class="code" href="print-list_8c.html#a32">stp_list_item_next</a>(item);
00198     }
00199   <span class="keywordflow">return</span> ret;
00200 }
00201 
00202 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00203"></a><a class="code" href="print-vars_8c.html#a15">00203</a> <a class="code" href="print-vars_8c.html#a15">compdata_namefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00204 {
00205   <span class="keyword">const</span> <a class="code" href="structstp__compdata.html">compdata_t</a> *cd = (<span class="keyword">const</span> <a class="code" href="structstp__compdata.html">compdata_t</a> *) (item);
00206   <span class="keywordflow">return</span> cd-&gt;<a class="code" href="structstp__compdata.html#o0">name</a>;
00207 }
00208 
00209 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00210"></a><a class="code" href="print-vars_8c.html#a16">00210</a> <a class="code" href="print-vars_8c.html#a16">compdata_freefunc</a>(<span class="keywordtype">void</span> *item)
00211 {
00212   <a class="code" href="structstp__compdata.html">compdata_t</a> *cd = (<a class="code" href="structstp__compdata.html">compdata_t</a> *) (item);
00213   <span class="keywordflow">if</span> (cd-&gt;<a class="code" href="structstp__compdata.html#o2">freefunc</a>)
00214     (cd-&gt;<a class="code" href="structstp__compdata.html#o2">freefunc</a>)(cd-&gt;<a class="code" href="structstp__compdata.html#o3">data</a>);
00215   <a class="code" href="group__util.html#ga31">stp_free</a>(cd-&gt;<a class="code" href="structstp__compdata.html#o0">name</a>);
00216   <a class="code" href="group__util.html#ga31">stp_free</a>(cd);
00217 }
00218 
00219 <span class="keyword">static</span> <span class="keywordtype">void</span> *
<a name="l00220"></a><a class="code" href="print-vars_8c.html#a17">00220</a> <a class="code" href="print-vars_8c.html#a17">compdata_copyfunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00221 {
00222   <span class="keyword">const</span> <a class="code" href="structstp__compdata.html">compdata_t</a> *cd = (<span class="keyword">const</span> <a class="code" href="structstp__compdata.html">compdata_t</a> *) (item);
00223   <span class="keywordflow">if</span> (cd-&gt;<a class="code" href="structstp__compdata.html#o1">copyfunc</a>)
00224     <span class="keywordflow">return</span> (cd-&gt;<a class="code" href="structstp__compdata.html#o1">copyfunc</a>)(cd-&gt;<a class="code" href="structstp__compdata.html#o3">data</a>);
00225   <span class="keywordflow">else</span>
00226     <span class="keywordflow">return</span> cd-&gt;<a class="code" href="structstp__compdata.html#o3">data</a>;
00227 }
00228 
00229 <span class="keywordtype">void</span>
<a name="l00230"></a><a class="code" href="group__vars.html#ga18">00230</a> <a class="code" href="group__vars.html#ga18">stp_allocate_component_data</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v,
00231                              <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00232                              <a class="code" href="group__vars.html#ga4">stp_copy_data_func_t</a> copyfunc,
00233                              <a class="code" href="group__vars.html#ga5">stp_free_data_func_t</a> freefunc,
00234                              <span class="keywordtype">void</span> *data)
00235 {
00236   <a class="code" href="structstp__compdata.html">compdata_t</a> *cd;
00237   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item;
00238   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00239   cd = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structstp__compdata.html">compdata_t</a>));
00240   item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, name);
00241   <span class="keywordflow">if</span> (item)
00242     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, item);
00243   cd-&gt;<a class="code" href="structstp__compdata.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(name);
00244   cd-&gt;<a class="code" href="structstp__compdata.html#o1">copyfunc</a> = copyfunc;
00245   cd-&gt;<a class="code" href="structstp__compdata.html#o2">freefunc</a> = freefunc;
00246   cd-&gt;<a class="code" href="structstp__compdata.html#o3">data</a> = data;
00247   <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, NULL, cd);
00248 }
00249 
00250 <span class="keywordtype">void</span>
<a name="l00251"></a><a class="code" href="group__vars.html#ga19">00251</a> <a class="code" href="group__vars.html#ga19">stp_destroy_component_data</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00252 {
00253   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item;
00254   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00255   item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, name);
00256   <span class="keywordflow">if</span> (item)
00257     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, item);
00258 }
00259 
00260 <span class="keywordtype">void</span> *
<a name="l00261"></a><a class="code" href="group__vars.html#ga20">00261</a> <a class="code" href="group__vars.html#ga20">stp_get_component_data</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00262 {
00263   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item;
00264   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00265   item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>, name);
00266   <span class="keywordflow">if</span> (item)
00267     <span class="keywordflow">return</span> ((<a class="code" href="structstp__compdata.html">compdata_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item))-&gt;data;
00268   <span class="keywordflow">else</span>
00269     <span class="keywordflow">return</span> NULL;
00270 }
00271 
00272 <span class="keyword">static</span> <a class="code" href="structstp__list.html">stp_list_t</a> *
<a name="l00273"></a><a class="code" href="print-vars_8c.html#a21">00273</a> <a class="code" href="print-vars_8c.html#a21">create_compdata_list</a>(<span class="keywordtype">void</span>)
00274 {
00275   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="list_8h.html#a7">stp_list_create</a>();
00276   <a class="code" href="print-list_8c.html#a19">stp_list_set_freefunc</a>(ret, <a class="code" href="print-vars_8c.html#a16">compdata_freefunc</a>);
00277   <a class="code" href="print-list_8c.html#a23">stp_list_set_namefunc</a>(ret, <a class="code" href="print-vars_8c.html#a15">compdata_namefunc</a>);
00278   <span class="keywordflow">return</span> ret;
00279 }
00280 
00281 <span class="keyword">static</span> <a class="code" href="structstp__list.html">stp_list_t</a> *
<a name="l00282"></a><a class="code" href="print-vars_8c.html#a22">00282</a> <a class="code" href="print-vars_8c.html#a22">copy_compdata_list</a>(<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *src)
00283 {
00284   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="print-vars_8c.html#a21">create_compdata_list</a>();
00285   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a12">stp_list_get_start</a>(src);
00286   <span class="keywordflow">while</span> (item)
00287     {
00288       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(ret, NULL, <a class="code" href="print-vars_8c.html#a17">compdata_copyfunc</a>(item));
00289       item = <a class="code" href="print-list_8c.html#a32">stp_list_item_next</a>(item);
00290     }
00291   <span class="keywordflow">return</span> ret;
00292 }
00293 
00294 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00295"></a><a class="code" href="print-vars_8c.html#a23">00295</a> <a class="code" href="print-vars_8c.html#a23">initialize_standard_vars</a>(<span class="keywordtype">void</span>)
00296 {
00297   <span class="keywordflow">if</span> (!<a class="code" href="print-vars_8c.html#a5">standard_vars_initialized</a>)
00298     {
00299       <span class="keywordtype">int</span> i;
00300       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>; i++)
00301         <a class="code" href="print-vars_8c.html#a6">default_vars</a>.<a class="code" href="structstp__vars.html#o8">params</a>[i] = <a class="code" href="print-vars_8c.html#a11">create_vars_list</a>();
00302       <a class="code" href="print-vars_8c.html#a6">default_vars</a>.<a class="code" href="structstp__vars.html#o0">driver</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(<span class="stringliteral">"ps2"</span>);
00303       <a class="code" href="print-vars_8c.html#a6">default_vars</a>.<a class="code" href="structstp__vars.html#o1">color_conversion</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(<span class="stringliteral">"traditional"</span>);
00304       <a class="code" href="print-vars_8c.html#a6">default_vars</a>.<a class="code" href="structstp__vars.html#o9">internal_data</a> = <a class="code" href="print-vars_8c.html#a21">create_compdata_list</a>();
00305       <a class="code" href="print-vars_8c.html#a5">standard_vars_initialized</a> = 1;
00306     }
00307 }
00308 
00309 <span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *
<a name="l00310"></a><a class="code" href="group__vars.html#ga24">00310</a> <a class="code" href="group__vars.html#ga123">stp_default_settings</a>(<span class="keywordtype">void</span>)
00311 {
00312   <a class="code" href="print-vars_8c.html#a23">initialize_standard_vars</a>();
00313   <span class="keywordflow">return</span> (<a class="code" href="structstp__vars.html">stp_vars_t</a> *) &amp;<a class="code" href="print-vars_8c.html#a6">default_vars</a>;
00314 }
00315 
00316 <a class="code" href="structstp__vars.html">stp_vars_t</a> *
<a name="l00317"></a><a class="code" href="group__vars.html#ga25">00317</a> <a class="code" href="group__vars.html#ga7">stp_vars_create</a>(<span class="keywordtype">void</span>)
00318 {
00319   <span class="keywordtype">int</span> i;
00320   <a class="code" href="structstp__vars.html">stp_vars_t</a> *retval = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structstp__vars.html">stp_vars_t</a>));
00321   <a class="code" href="print-vars_8c.html#a23">initialize_standard_vars</a>();
00322   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>; i++)
00323     retval-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i] = <a class="code" href="print-vars_8c.html#a11">create_vars_list</a>();
00324   retval-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a> = <a class="code" href="print-vars_8c.html#a21">create_compdata_list</a>();
00325   <a class="code" href="group__vars.html#ga76">stp_vars_copy</a>(retval, (<a class="code" href="group__vars.html#ga0">stp_vars_t</a> *)&amp;<a class="code" href="print-vars_8c.html#a6">default_vars</a>);
00326   <span class="keywordflow">return</span> (retval);
00327 }
00328 
00329 <span class="keywordtype">void</span>
<a name="l00330"></a><a class="code" href="group__vars.html#ga26">00330</a> <a class="code" href="group__vars.html#ga26">stp_vars_destroy</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
00331 {
00332   <span class="keywordtype">int</span> i;
00333   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00334   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>; i++)
00335     <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>(v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i]);
00336   <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>(v-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>);
00337   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(v-&gt;<a class="code" href="structstp__vars.html#o0">driver</a>);
00338   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(v-&gt;<a class="code" href="structstp__vars.html#o1">color_conversion</a>);
00339   <a class="code" href="group__util.html#ga31">stp_free</a>(v);
00340 }
00341 
<a name="l00342"></a><a class="code" href="print-vars_8c.html#a0">00342</a> <span class="preprocessor">#define DEF_STRING_FUNCS(s, pre)                                \</span>
00343 <span class="preprocessor">void                                                            \</span>
00344 <span class="preprocessor">pre##_set_##s(stp_vars_t *v, const char *val)                   \</span>
00345 <span class="preprocessor">{                                                               \</span>
00346 <span class="preprocessor">  check_vars(v);                                                \</span>
00347 <span class="preprocessor">  if (val)                                                      \</span>
00348 <span class="preprocessor">    stp_dprintf(STP_DBG_VARS, v, "set %s to %s\n", #s, val);    \</span>
00349 <span class="preprocessor">  else                                                          \</span>
00350 <span class="preprocessor">    stp_dprintf(STP_DBG_VARS, v, "clear %s\n", #s);             \</span>
00351 <span class="preprocessor">  if (v-&gt;s == val)                                              \</span>
00352 <span class="preprocessor">    return;                                                     \</span>
00353 <span class="preprocessor">  STP_SAFE_FREE(v-&gt;s);                                          \</span>
00354 <span class="preprocessor">  v-&gt;s = stp_strdup(val);                                       \</span>
00355 <span class="preprocessor">  v-&gt;verified = 0;                                              \</span>
00356 <span class="preprocessor">}                                                               \</span>
00357 <span class="preprocessor">                                                                \</span>
00358 <span class="preprocessor">void                                                            \</span>
00359 <span class="preprocessor">pre##_set_##s##_n(stp_vars_t *v, const char *val, int n)        \</span>
00360 <span class="preprocessor">{                                                               \</span>
00361 <span class="preprocessor">  check_vars(v);                                                \</span>
00362 <span class="preprocessor">  if (v-&gt;s == val)                                              \</span>
00363 <span class="preprocessor">    return;                                                     \</span>
00364 <span class="preprocessor">  STP_SAFE_FREE(v-&gt;s);                                          \</span>
00365 <span class="preprocessor">  v-&gt;s = stp_strndup(val, n);                                   \</span>
00366 <span class="preprocessor">  v-&gt;verified = 0;                                              \</span>
00367 <span class="preprocessor">}                                                               \</span>
00368 <span class="preprocessor">                                                                \</span>
00369 <span class="preprocessor">const char *                                                    \</span>
00370 <span class="preprocessor">pre##_get_##s(const stp_vars_t *v)                              \</span>
00371 <span class="preprocessor">{                                                               \</span>
00372 <span class="preprocessor">  check_vars(v);                                                \</span>
00373 <span class="preprocessor">  return v-&gt;s;                                                  \</span>
00374 <span class="preprocessor">}</span>
00375 <span class="preprocessor"></span>
<a name="l00376"></a><a class="code" href="print-vars_8c.html#a1">00376</a> <span class="preprocessor">#define DEF_FUNCS(s, t, pre)                            \</span>
00377 <span class="preprocessor">void                                                    \</span>
00378 <span class="preprocessor">pre##_set_##s(stp_vars_t *v, t val)                     \</span>
00379 <span class="preprocessor">{                                                       \</span>
00380 <span class="preprocessor">  check_vars(v);                                        \</span>
00381 <span class="preprocessor">  v-&gt;verified = 0;                                      \</span>
00382 <span class="preprocessor">  v-&gt;s = val;                                           \</span>
00383 <span class="preprocessor">}                                                       \</span>
00384 <span class="preprocessor">                                                        \</span>
00385 <span class="preprocessor">t                                                       \</span>
00386 <span class="preprocessor">pre##_get_##s(const stp_vars_t *v)                      \</span>
00387 <span class="preprocessor">{                                                       \</span>
00388 <span class="preprocessor">  check_vars(v);                                        \</span>
00389 <span class="preprocessor">  return v-&gt;s;                                          \</span>
00390 <span class="preprocessor">}</span>
00391 <span class="preprocessor"></span>
00392 <a class="code" href="print-vars_8c.html#a0">DEF_STRING_FUNCS</a>(driver, stp)
00393 <a class="code" href="print-vars_8c.html#a0">DEF_STRING_FUNCS</a>(color_conversion, stp)
00394 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(left, <span class="keywordtype">int</span>, stp)
00395 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(top, <span class="keywordtype">int</span>, stp)
00396 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(width, <span class="keywordtype">int</span>, stp)
00397 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(height, <span class="keywordtype">int</span>, stp)
00398 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(page_width, <span class="keywordtype">int</span>, stp)
00399 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(page_height, <span class="keywordtype">int</span>, stp)
00400 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(outdata, <span class="keywordtype">void</span> *, stp)
00401 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(errdata, <span class="keywordtype">void</span> *, stp)
00402 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(outfunc, <a class="code" href="group__vars.html#ga3">stp_outfunc_t</a>, stp)
00403 <a class="code" href="print-vars_8c.html#a1">DEF_FUNCS</a>(errfunc, <a class="code" href="group__vars.html#ga3">stp_outfunc_t</a>, stp)
00404 
00405 <span class="keywordtype">void</span>
<a name="l00406"></a><a class="code" href="group__vars.html#ga27">00406</a> <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keywordtype">int</span> val)
00407 {
00408   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00409   v-&gt;<a class="code" href="structstp__vars.html#o14">verified</a> = val;
00410 }
00411 
00412 <span class="keywordtype">int</span>
<a name="l00413"></a><a class="code" href="group__vars.html#ga28">00413</a> <a class="code" href="group__vars.html#ga28">stp_get_verified</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
00414 {
00415   <a class="code" href="print-vars_8c.html#a8">check_vars</a>(v);
00416   <span class="keywordflow">return</span> v-&gt;<a class="code" href="structstp__vars.html#o14">verified</a>;
00417 }
00418 
00419 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00420"></a><a class="code" href="print-vars_8c.html#a29">00420</a> <a class="code" href="print-vars_8c.html#a29">set_default_raw_parameter</a>(<a class="code" href="structstp__list.html">stp_list_t</a> *list, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00421                           <span class="keyword">const</span> <span class="keywordtype">char</span> *value, size_t bytes, <span class="keywordtype">int</span> typ)
00422 {
00423   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00424   <span class="keywordflow">if</span> (value &amp;&amp; !item)
00425     {
00426       <a class="code" href="structvalue__t.html">value_t</a> *val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00427       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00428       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = typ;
00429       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
00430       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00431       <a class="code" href="print-vars_8c.html#a12">copy_to_raw</a>(&amp;(val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval), value, bytes);
00432     }
00433 }
00434 
00435 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00436"></a><a class="code" href="print-vars_8c.html#a30">00436</a> <a class="code" href="print-vars_8c.html#a30">set_raw_parameter</a>(<a class="code" href="structstp__list.html">stp_list_t</a> *list, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keyword">const</span> <span class="keywordtype">char</span> *value,
00437                   size_t bytes, <span class="keywordtype">int</span> typ)
00438 {
00439   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00440   <span class="keywordflow">if</span> (value)
00441     {
00442       <a class="code" href="structvalue__t.html">value_t</a> *val;
00443       <span class="keywordflow">if</span> (item)
00444         {
00445           val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00446           <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00447             val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00448           <a class="code" href="group__util.html#ga31">stp_free</a>((<span class="keywordtype">void</span> *) val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.data);
00449         }
00450       <span class="keywordflow">else</span>
00451         {
00452           val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00453           val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00454           val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = typ;
00455           val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00456           <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00457         }
00458       <a class="code" href="print-vars_8c.html#a12">copy_to_raw</a>(&amp;(val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval), value, bytes);
00459     }
00460   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item)
00461     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
00462 }
00463 
00464 <span class="keywordtype">void</span>
<a name="l00465"></a><a class="code" href="group__vars.html#ga31">00465</a> <a class="code" href="group__vars.html#ga31">stp_set_string_parameter_n</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00466                            <span class="keyword">const</span> <span class="keywordtype">char</span> *value, size_t bytes)
00467 {
00468   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>];
00469   <span class="keywordflow">if</span> (value)
00470     <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v, <span class="stringliteral">"stp_set_string_parameter(%s, %s)\n"</span>,
00471                 parameter, value);
00472   <span class="keywordflow">else</span>
00473     <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v, <span class="stringliteral">"stp_set_string_parameter(%s)\n"</span>,
00474                 parameter);
00475   <a class="code" href="print-vars_8c.html#a30">set_raw_parameter</a>(list, parameter, value, bytes,
00476                     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>);
00477   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00478 }
00479 
00480 <span class="keywordtype">void</span>
<a name="l00481"></a><a class="code" href="group__vars.html#ga32">00481</a> <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00482                          <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00483 {
00484   <span class="keywordtype">int</span> byte_count = 0;
00485   <span class="keywordflow">if</span> (value)
00486     {
00487       byte_count = strlen(value);
00488       <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v, <span class="stringliteral">"stp_set_string_parameter(%s, %s)\n"</span>,
00489                   parameter, value);
00490     }
00491   <span class="keywordflow">else</span>
00492     <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v, <span class="stringliteral">"stp_set_string_parameter(%s)\n"</span>,
00493                 parameter);
00494   <a class="code" href="group__vars.html#ga31">stp_set_string_parameter_n</a>(v, parameter, value, byte_count);
00495   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00496 }
00497 
00498 <span class="keywordtype">void</span>
<a name="l00499"></a><a class="code" href="group__vars.html#ga33">00499</a> <a class="code" href="group__vars.html#ga33">stp_set_default_string_parameter_n</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00500                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *value, size_t bytes)
00501 {
00502   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>];
00503   <a class="code" href="print-vars_8c.html#a29">set_default_raw_parameter</a>(list, parameter, value, bytes,
00504                             <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>);
00505   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00506 }
00507 
00508 <span class="keywordtype">void</span>
<a name="l00509"></a><a class="code" href="group__vars.html#ga34">00509</a> <a class="code" href="group__vars.html#ga34">stp_set_default_string_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00510                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00511 {
00512   <span class="keywordtype">int</span> byte_count = 0;
00513   <span class="keywordflow">if</span> (value)
00514     {
00515       byte_count = strlen(value);
00516       <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v,
00517                   <span class="stringliteral">"stp_set_default_string_parameter(%s, %s)\n"</span>,
00518                   parameter, value);
00519     }
00520   <span class="keywordflow">else</span>
00521     <a class="code" href="print-util_8c.html#a23">stp_dprintf</a>(<a class="code" href="group__util.html#ga48">STP_DBG_VARS</a>, v, <span class="stringliteral">"stp_set_default_string_parameter(%s)\n"</span>,
00522                 parameter);
00523   <a class="code" href="group__vars.html#ga33">stp_set_default_string_parameter_n</a>(v, parameter, value, byte_count);
00524   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00525 }
00526 
00527 <span class="keywordtype">void</span>
<a name="l00528"></a><a class="code" href="group__vars.html#ga35">00528</a> <a class="code" href="group__vars.html#ga35">stp_clear_string_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00529 {
00530   <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(v, parameter, NULL);
00531 }
00532 
00533 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00534"></a><a class="code" href="group__vars.html#ga36">00534</a> <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00535 {
00536   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>];
00537   <a class="code" href="structvalue__t.html">value_t</a> *val;
00538   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00539   <span class="keywordflow">if</span> (item)
00540     {
00541       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00542       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.data;
00543     }
00544   <span class="keywordflow">else</span>
00545     <span class="keywordflow">return</span> NULL;
00546 }
00547 
00548 <span class="keywordtype">void</span>
<a name="l00549"></a><a class="code" href="group__vars.html#ga37">00549</a> <a class="code" href="group__vars.html#ga37">stp_set_raw_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00550                       <span class="keyword">const</span> <span class="keywordtype">void</span> *value, size_t bytes)
00551 {
00552   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>];
00553   <a class="code" href="print-vars_8c.html#a30">set_raw_parameter</a>(list, parameter, value, bytes, <a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>);
00554   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00555 }
00556 
00557 <span class="keywordtype">void</span>
<a name="l00558"></a><a class="code" href="group__vars.html#ga38">00558</a> <a class="code" href="group__vars.html#ga38">stp_set_default_raw_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00559                               <span class="keyword">const</span> <span class="keywordtype">void</span> *value, size_t bytes)
00560 {
00561   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>];
00562   <a class="code" href="print-vars_8c.html#a29">set_default_raw_parameter</a>(list, parameter, value, bytes,
00563                             <a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>);
00564   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00565 }
00566 
00567 <span class="keywordtype">void</span>
<a name="l00568"></a><a class="code" href="group__vars.html#ga39">00568</a> <a class="code" href="group__vars.html#ga39">stp_clear_raw_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00569 {
00570   <a class="code" href="group__vars.html#ga37">stp_set_raw_parameter</a>(v, parameter, NULL, 0);
00571 }
00572 
00573 <span class="keyword">const</span> <a class="code" href="structstp__raw__t.html">stp_raw_t</a> *
<a name="l00574"></a><a class="code" href="group__vars.html#ga40">00574</a> <a class="code" href="group__vars.html#ga40">stp_get_raw_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00575 {
00576   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a13">STP_PARAMETER_TYPE_RAW</a>];
00577   <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val;
00578   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00579   <span class="keywordflow">if</span> (item)
00580     {
00581       val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00582       <span class="keywordflow">return</span> &amp;(val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval);
00583     }
00584   <span class="keywordflow">else</span>
00585     <span class="keywordflow">return</span> NULL;
00586 }
00587 
00588 <span class="keywordtype">void</span>
<a name="l00589"></a><a class="code" href="group__vars.html#ga41">00589</a> <a class="code" href="group__vars.html#ga41">stp_set_file_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00590                        <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00591 {
00592   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>];
00593   size_t byte_count = 0;
00594   <span class="keywordflow">if</span> (value)
00595     byte_count = strlen(value);
00596   <a class="code" href="print-vars_8c.html#a30">set_raw_parameter</a>(list, parameter, value, byte_count,
00597                     <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>);
00598   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00599 }
00600 
00601 <span class="keywordtype">void</span>
<a name="l00602"></a><a class="code" href="group__vars.html#ga42">00602</a> <a class="code" href="group__vars.html#ga42">stp_set_file_parameter_n</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00603                          <span class="keyword">const</span> <span class="keywordtype">char</span> *value, size_t byte_count)
00604 {
00605   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>];
00606   <a class="code" href="print-vars_8c.html#a30">set_raw_parameter</a>(list, parameter, value, byte_count,
00607                     <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>);
00608   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00609 }
00610 
00611 <span class="keywordtype">void</span>
<a name="l00612"></a><a class="code" href="group__vars.html#ga43">00612</a> <a class="code" href="group__vars.html#ga43">stp_set_default_file_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00613                                <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00614 {
00615   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>];
00616   size_t byte_count = 0;
00617   <span class="keywordflow">if</span> (value)
00618     byte_count = strlen(value);
00619   <a class="code" href="print-vars_8c.html#a29">set_default_raw_parameter</a>(list, parameter, value, byte_count,
00620                             <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>);
00621   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00622 }
00623 
00624 <span class="keywordtype">void</span>
<a name="l00625"></a><a class="code" href="group__vars.html#ga44">00625</a> <a class="code" href="group__vars.html#ga44">stp_set_default_file_parameter_n</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00626                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *value, size_t byte_count)
00627 {
00628   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>];
00629   <a class="code" href="print-vars_8c.html#a29">set_default_raw_parameter</a>(list, parameter, value, byte_count,
00630                             <a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>);
00631   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00632 }
00633 
00634 <span class="keywordtype">void</span>
<a name="l00635"></a><a class="code" href="group__vars.html#ga45">00635</a> <a class="code" href="group__vars.html#ga45">stp_clear_file_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00636 {
00637   <a class="code" href="group__vars.html#ga41">stp_set_file_parameter</a>(v, parameter, NULL);
00638 }
00639 
00640 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00641"></a><a class="code" href="group__vars.html#ga46">00641</a> <a class="code" href="group__vars.html#ga46">stp_get_file_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00642 {
00643   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a12">STP_PARAMETER_TYPE_FILE</a>];
00644   <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val;
00645   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00646   <span class="keywordflow">if</span> (item)
00647     {
00648       val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00649       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.rval.data;
00650     }
00651   <span class="keywordflow">else</span>
00652     <span class="keywordflow">return</span> NULL;
00653 }
00654 
00655 <span class="keywordtype">void</span>
<a name="l00656"></a><a class="code" href="group__vars.html#ga47">00656</a> <a class="code" href="group__vars.html#ga47">stp_set_curve_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00657                         <span class="keyword">const</span> <a class="code" href="structstp__curve.html">stp_curve_t</a> *curve)
00658 {
00659   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>];
00660   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00661   <span class="keywordflow">if</span> (curve)
00662     {
00663       <a class="code" href="structvalue__t.html">value_t</a> *val;
00664       <span class="keywordflow">if</span> (item)
00665         {
00666           val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00667           <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00668             val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00669           <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval)
00670             <a class="code" href="group__curve.html#ga22">stp_curve_destroy</a>(val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval);
00671         }
00672       <span class="keywordflow">else</span>
00673         {
00674           val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00675           val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00676           val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>;
00677           val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00678           <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00679         }
00680       val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval = <a class="code" href="group__curve.html#ga24">stp_curve_create_copy</a>(curve);
00681     }
00682   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item)
00683     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
00684   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00685 }
00686 
00687 <span class="keywordtype">void</span>
<a name="l00688"></a><a class="code" href="group__vars.html#ga48">00688</a> <a class="code" href="group__vars.html#ga48">stp_set_default_curve_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00689                                 <span class="keyword">const</span> <a class="code" href="structstp__curve.html">stp_curve_t</a> *curve)
00690 {
00691   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>];
00692   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00693   <span class="keywordflow">if</span> (!item)
00694     {
00695       <span class="keywordflow">if</span> (curve)
00696         {
00697           <a class="code" href="structvalue__t.html">value_t</a> *val;
00698           val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00699           val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00700           val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>;
00701           val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
00702           <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00703           val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval = <a class="code" href="group__curve.html#ga24">stp_curve_create_copy</a>(curve);
00704         }
00705     }
00706   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00707 }
00708 
00709 <span class="keywordtype">void</span>
<a name="l00710"></a><a class="code" href="group__vars.html#ga49">00710</a> <a class="code" href="group__vars.html#ga49">stp_clear_curve_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00711 {
00712   <a class="code" href="group__vars.html#ga47">stp_set_curve_parameter</a>(v, parameter, NULL);
00713 }
00714 
00715 <span class="keyword">const</span> <a class="code" href="structstp__curve.html">stp_curve_t</a> *
<a name="l00716"></a><a class="code" href="group__vars.html#ga50">00716</a> <a class="code" href="group__vars.html#ga50">stp_get_curve_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00717 {
00718   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>];
00719   <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val;
00720   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00721   <span class="keywordflow">if</span> (item)
00722     {
00723       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00724       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.cval;
00725     }
00726   <span class="keywordflow">else</span>
00727     <span class="keywordflow">return</span> NULL;
00728 }
00729 
00730 <span class="keywordtype">void</span>
<a name="l00731"></a><a class="code" href="group__vars.html#ga51">00731</a> <a class="code" href="group__vars.html#ga51">stp_set_array_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00732                         <span class="keyword">const</span> <a class="code" href="structstp__array.html">stp_array_t</a> *array)
00733 {
00734   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>];
00735   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00736   <span class="keywordflow">if</span> (array)
00737     {
00738       <a class="code" href="structvalue__t.html">value_t</a> *val;
00739       <span class="keywordflow">if</span> (item)
00740         {
00741           val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00742           <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00743             val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00744           <a class="code" href="group__array.html#ga4">stp_array_destroy</a>(val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval);
00745         }
00746       <span class="keywordflow">else</span>
00747         {
00748           val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00749           val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00750           val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>;
00751           val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00752           <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00753         }
00754       val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval = <a class="code" href="group__array.html#ga6">stp_array_create_copy</a>(array);
00755     }
00756   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item)
00757     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
00758   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00759 }
00760 
00761 <span class="keywordtype">void</span>
<a name="l00762"></a><a class="code" href="group__vars.html#ga52">00762</a> <a class="code" href="group__vars.html#ga52">stp_set_default_array_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00763                                 <span class="keyword">const</span> <a class="code" href="structstp__array.html">stp_array_t</a> *array)
00764 {
00765   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>];
00766   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00767   <span class="keywordflow">if</span> (!item)
00768     {
00769       <span class="keywordflow">if</span> (array)
00770         {
00771           <a class="code" href="structvalue__t.html">value_t</a> *val;
00772           val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00773           val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00774           val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>;
00775           val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
00776           <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00777           val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval = <a class="code" href="group__array.html#ga6">stp_array_create_copy</a>(array);
00778         }
00779     }
00780   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00781 }
00782 
00783 <span class="keywordtype">void</span>
<a name="l00784"></a><a class="code" href="group__vars.html#ga53">00784</a> <a class="code" href="group__vars.html#ga53">stp_clear_array_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00785 {
00786   <a class="code" href="group__vars.html#ga51">stp_set_array_parameter</a>(v, parameter, NULL);
00787 }
00788 
00789 <span class="keyword">const</span> <a class="code" href="structstp__array.html">stp_array_t</a> *
<a name="l00790"></a><a class="code" href="group__vars.html#ga54">00790</a> <a class="code" href="group__vars.html#ga54">stp_get_array_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00791 {
00792   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>];
00793   <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val;
00794   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00795   <span class="keywordflow">if</span> (item)
00796     {
00797       val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00798       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.aval;
00799     }
00800   <span class="keywordflow">else</span>
00801     <span class="keywordflow">return</span> NULL;
00802 }
00803 
00804 <span class="keywordtype">void</span>
<a name="l00805"></a><a class="code" href="group__vars.html#ga55">00805</a> <a class="code" href="group__vars.html#ga55">stp_set_int_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">int</span> ival)
00806 {
00807   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>];
00808   <a class="code" href="structvalue__t.html">value_t</a> *val;
00809   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00810   <span class="keywordflow">if</span> (item)
00811     {
00812       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00813       <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00814         val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00815     }
00816   <span class="keywordflow">else</span>
00817     {
00818       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00819       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00820       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>;
00821       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00822       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00823     }
00824   val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = ival;
00825   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00826 }
00827 
00828 <span class="keywordtype">void</span>
<a name="l00829"></a><a class="code" href="group__vars.html#ga56">00829</a> <a class="code" href="group__vars.html#ga56">stp_set_default_int_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">int</span> ival)
00830 {
00831   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>];
00832   <a class="code" href="structvalue__t.html">value_t</a> *val;
00833   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00834   <span class="keywordflow">if</span> (!item)
00835     {
00836       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00837       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00838       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>;
00839       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
00840       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00841       val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = ival;
00842     }
00843   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00844 }
00845 
00846 <span class="keywordtype">void</span>
<a name="l00847"></a><a class="code" href="group__vars.html#ga57">00847</a> <a class="code" href="group__vars.html#ga57">stp_clear_int_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00848 {
00849   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>];
00850   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00851   <span class="keywordflow">if</span> (item)
00852     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
00853   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00854 }
00855 
00856 <span class="keywordtype">int</span>
<a name="l00857"></a><a class="code" href="group__vars.html#ga58">00857</a> <a class="code" href="group__vars.html#ga58">stp_get_int_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00858 {
00859   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>];
00860   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00861   <span class="keywordflow">if</span> (item)
00862     {
00863       <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00864       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival;
00865     }
00866   <span class="keywordflow">else</span>
00867     {
00868       <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> desc;
00869       <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(v, parameter, &amp;desc);
00870       <span class="keywordflow">if</span> (desc.<a class="code" href="structstp__parameter__t.html#o4">p_type</a> == <a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>)
00871         {
00872           <span class="keywordtype">int</span> intval = desc.<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.integer;
00873           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
00874           <span class="keywordflow">return</span> intval;
00875         }
00876       <span class="keywordflow">else</span>
00877         {
00878           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
00879           <a class="code" href="group__util.html#ga16">stp_erprintf</a>
00880             (<span class="stringliteral">"GIMP-PRINT: Attempt to retrieve unset integer parameter %s\n"</span>,
00881              parameter);
00882           <span class="keywordflow">return</span> 0;
00883         }
00884     }
00885 }
00886 
00887 <span class="keywordtype">void</span>
<a name="l00888"></a><a class="code" href="group__vars.html#ga59">00888</a> <a class="code" href="group__vars.html#ga59">stp_set_boolean_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">int</span> ival)
00889 {
00890   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>];
00891   <a class="code" href="structvalue__t.html">value_t</a> *val;
00892   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00893   <span class="keywordflow">if</span> (item)
00894     {
00895       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00896       <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00897         val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00898     }
00899   <span class="keywordflow">else</span>
00900     {
00901       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00902       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00903       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>;
00904       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00905       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00906     }
00907   <span class="keywordflow">if</span> (ival)
00908     val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = 1;
00909   <span class="keywordflow">else</span>
00910     val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = 0;
00911   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00912 }
00913 
00914 <span class="keywordtype">void</span>
<a name="l00915"></a><a class="code" href="group__vars.html#ga60">00915</a> <a class="code" href="group__vars.html#ga60">stp_set_default_boolean_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
00916                                   <span class="keywordtype">int</span> ival)
00917 {
00918   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>];
00919   <a class="code" href="structvalue__t.html">value_t</a> *val;
00920   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00921   <span class="keywordflow">if</span> (!item)
00922     {
00923       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00924       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00925       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>;
00926       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
00927       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00928       <span class="keywordflow">if</span> (ival)
00929         val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = 1;
00930       <span class="keywordflow">else</span>
00931         val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = 0;
00932     }
00933   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00934 }
00935 
00936 <span class="keywordtype">void</span>
<a name="l00937"></a><a class="code" href="group__vars.html#ga61">00937</a> <a class="code" href="group__vars.html#ga61">stp_clear_boolean_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00938 {
00939   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>];
00940   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00941   <span class="keywordflow">if</span> (item)
00942     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
00943   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00944 }
00945 
00946 <span class="keywordtype">int</span>
<a name="l00947"></a><a class="code" href="group__vars.html#ga62">00947</a> <a class="code" href="group__vars.html#ga62">stp_get_boolean_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
00948 {
00949   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>];
00950   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00951   <span class="keywordflow">if</span> (item)
00952     {
00953       <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00954       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival;
00955     }
00956   <span class="keywordflow">else</span>
00957     {
00958       <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> desc;
00959       <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(v, parameter, &amp;desc);
00960       <span class="keywordflow">if</span> (desc.<a class="code" href="structstp__parameter__t.html#o4">p_type</a> == <a class="code" href="group__vars.html#gga132a9">STP_PARAMETER_TYPE_BOOLEAN</a>)
00961         {
00962           <span class="keywordtype">int</span> <span class="keywordtype">boolean</span> = desc.<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.boolean;
00963           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
00964           <span class="keywordflow">return</span> <span class="keywordtype">boolean</span>;
00965         }
00966       <span class="keywordflow">else</span>
00967         {
00968           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
00969           <a class="code" href="group__util.html#ga16">stp_erprintf</a>
00970             (<span class="stringliteral">"GIMP-PRINT: Attempt to retrieve unset boolean parameter %s\n"</span>,
00971              parameter);
00972           <span class="keywordflow">return</span> 0;
00973         }
00974     }
00975 }
00976 
00977 <span class="keywordtype">void</span>
<a name="l00978"></a><a class="code" href="group__vars.html#ga63">00978</a> <a class="code" href="group__vars.html#ga63">stp_set_dimension_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">int</span> ival)
00979 {
00980   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>];
00981   <a class="code" href="structvalue__t.html">value_t</a> *val;
00982   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
00983   <span class="keywordflow">if</span> (item)
00984     {
00985       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
00986       <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
00987         val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00988     }
00989   <span class="keywordflow">else</span>
00990     {
00991       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
00992       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
00993       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>;
00994       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
00995       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
00996     }
00997   val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = ival;
00998   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
00999 }
01000 
01001 <span class="keywordtype">void</span>
<a name="l01002"></a><a class="code" href="group__vars.html#ga64">01002</a> <a class="code" href="group__vars.html#ga64">stp_set_default_dimension_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">int</span> ival)
01003 {
01004   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>];
01005   <a class="code" href="structvalue__t.html">value_t</a> *val;
01006   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01007   <span class="keywordflow">if</span> (!item)
01008     {
01009       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
01010       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
01011       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>;
01012       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
01013       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
01014       val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival = ival;
01015     }
01016   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
01017 }
01018 
01019 <span class="keywordtype">void</span>
<a name="l01020"></a><a class="code" href="group__vars.html#ga65">01020</a> <a class="code" href="group__vars.html#ga65">stp_clear_dimension_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
01021 {
01022   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>];
01023   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01024   <span class="keywordflow">if</span> (item)
01025     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
01026   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
01027 }
01028 
01029 <span class="keywordtype">int</span>
<a name="l01030"></a><a class="code" href="group__vars.html#ga66">01030</a> <a class="code" href="group__vars.html#ga66">stp_get_dimension_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
01031 {
01032   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>];
01033   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01034   <span class="keywordflow">if</span> (item)
01035     {
01036       <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val = (<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
01037       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.ival;
01038     }
01039   <span class="keywordflow">else</span>
01040     {
01041       <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> desc;
01042       <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(v, parameter, &amp;desc);
01043       <span class="keywordflow">if</span> (desc.<a class="code" href="structstp__parameter__t.html#o4">p_type</a> == <a class="code" href="group__vars.html#gga132a15">STP_PARAMETER_TYPE_DIMENSION</a>)
01044         {
01045           <span class="keywordtype">int</span> intval = desc.<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.integer;
01046           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01047           <span class="keywordflow">return</span> intval;
01048         }
01049       <span class="keywordflow">else</span>
01050         {
01051           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01052           <a class="code" href="group__util.html#ga16">stp_erprintf</a>
01053             (<span class="stringliteral">"GIMP-PRINT: Attempt to retrieve unset dimension parameter %s\n"</span>,
01054              parameter);
01055           <span class="keywordflow">return</span> 0;
01056         }
01057     }
01058 }
01059 
01060 <span class="keywordtype">void</span>
<a name="l01061"></a><a class="code" href="group__vars.html#ga67">01061</a> <a class="code" href="group__vars.html#ga67">stp_set_float_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, <span class="keywordtype">double</span> dval)
01062 {
01063   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>];
01064   <a class="code" href="structvalue__t.html">value_t</a> *val;
01065   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01066   <span class="keywordflow">if</span> (item)
01067     {
01068       val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
01069       <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> == <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>)
01070         val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
01071     }
01072   <span class="keywordflow">else</span>
01073     {
01074       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
01075       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
01076       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>;
01077       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a>;
01078       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
01079     }
01080   val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.dval = dval;
01081   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
01082 }
01083 
01084 <span class="keywordtype">void</span>
<a name="l01085"></a><a class="code" href="group__vars.html#ga68">01085</a> <a class="code" href="group__vars.html#ga68">stp_set_default_float_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
01086                                 <span class="keywordtype">double</span> dval)
01087 {
01088   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>];
01089   <a class="code" href="structvalue__t.html">value_t</a> *val;
01090   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01091   <span class="keywordflow">if</span> (!item)
01092     {
01093       val = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structvalue__t.html">value_t</a>));
01094       val-&gt;<a class="code" href="structvalue__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(parameter);
01095       val-&gt;<a class="code" href="structvalue__t.html#o1">typ</a> = <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>;
01096       val-&gt;<a class="code" href="structvalue__t.html#o2">active</a> = <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>;
01097       <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(list, NULL, val);
01098       val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.dval = dval;
01099     }
01100   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
01101 }
01102 
01103 <span class="keywordtype">void</span>
<a name="l01104"></a><a class="code" href="group__vars.html#ga69">01104</a> <a class="code" href="group__vars.html#ga69">stp_clear_float_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
01105 {
01106   <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>];
01107   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01108   <span class="keywordflow">if</span> (item)
01109     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
01110   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(v, 0);
01111 }
01112 
01113 <span class="keywordtype">double</span>
<a name="l01114"></a><a class="code" href="group__vars.html#ga70">01114</a> <a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
01115 {
01116   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[<a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>];
01117   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01118   <span class="keywordflow">if</span> (item)
01119     {
01120       <span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *val = (<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
01121       <span class="keywordflow">return</span> val-&gt;<a class="code" href="structvalue__t.html#o9">value</a>.dval;
01122     }
01123   <span class="keywordflow">else</span>
01124     {
01125       <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> desc;
01126       <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(v, parameter, &amp;desc);
01127       <span class="keywordflow">if</span> (desc.<a class="code" href="structstp__parameter__t.html#o4">p_type</a> == <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>)
01128         {
01129           <span class="keywordtype">double</span> dbl = desc.<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.dbl;
01130           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01131           <span class="keywordflow">return</span> dbl;
01132         }
01133       <span class="keywordflow">else</span>
01134         {
01135           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01136           <a class="code" href="group__util.html#ga16">stp_erprintf</a>
01137             (<span class="stringliteral">"GIMP-PRINT: Attempt to retrieve unset float parameter %s\n"</span>,
01138              parameter);
01139           <span class="keywordflow">return</span> 1.0;
01140         }
01141     }
01142 }
01143 
01144 <span class="keywordtype">void</span>
<a name="l01145"></a><a class="code" href="group__vars.html#ga71">01145</a> <a class="code" href="group__vars.html#ga71">stp_scale_float_parameter</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
01146                           <span class="keywordtype">double</span> scale)
01147 {
01148   <span class="keywordtype">double</span> val;
01149   <span class="keywordflow">if</span> (<a class="code" href="group__vars.html#ga102">stp_check_float_parameter</a>(v, parameter, <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a>))
01150     val = <a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(v, parameter);
01151   <span class="keywordflow">else</span>
01152     {
01153       <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> desc;
01154       <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(v, parameter, &amp;desc);
01155       <span class="keywordflow">if</span> (desc.<a class="code" href="structstp__parameter__t.html#o4">p_type</a> != <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>)
01156         {
01157           <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01158           <span class="keywordflow">return</span>;
01159         }
01160       val = desc.<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.dbl;
01161       <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(&amp;desc);
01162     }
01163   <a class="code" href="group__vars.html#ga67">stp_set_float_parameter</a>(v, parameter, val * scale);
01164 }
01165 
01166 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01167"></a><a class="code" href="print-vars_8c.html#a72">01167</a> <a class="code" href="print-vars_8c.html#a72">check_parameter_generic</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, stp_parameter_type_t p_type,
01168                         <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter, stp_parameter_activity_t active)
01169 {
01170   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[p_type];
01171   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01172   <span class="keywordflow">if</span> (item &amp;&amp;
01173       active &lt;= ((<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item))-&gt;active)
01174     <span class="keywordflow">return</span> 1;
01175   <span class="keywordflow">else</span>
01176     <span class="keywordflow">return</span> 0;
01177 }
01178 
<a name="l01179"></a><a class="code" href="print-vars_8c.html#a2">01179</a> <span class="preprocessor">#define CHECK_FUNCTION(type, index)                                     \</span>
01180 <span class="preprocessor">int                                                                     \</span>
01181 <span class="preprocessor">stp_check_##type##_parameter(const stp_vars_t *v, const char *parameter,        \</span>
01182 <span class="preprocessor">                             stp_parameter_activity_t active)           \</span>
01183 <span class="preprocessor">{                                                                       \</span>
01184 <span class="preprocessor">  return check_parameter_generic(v, index, parameter, active);          \</span>
01185 <span class="preprocessor">}</span>
01186 <span class="preprocessor"></span>
01187 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(string, STP_PARAMETER_TYPE_STRING_LIST)
01188 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(file, STP_PARAMETER_TYPE_FILE)
01189 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(<span class="keywordtype">float</span>, STP_PARAMETER_TYPE_DOUBLE)
01190 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(<span class="keywordtype">int</span>, STP_PARAMETER_TYPE_INT)
01191 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(dimension, STP_PARAMETER_TYPE_DIMENSION)
01192 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(<span class="keywordtype">boolean</span>, STP_PARAMETER_TYPE_BOOLEAN)
01193 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(curve, STP_PARAMETER_TYPE_CURVE)
01194 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(array, STP_PARAMETER_TYPE_ARRAY)
01195 <a class="code" href="print-vars_8c.html#a2">CHECK_FUNCTION</a>(<a class="code" href="structraw.html">raw</a>, STP_PARAMETER_TYPE_RAW)
01196 
01197 <span class="keyword">static</span> <a class="code" href="group__vars.html#ga135">stp_parameter_activity_t</a>
<a name="l01198"></a><a class="code" href="print-vars_8c.html#a73">01198</a> <a class="code" href="print-vars_8c.html#a73">get_parameter_active_generic</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, stp_parameter_type_t p_type,
01199                              <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter)
01200 {
01201   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[p_type];
01202   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01203   <span class="keywordflow">if</span> (item)
01204     <span class="keywordflow">return</span> ((<span class="keyword">const</span> <a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item))-&gt;active;
01205   <span class="keywordflow">else</span>
01206     <span class="keywordflow">return</span> 0;
01207 }
01208 
<a name="l01209"></a><a class="code" href="print-vars_8c.html#a3">01209</a> <span class="preprocessor">#define GET_PARAMETER_ACTIVE_FUNCTION(type, index)                           \</span>
01210 <span class="preprocessor">stp_parameter_activity_t                                                     \</span>
01211 <span class="preprocessor">stp_get_##type##_parameter_active(const stp_vars_t *v, const char *parameter) \</span>
01212 <span class="preprocessor">{                                                                            \</span>
01213 <span class="preprocessor">  return get_parameter_active_generic(v, index, parameter);                  \</span>
01214 <span class="preprocessor">}</span>
01215 <span class="preprocessor"></span>
01216 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(string, STP_PARAMETER_TYPE_STRING_LIST)
01217 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(file, STP_PARAMETER_TYPE_FILE)
01218 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">float</span>, STP_PARAMETER_TYPE_DOUBLE)
01219 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">int</span>, STP_PARAMETER_TYPE_INT)
01220 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(dimension, STP_PARAMETER_TYPE_DIMENSION)
01221 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">boolean</span>, STP_PARAMETER_TYPE_BOOLEAN)
01222 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(curve, STP_PARAMETER_TYPE_CURVE)
01223 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(array, STP_PARAMETER_TYPE_ARRAY)
01224 <a class="code" href="print-vars_8c.html#a3">GET_PARAMETER_ACTIVE_FUNCTION</a>(<a class="code" href="structraw.html">raw</a>, STP_PARAMETER_TYPE_RAW)
01225 
01226 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01227"></a><a class="code" href="print-vars_8c.html#a74">01227</a> <a class="code" href="print-vars_8c.html#a74">set_parameter_active_generic</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, stp_parameter_type_t p_type,
01228                              <span class="keyword">const</span> <span class="keywordtype">char</span> *parameter,
01229                              stp_parameter_activity_t active)
01230 {
01231   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[p_type];
01232   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(list, parameter);
01233   <span class="keywordflow">if</span> (item &amp;&amp; (active == <a class="code" href="group__vars.html#gga135a32">STP_PARAMETER_ACTIVE</a> ||
01234                active == <a class="code" href="group__vars.html#gga135a30">STP_PARAMETER_INACTIVE</a>))
01235     ((<a class="code" href="structvalue__t.html">value_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item))-&gt;active = active;
01236 }
01237 
<a name="l01238"></a><a class="code" href="print-vars_8c.html#a4">01238</a> <span class="preprocessor">#define SET_PARAMETER_ACTIVE_FUNCTION(type, index)                           \</span>
01239 <span class="preprocessor">void                                                                         \</span>
01240 <span class="preprocessor">stp_set_##type##_parameter_active(const stp_vars_t *v, const char *parameter, \</span>
01241 <span class="preprocessor">                                  stp_parameter_activity_t active)           \</span>
01242 <span class="preprocessor">{                                                                            \</span>
01243 <span class="preprocessor">  set_parameter_active_generic(v, index, parameter, active);                 \</span>
01244 <span class="preprocessor">}</span>
01245 <span class="preprocessor"></span>
01246 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(string, STP_PARAMETER_TYPE_STRING_LIST)
01247 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(file, STP_PARAMETER_TYPE_FILE)
01248 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">float</span>, STP_PARAMETER_TYPE_DOUBLE)
01249 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">int</span>, STP_PARAMETER_TYPE_INT)
01250 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(dimension, STP_PARAMETER_TYPE_DIMENSION)
01251 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(<span class="keywordtype">boolean</span>, STP_PARAMETER_TYPE_BOOLEAN)
01252 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(curve, STP_PARAMETER_TYPE_CURVE)
01253 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(array, STP_PARAMETER_TYPE_ARRAY)
01254 <a class="code" href="print-vars_8c.html#a4">SET_PARAMETER_ACTIVE_FUNCTION</a>(<a class="code" href="structraw.html">raw</a>, STP_PARAMETER_TYPE_RAW)
01255 
01256 <span class="keywordtype">void</span>
<a name="l01257"></a><a class="code" href="group__vars.html#ga75">01257</a> <a class="code" href="group__vars.html#ga75">stp_fill_parameter_settings</a>(<a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *desc,
01258                             <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *param)
01259 {
01260   <span class="keywordflow">if</span> (param)
01261     {
01262       desc-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a>;
01263       desc-&gt;<a class="code" href="structstp__parameter__t.html#o6">p_level</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o6">p_level</a>;
01264       desc-&gt;<a class="code" href="structstp__parameter__t.html#o5">p_class</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o5">p_class</a>;
01265       desc-&gt;<a class="code" href="structstp__parameter__t.html#o7">is_mandatory</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o7">is_mandatory</a>;
01266       desc-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a>;
01267       desc-&gt;<a class="code" href="structstp__parameter__t.html#o9">channel</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o9">channel</a>;
01268       desc-&gt;<a class="code" href="structstp__parameter__t.html#o10">verify_this_parameter</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o10">verify_this_parameter</a>;
01269       desc-&gt;<a class="code" href="structstp__parameter__t.html#o11">read_only</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o11">read_only</a>;
01270       desc-&gt;<a class="code" href="structstp__parameter__t.html#o0">name</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o0">name</a>;
01271       desc-&gt;<a class="code" href="structstp__parameter__t.html#o1">text</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o1">text</a>;
01272       desc-&gt;<a class="code" href="structstp__parameter__t.html#o2">category</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o2">category</a>;
01273       desc-&gt;<a class="code" href="structstp__parameter__t.html#o3">help</a> = param-&gt;<a class="code" href="structstp__parameter__t.html#o3">help</a>;
01274       <span class="keywordflow">return</span>;
01275     }
01276 }
01277 
01278 <span class="keywordtype">void</span>
<a name="l01279"></a><a class="code" href="group__vars.html#ga76">01279</a> <a class="code" href="group__vars.html#ga76">stp_vars_copy</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *vd, <span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *vs)
01280 {
01281   <span class="keywordtype">int</span> i;
01282 
01283   <span class="keywordflow">if</span> (vs == vd)
01284     <span class="keywordflow">return</span>;
01285   <a class="code" href="group__vars.html#ga11">stp_set_driver</a>(vd, <a class="code" href="group__vars.html#ga13">stp_get_driver</a>(vs));
01286   <a class="code" href="group__vars.html#ga14">stp_set_color_conversion</a>(vd, <a class="code" href="group__vars.html#ga16">stp_get_color_conversion</a>(vs));
01287   <a class="code" href="group__vars.html#ga17">stp_set_left</a>(vd, <a class="code" href="group__vars.html#ga18">stp_get_left</a>(vs));
01288   <a class="code" href="group__vars.html#ga19">stp_set_top</a>(vd, <a class="code" href="group__vars.html#ga20">stp_get_top</a>(vs));
01289   <a class="code" href="group__vars.html#ga21">stp_set_width</a>(vd, <a class="code" href="group__vars.html#ga22">stp_get_width</a>(vs));
01290   <a class="code" href="group__vars.html#ga23">stp_set_height</a>(vd, <a class="code" href="group__vars.html#ga24">stp_get_height</a>(vs));
01291   <a class="code" href="group__vars.html#ga25">stp_set_page_width</a>(vd, <a class="code" href="group__vars.html#ga26">stp_get_page_width</a>(vs));
01292   <a class="code" href="group__vars.html#ga27">stp_set_page_height</a>(vd, <a class="code" href="group__vars.html#ga28">stp_get_page_height</a>(vs));
01293   <a class="code" href="group__vars.html#ga33">stp_set_outdata</a>(vd, <a class="code" href="group__vars.html#ga34">stp_get_outdata</a>(vs));
01294   <a class="code" href="group__vars.html#ga35">stp_set_errdata</a>(vd, <a class="code" href="group__vars.html#ga36">stp_get_errdata</a>(vs));
01295   <a class="code" href="group__vars.html#ga29">stp_set_outfunc</a>(vd, <a class="code" href="group__vars.html#ga30">stp_get_outfunc</a>(vs));
01296   <a class="code" href="group__vars.html#ga31">stp_set_errfunc</a>(vd, <a class="code" href="group__vars.html#ga32">stp_get_errfunc</a>(vs));
01297   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>; i++)
01298     {
01299       <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>(vd-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i]);
01300       vd-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i] = <a class="code" href="print-vars_8c.html#a14">copy_value_list</a>(vs-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i]);
01301     }
01302   <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>(vd-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>);
01303   vd-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a> = <a class="code" href="print-vars_8c.html#a22">copy_compdata_list</a>(vs-&gt;<a class="code" href="structstp__vars.html#o9">internal_data</a>);
01304   <a class="code" href="group__vars.html#ga27">stp_set_verified</a>(vd, <a class="code" href="group__vars.html#ga28">stp_get_verified</a>(vs));
01305 }
01306 
01307 <span class="keywordtype">void</span>
<a name="l01308"></a><a class="code" href="group__util.html#ga77">01308</a> <a class="code" href="group__util.html#ga77">stp_prune_inactive_options</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
01309 {
01310   <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> params = <a class="code" href="group__vars.html#ga39">stp_get_parameter_list</a>(v);
01311   <span class="keywordtype">int</span> i;
01312   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>; i++)
01313     {
01314       <a class="code" href="structstp__list.html">stp_list_t</a> *list = v-&gt;<a class="code" href="structstp__vars.html#o8">params</a>[i];
01315       <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a12">stp_list_get_start</a>(list);
01316       <span class="keywordflow">while</span> (item)
01317         {
01318           <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *next = <a class="code" href="print-list_8c.html#a32">stp_list_item_next</a>(item);
01319           <a class="code" href="structvalue__t.html">value_t</a> *var = (<a class="code" href="structvalue__t.html">value_t</a> *)<a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
01320           <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structvalue__t.html#o2">active</a> &lt; <a class="code" href="group__vars.html#gga135a31">STP_PARAMETER_DEFAULTED</a> ||
01321               !(<a class="code" href="group__vars.html#ga87">stp_parameter_find</a>(params, var-&gt;<a class="code" href="structvalue__t.html#o0">name</a>)))
01322             <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>(list, item);
01323           item = next;
01324         }
01325     }
01326   <a class="code" href="group__vars.html#ga89">stp_parameter_list_destroy</a>(params);
01327 }
01328 
01329 <a class="code" href="structstp__vars.html">stp_vars_t</a> *
<a name="l01330"></a><a class="code" href="group__vars.html#ga78">01330</a> <a class="code" href="group__vars.html#ga78">stp_vars_create_copy</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *vs)
01331 {
01332   <a class="code" href="structstp__vars.html">stp_vars_t</a> *vd = <a class="code" href="group__vars.html#ga7">stp_vars_create</a>();
01333   <a class="code" href="group__vars.html#ga76">stp_vars_copy</a>(vd, vs);
01334   <span class="keywordflow">return</span> (vd);
01335 }
01336 
01337 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01338"></a><a class="code" href="print-vars_8c.html#a79">01338</a> <a class="code" href="print-vars_8c.html#a79">param_namefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
01339 {
01340   <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *param = (<span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *)(item);
01341   <span class="keywordflow">return</span> param-&gt;<a class="code" href="structstp__parameter__t.html#o0">name</a>;
01342 }
01343 
01344 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01345"></a><a class="code" href="print-vars_8c.html#a80">01345</a> <a class="code" href="print-vars_8c.html#a80">param_longnamefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
01346 {
01347   <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *param = (<span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *) (item);
01348   <span class="keywordflow">return</span> param-&gt;<a class="code" href="structstp__parameter__t.html#o1">text</a>;
01349 }
01350 
01351 <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a>
<a name="l01352"></a><a class="code" href="group__vars.html#ga81">01352</a> <a class="code" href="group__vars.html#ga43">stp_parameter_list_create</a>(<span class="keywordtype">void</span>)
01353 {
01354   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="list_8h.html#a7">stp_list_create</a>();
01355   <a class="code" href="print-list_8c.html#a23">stp_list_set_namefunc</a>(ret, <a class="code" href="print-vars_8c.html#a79">param_namefunc</a>);
01356   <a class="code" href="print-list_8c.html#a25">stp_list_set_long_namefunc</a>(ret, <a class="code" href="print-vars_8c.html#a80">param_longnamefunc</a>);
01357   <span class="keywordflow">return</span> (<a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a>) ret;
01358 }
01359 
01360 <span class="keywordtype">void</span>
<a name="l01361"></a><a class="code" href="group__vars.html#ga82">01361</a> <a class="code" href="group__vars.html#ga82">stp_parameter_list_add_param</a>(<a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> list,
01362                              <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *item)
01363 {
01364   <a class="code" href="structstp__list.html">stp_list_t</a> *ilist = (<a class="code" href="structstp__list.html">stp_list_t</a> *) list;
01365   <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(ilist, NULL, item);
01366 }
01367 
01368 <span class="keywordtype">void</span>
<a name="l01369"></a><a class="code" href="group__vars.html#ga83">01369</a> <a class="code" href="group__vars.html#ga83">stp_describe_parameter</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
01370                        <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *description)
01371 {
01372   description-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> = <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>;
01373 <span class="comment">/* Set these to NULL in case stpi_*_describe_parameter() doesn't */</span>
01374   description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = NULL;
01375   description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str = NULL;
01376   <a class="code" href="group__printer.html#ga25">stp_printer_describe_parameter</a>(v, name, description);
01377   <span class="keywordflow">if</span> (description-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> != <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>)
01378     <span class="keywordflow">return</span>;
01379   <a class="code" href="group__color.html#ga16">stp_color_describe_parameter</a>(v, name, description);
01380   <span class="keywordflow">if</span> (description-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> != <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>)
01381     <span class="keywordflow">return</span>;
01382   <a class="code" href="dither-main_8c.html#a7">stp_dither_describe_parameter</a>(v, name, description);
01383   <span class="keywordflow">if</span> (description-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> != <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>)
01384     <span class="keywordflow">return</span>;
01385   <a class="code" href="generic-options_8h.html#a10">stpi_describe_generic_parameter</a>(v, name, description);
01386 }
01387 
01388 <span class="keywordtype">void</span>
<a name="l01389"></a><a class="code" href="group__vars.html#ga84">01389</a> <a class="code" href="group__vars.html#ga84">stp_parameter_description_destroy</a>(<a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *desc)
01390 {
01391   <span class="keywordflow">switch</span> (desc-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a>)
01392     {
01393     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a11">STP_PARAMETER_TYPE_CURVE</a>:
01394       <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.curve)
01395         <a class="code" href="group__curve.html#ga22">stp_curve_destroy</a>(desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.curve);
01396       desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.curve = NULL;
01397       <span class="keywordflow">break</span>;
01398     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a14">STP_PARAMETER_TYPE_ARRAY</a>:
01399       <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.array)
01400         <a class="code" href="group__array.html#ga4">stp_array_destroy</a>(desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.array);
01401       desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.array = NULL;
01402       <span class="keywordflow">break</span>;
01403     <span class="keywordflow">case</span> <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>:
01404       <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str)
01405         <a class="code" href="string-list_8c.html#a5">stp_string_list_destroy</a>(desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str);
01406       desc-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = NULL;
01407       <span class="keywordflow">break</span>;
01408     <span class="keywordflow">default</span>:
01409       <span class="keywordflow">break</span>;
01410     }
01411 }
01412 
01413 <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *
<a name="l01414"></a><a class="code" href="group__vars.html#ga85">01414</a> <a class="code" href="group__vars.html#ga85">stp_parameter_find_in_settings</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
01415 {
01416   <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> param_list = <a class="code" href="group__vars.html#ga39">stp_get_parameter_list</a>(v);
01417   <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *param = <a class="code" href="group__vars.html#ga87">stp_parameter_find</a>(param_list, name);
01418   <a class="code" href="group__vars.html#ga89">stp_parameter_list_destroy</a>(param_list);
01419   <span class="keywordflow">return</span> param;
01420 }
01421 
01422 size_t
<a name="l01423"></a><a class="code" href="group__vars.html#ga86">01423</a> <a class="code" href="group__vars.html#ga86">stp_parameter_list_count</a>(<a class="code" href="group__vars.html#ga2">stp_const_parameter_list_t</a> list)
01424 {
01425   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *ilist = (<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list;
01426   <span class="keywordflow">return</span> <a class="code" href="print-list_8c.html#a11">stp_list_get_length</a>(ilist);
01427 }
01428 
01429 <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *
<a name="l01430"></a><a class="code" href="group__vars.html#ga87">01430</a> <a class="code" href="group__vars.html#ga87">stp_parameter_find</a>(<a class="code" href="group__vars.html#ga2">stp_const_parameter_list_t</a> list, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
01431 {
01432   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *ilist = (<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list;
01433   <span class="keyword">const</span> <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item = <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(ilist, name);
01434   <span class="keywordflow">if</span> (item)
01435     <span class="keywordflow">return</span> (<span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *) <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(item);
01436   <span class="keywordflow">else</span>
01437     <span class="keywordflow">return</span> NULL;
01438 }
01439 
01440 <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *
<a name="l01441"></a><a class="code" href="group__vars.html#ga88">01441</a> <a class="code" href="group__vars.html#ga88">stp_parameter_list_param</a>(<a class="code" href="group__vars.html#ga2">stp_const_parameter_list_t</a> list, size_t item)
01442 {
01443   <span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *ilist = (<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list;
01444   <span class="keywordflow">if</span> (item &gt;= <a class="code" href="print-list_8c.html#a11">stp_list_get_length</a>(ilist))
01445     <span class="keywordflow">return</span> NULL;
01446   <span class="keywordflow">else</span>
01447     <span class="keywordflow">return</span> (<span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *)
01448       <a class="code" href="print-list_8c.html#a33">stp_list_item_get_data</a>(<a class="code" href="print-list_8c.html#a14">stp_list_get_item_by_index</a>(ilist, item));
01449 }
01450 
01451 <span class="keywordtype">void</span>
<a name="l01452"></a><a class="code" href="group__vars.html#ga89">01452</a> <a class="code" href="group__vars.html#ga89">stp_parameter_list_destroy</a>(<a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> list)
01453 {
01454   <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>((<a class="code" href="structstp__list.html">stp_list_t</a> *)list);
01455 }
01456 
01457 <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a>
<a name="l01458"></a><a class="code" href="group__vars.html#ga90">01458</a> <a class="code" href="group__vars.html#ga90">stp_parameter_list_copy</a>(<a class="code" href="group__vars.html#ga2">stp_const_parameter_list_t</a> list)
01459 {
01460   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="group__vars.html#ga43">stp_parameter_list_create</a>();
01461   <span class="keywordtype">int</span> i;
01462   size_t count = <a class="code" href="group__vars.html#ga86">stp_parameter_list_count</a>(list);
01463   <span class="keywordflow">for</span> (i = 0; i &lt; count; i++)
01464     <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(ret, NULL, <a class="code" href="group__vars.html#ga88">stp_parameter_list_param</a>(list, i));
01465   <span class="keywordflow">return</span> (<a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a>) ret;
01466 }
01467 
01468 <span class="keywordtype">void</span>
<a name="l01469"></a><a class="code" href="group__vars.html#ga91">01469</a> <a class="code" href="group__vars.html#ga91">stp_parameter_list_append</a>(<a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> list,
01470                           <a class="code" href="group__vars.html#ga2">stp_const_parameter_list_t</a> append)
01471 {
01472   <span class="keywordtype">int</span> i;
01473   <a class="code" href="structstp__list.html">stp_list_t</a> *ilist = (<a class="code" href="structstp__list.html">stp_list_t</a> *)list;
01474   size_t count = <a class="code" href="group__vars.html#ga86">stp_parameter_list_count</a>(append);
01475   <span class="keywordflow">for</span> (i = 0; i &lt; count; i++)
01476     {
01477       <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *param = <a class="code" href="group__vars.html#ga88">stp_parameter_list_param</a>(append, i);
01478       <span class="keywordflow">if</span> (!<a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>(ilist, param-&gt;<a class="code" href="structstp__parameter__t.html#o0">name</a>))
01479         <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>(ilist, NULL, param);
01480     }
01481 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Aug 25 07:56:14 2004 for libgimpprint API Reference by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
