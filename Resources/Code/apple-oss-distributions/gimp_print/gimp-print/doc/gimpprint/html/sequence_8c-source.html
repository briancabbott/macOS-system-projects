<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libgimpprint API Reference: src/main/sequence.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>src/main/sequence.c</h1><a href="sequence_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * "$Id: sequence_8c-source.html,v 1.1.1.2 2004/12/22 23:49:12 jlovell Exp $"</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *   Sequence data type.  This type is designed to be derived from by</span>
00005 <span class="comment"> *   the curve and dither matrix types.</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> *   Copyright 2002-2003 Robert Krawitz (rlk@alum.mit.edu)</span>
00008 <span class="comment"> *   Copyright 2003      Roger Leigh (rleigh@debian.org)</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> *   This program is free software; you can redistribute it and/or modify it</span>
00011 <span class="comment"> *   under the terms of the GNU General Public License as published by the Free</span>
00012 <span class="comment"> *   Software Foundation; either version 2 of the License, or (at your option)</span>
00013 <span class="comment"> *   any later version.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *   This program is distributed in the hope that it will be useful, but</span>
00016 <span class="comment"> *   WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
00017 <span class="comment"> *   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
00018 <span class="comment"> *   for more details.</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
00021 <span class="comment"> *   along with this program; if not, write to the Free Software</span>
00022 <span class="comment"> *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00023 <span class="comment"> */</span>
00024 
00025 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span>
00027 <span class="preprocessor">#endif</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="gimp-print_8h.html">gimp-print/gimp-print.h</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="sequence_8h.html">gimp-print/sequence.h</a>&gt;</span>
00030 <span class="preprocessor">#include "<a class="code" href="gimp-print-internal_8h.html">gimp-print-internal.h</a>"</span>
00031 <span class="preprocessor">#include &lt;<a class="code" href="gimp-print-intl-internal_8h.html">gimp-print/gimp-print-intl-internal.h</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;math.h&gt;</span>
00033 <span class="preprocessor">#ifdef sun</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#include &lt;ieeefp.h&gt;</span>
00035 <span class="preprocessor">#endif</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
00037 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00038 <span class="preprocessor">#include &lt;limits.h&gt;</span>
00039 <span class="preprocessor">#include &lt;errno.h&gt;</span>
00040 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
00041 
<a name="l00042"></a><a class="code" href="structstp__sequence.html">00042</a> <span class="keyword">struct </span><a class="code" href="structstp__sequence.html">stp_sequence</a>
00043 {
<a name="l00044"></a><a class="code" href="structstp__sequence.html#o0">00044</a>   <span class="keywordtype">int</span> <a class="code" href="structstp__sequence.html#o0">recompute_range</a>; <span class="comment">/* Do we need to recompute the min and max? */</span>
<a name="l00045"></a><a class="code" href="structstp__sequence.html#o1">00045</a>   <span class="keywordtype">double</span> <a class="code" href="structstp__sequence.html#o1">blo</a>;          <span class="comment">/* Lower bound */</span>
<a name="l00046"></a><a class="code" href="structstp__sequence.html#o2">00046</a>   <span class="keywordtype">double</span> <a class="code" href="structstp__sequence.html#o2">bhi</a>;          <span class="comment">/* Upper bound */</span>
<a name="l00047"></a><a class="code" href="structstp__sequence.html#o3">00047</a>   <span class="keywordtype">double</span> <a class="code" href="structstp__sequence.html#o3">rlo</a>;          <span class="comment">/* Lower range limit */</span>
<a name="l00048"></a><a class="code" href="structstp__sequence.html#o4">00048</a>   <span class="keywordtype">double</span> <a class="code" href="structstp__sequence.html#o4">rhi</a>;          <span class="comment">/* Upper range limit */</span>
<a name="l00049"></a><a class="code" href="structstp__sequence.html#o5">00049</a>   size_t <a class="code" href="structstp__sequence.html#o5">size</a>;         <span class="comment">/* Number of points */</span>
<a name="l00050"></a><a class="code" href="structstp__sequence.html#o6">00050</a>   <span class="keywordtype">double</span> *data;        <span class="comment">/* Array of doubles */</span>
<a name="l00051"></a><a class="code" href="structstp__sequence.html#o7">00051</a>   <span class="keywordtype">float</span> *<a class="code" href="structstp__sequence.html#o7">float_data</a>;   <span class="comment">/* Data converted to other form */</span>
<a name="l00052"></a><a class="code" href="structstp__sequence.html#o8">00052</a>   <span class="keywordtype">long</span> *<a class="code" href="structstp__sequence.html#o8">long_data</a>;
<a name="l00053"></a><a class="code" href="structstp__sequence.html#o9">00053</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *<a class="code" href="structstp__sequence.html#o9">ulong_data</a>;
<a name="l00054"></a><a class="code" href="structstp__sequence.html#o10">00054</a>   <span class="keywordtype">int</span> *<a class="code" href="structstp__sequence.html#o10">int_data</a>;
<a name="l00055"></a><a class="code" href="structstp__sequence.html#o11">00055</a>   <span class="keywordtype">unsigned</span> *<a class="code" href="structstp__sequence.html#o11">uint_data</a>;
<a name="l00056"></a><a class="code" href="structstp__sequence.html#o12">00056</a>   <span class="keywordtype">short</span> *<a class="code" href="structstp__sequence.html#o12">short_data</a>;
<a name="l00057"></a><a class="code" href="structstp__sequence.html#o13">00057</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *<a class="code" href="structstp__sequence.html#o13">ushort_data</a>;
00058 };
00059 
00060 <span class="comment">/*</span>
00061 <span class="comment"> * We could do more sanity checks here if we want.</span>
00062 <span class="comment"> */</span>
00063 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00064"></a><a class="code" href="sequence_8c.html#a3">00064</a> <a class="code" href="sequence_8c.html#a3">check_sequence</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *v)
00065 {
00066   <span class="keywordflow">if</span> (v == NULL)
00067     {
00068       <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"Null stp_sequence_t! Please report this bug.\n"</span>);
00069       <a class="code" href="group__util.html#ga3">stp_abort</a>();
00070     }
00071 }
00072 
00073 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00074"></a><a class="code" href="sequence_8c.html#a4">00074</a> <a class="code" href="sequence_8c.html#a4">sequence_ctor</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00075 {
00076   sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a> = 0.0;
00077   sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a> = 1.0;
00078   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1;
00079   sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a> = 0;
00080   sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a> = NULL;
00081 }
00082 
00083 <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *
<a name="l00084"></a><a class="code" href="group__sequence.html#ga5">00084</a> <a class="code" href="group__sequence.html#ga1">stp_sequence_create</a>(<span class="keywordtype">void</span>)
00085 {
00086   <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *ret;
00087   ret = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a>));
00088   <a class="code" href="sequence_8c.html#a4">sequence_ctor</a>(ret);
00089   <span class="keywordflow">return</span> ret;
00090 }
00091 
00092 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00093"></a><a class="code" href="sequence_8c.html#a6">00093</a> <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00094 {
00095   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o7">float_data</a>);
00096   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o8">long_data</a>);
00097   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o9">ulong_data</a>);
00098   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o10">int_data</a>);
00099   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o11">uint_data</a>);
00100   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o12">short_data</a>);
00101   <a class="code" href="group__util.html#ga52">STP_SAFE_FREE</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o13">ushort_data</a>);
00102 }
00103 
00104 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00105"></a><a class="code" href="sequence_8c.html#a7">00105</a> <a class="code" href="sequence_8c.html#a7">sequence_dtor</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00106 {
00107   <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(sequence);
00108   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>)
00109     <a class="code" href="group__util.html#ga31">stp_free</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>);
00110   memset(sequence, 0, <span class="keyword">sizeof</span>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a>));
00111 }
00112 
00113 <span class="keywordtype">void</span>
<a name="l00114"></a><a class="code" href="group__sequence.html#ga8">00114</a> <a class="code" href="group__sequence.html#ga8">stp_sequence_destroy</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00115 {
00116   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00117   <a class="code" href="sequence_8c.html#a7">sequence_dtor</a>(sequence);
00118   <a class="code" href="group__util.html#ga31">stp_free</a>(sequence);
00119 }
00120 
00121 <span class="keywordtype">void</span>
<a name="l00122"></a><a class="code" href="group__sequence.html#ga9">00122</a> <a class="code" href="group__sequence.html#ga9">stp_sequence_copy</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *dest, <span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *source)
00123 {
00124   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(dest);
00125   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(source);
00126 
00127   dest-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = source-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a>;
00128   dest-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a> = source-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a>;
00129   dest-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a> = source-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a>;
00130   dest-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> = source-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a>;
00131   dest-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> = source-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a>;
00132   dest-&gt;<a class="code" href="structstp__sequence.html#o5">size</a> = source-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>;
00133   dest-&gt;<a class="code" href="structstp__sequence.html#o6">data</a> = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * source-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>);
00134   memcpy(dest-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>, source-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>, (<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * source-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>));
00135 }
00136 
00137 <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *
<a name="l00138"></a><a class="code" href="group__sequence.html#ga10">00138</a> <a class="code" href="group__sequence.html#ga10">stp_sequence_create_copy</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00139 {
00140   <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *ret;
00141   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00142   ret = <a class="code" href="group__sequence.html#ga1">stp_sequence_create</a>();
00143   <a class="code" href="group__sequence.html#ga9">stp_sequence_copy</a>(ret, sequence);
00144   <span class="keywordflow">return</span> ret;
00145 }
00146 
00147 <span class="keywordtype">int</span>
<a name="l00148"></a><a class="code" href="group__sequence.html#ga11">00148</a> <a class="code" href="group__sequence.html#ga11">stp_sequence_set_bounds</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, <span class="keywordtype">double</span> low, <span class="keywordtype">double</span> high)
00149 {
00150   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00151   <span class="keywordflow">if</span> (low &gt; high)
00152     <span class="keywordflow">return</span> 0;
00153   sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a> = low;
00154   sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a> = high;
00155   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1;
00156   <span class="keywordflow">return</span> 1;
00157 }
00158 
00159 <span class="keywordtype">void</span>
<a name="l00160"></a><a class="code" href="group__sequence.html#ga12">00160</a> <a class="code" href="group__sequence.html#ga12">stp_sequence_get_bounds</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence,
00161                         <span class="keywordtype">double</span> *low, <span class="keywordtype">double</span> *high)
00162 {
00163   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00164   *low = sequence-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a>;
00165   *high = sequence-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a>;
00166 }
00167 
00168 
00169 <span class="comment">/*</span>
00170 <span class="comment"> * Find the minimum and maximum points on the curve.</span>
00171 <span class="comment"> */</span>
00172 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00173"></a><a class="code" href="sequence_8c.html#a13">00173</a> <a class="code" href="sequence_8c.html#a13">scan_sequence_range</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00174 {
00175   <span class="keywordtype">int</span> i;
00176   sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a>;
00177   sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a>;
00178   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>)
00179     <span class="keywordflow">for</span> (i = 0; i &lt; sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>; i++)
00180       {
00181         <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[i] &lt; sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a>)
00182           sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[i];
00183         <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[i] &gt; sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a>)
00184           sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> = sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[i];
00185       }
00186   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 0; <span class="comment">/* Don't recompute unless the data changes */</span>
00187 }
00188 
00189 <span class="keywordtype">void</span>
<a name="l00190"></a><a class="code" href="group__sequence.html#ga14">00190</a> <a class="code" href="group__sequence.html#ga14">stp_sequence_get_range</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence,
00191                        <span class="keywordtype">double</span> *low, <span class="keywordtype">double</span> *high)
00192 {
00193   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a>) <span class="comment">/* Don't recompute the range if we don't</span>
00194 <span class="comment">                               need to. */</span>
00195     <a class="code" href="sequence_8c.html#a13">scan_sequence_range</a>((<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *) sequence);
00196   *low = sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a>;
00197   *high = sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a>;
00198 }
00199 
00200 
00201 <span class="keywordtype">int</span>
<a name="l00202"></a><a class="code" href="group__sequence.html#ga15">00202</a> <a class="code" href="group__sequence.html#ga15">stp_sequence_set_size</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t size)
00203 {
00204   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00205   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>) <span class="comment">/* Free old data */</span>
00206     {
00207       <a class="code" href="group__util.html#ga31">stp_free</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>);
00208       sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a> = NULL;
00209     }
00210   sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a> = size;
00211   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1; <span class="comment">/* Always recompute on change */</span>
00212   <span class="keywordflow">if</span> (size == 0)
00213     <span class="keywordflow">return</span> 1;
00214   <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(sequence);
00215   sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a> = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * size);
00216   <span class="keywordflow">return</span> 1;
00217 }
00218 
00219 
00220 size_t
<a name="l00221"></a><a class="code" href="group__sequence.html#ga16">00221</a> <a class="code" href="group__sequence.html#ga16">stp_sequence_get_size</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence)
00222 {
00223   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00224   <span class="keywordflow">return</span> sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>;
00225 }
00226 
00227 
00228 
00229 <span class="keywordtype">int</span>
<a name="l00230"></a><a class="code" href="group__sequence.html#ga17">00230</a> <a class="code" href="group__sequence.html#ga17">stp_sequence_set_data</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence,
00231                       size_t size, <span class="keyword">const</span> <span class="keywordtype">double</span> *data)
00232 {
00233   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00234   sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a> = size;
00235   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>)
00236     <a class="code" href="group__util.html#ga31">stp_free</a>(sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>);
00237   sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a> = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * size);
00238   memcpy(sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>, data, (<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * size));
00239   <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(sequence);
00240   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1;
00241   <span class="keywordflow">return</span> 1;
00242 }
00243 
00244 <span class="keywordtype">int</span>
<a name="l00245"></a><a class="code" href="group__sequence.html#ga18">00245</a> <a class="code" href="group__sequence.html#ga18">stp_sequence_set_subrange</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t where,
00246                           size_t size, <span class="keyword">const</span> <span class="keywordtype">double</span> *data)
00247 {
00248   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00249   <span class="keywordflow">if</span> (where + size &gt; sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>) <span class="comment">/* Exceeds data size */</span>
00250     <span class="keywordflow">return</span> 0;
00251   memcpy(sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>+where, data, (<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * size));
00252   <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(sequence);
00253   sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1;
00254   <span class="keywordflow">return</span> 1;
00255 }
00256 
00257 
00258 <span class="keywordtype">void</span>
<a name="l00259"></a><a class="code" href="group__sequence.html#ga19">00259</a> <a class="code" href="group__sequence.html#ga19">stp_sequence_get_data</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t *size,
00260                       <span class="keyword">const</span> <span class="keywordtype">double</span> **data)
00261 {
00262   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00263   *size = sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>;
00264   *data = sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>;
00265 }
00266 
00267 
00268 <span class="keywordtype">int</span>
<a name="l00269"></a><a class="code" href="group__sequence.html#ga20">00269</a> <a class="code" href="group__sequence.html#ga20">stp_sequence_set_point</a>(<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t where,
00270                        <span class="keywordtype">double</span> data)
00271 {
00272   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00273 
00274   <span class="keywordflow">if</span> (where &gt;= sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a> || ! finite(data) ||
00275       data &lt; sequence-&gt;<a class="code" href="structstp__sequence.html#o1">blo</a> || data &gt; sequence-&gt;<a class="code" href="structstp__sequence.html#o2">bhi</a>)
00276     <span class="keywordflow">return</span> 0;
00277 
00278   <span class="keywordflow">if</span> (sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> == 0 &amp;&amp; (data &lt; sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a> ||
00279                                          data &gt; sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> ||
00280                                          sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[where] == sequence-&gt;<a class="code" href="structstp__sequence.html#o4">rhi</a> ||
00281                                          sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[where] == sequence-&gt;<a class="code" href="structstp__sequence.html#o3">rlo</a>))
00282     sequence-&gt;<a class="code" href="structstp__sequence.html#o0">recompute_range</a> = 1;
00283 
00284   sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[where] = data;
00285   <a class="code" href="sequence_8c.html#a6">invalidate_auxilliary_data</a>(sequence);
00286   <span class="keywordflow">return</span> 1;
00287 }
00288 
00289 <span class="keywordtype">int</span>
<a name="l00290"></a><a class="code" href="group__sequence.html#ga21">00290</a> <a class="code" href="group__sequence.html#ga21">stp_sequence_get_point</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t where,
00291                        <span class="keywordtype">double</span> *data)
00292 {
00293   <a class="code" href="sequence_8c.html#a3">check_sequence</a>(sequence);
00294 
00295   <span class="keywordflow">if</span> (where &gt;= sequence-&gt;<a class="code" href="structstp__sequence.html#o5">size</a>)
00296     <span class="keywordflow">return</span> 0;
00297   *data = sequence-&gt;<a class="code" href="structstp__sequence.html#o6">data</a>[where];
00298   <span class="keywordflow">return</span> 1;
00299 }
00300 
00301 <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *
<a name="l00302"></a><a class="code" href="sequence_8c.html#a22">00302</a> <a class="code" href="sequence_8c.html#a22">stp_sequence_create_from_xmltree</a>(<a class="code" href="structstp__mxml__node__s.html">stp_mxml_node_t</a> *da)
00303 {
00304   <span class="keyword">const</span> <span class="keywordtype">char</span> *stmp;
00305   <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *ret = NULL;
00306   size_t point_count;
00307   <span class="keywordtype">double</span> low, high;
00308   <span class="keywordtype">int</span> i;
00309 
00310   ret = <a class="code" href="group__sequence.html#ga1">stp_sequence_create</a>();
00311 
00312   <span class="comment">/* Get curve point count */</span>
00313   stmp = <a class="code" href="mxml-attr_8c.html#a0">stp_mxmlElementGetAttr</a>(da, <span class="stringliteral">"count"</span>);
00314   <span class="keywordflow">if</span> (stmp)
00315     {
00316       point_count = (size_t) <a class="code" href="xml_8c.html#a22">stp_xmlstrtoul</a>(stmp);
00317       <span class="keywordflow">if</span> ((<a class="code" href="xml_8c.html#a21">stp_xmlstrtol</a>(stmp)) &lt; 0)
00318         {
00319           <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: \"count\" is less than zero\n"</span>);
00320           <span class="keywordflow">goto</span> error;
00321         }
00322     }
00323   <span class="keywordflow">else</span>
00324     {
00325       <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: \"count\" missing\n"</span>);
00326       <span class="keywordflow">goto</span> error;
00327     }
00328   <span class="comment">/* Get lower bound */</span>
00329   stmp = <a class="code" href="mxml-attr_8c.html#a0">stp_mxmlElementGetAttr</a>(da, <span class="stringliteral">"lower-bound"</span>);
00330   <span class="keywordflow">if</span> (stmp)
00331     {
00332       low = <a class="code" href="xml_8c.html#a23">stp_xmlstrtod</a>(stmp);
00333     }
00334   <span class="keywordflow">else</span>
00335     {
00336       <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: \"lower-bound\" missing\n"</span>);
00337       <span class="keywordflow">goto</span> error;
00338     }
00339   <span class="comment">/* Get upper bound */</span>
00340   stmp = <a class="code" href="mxml-attr_8c.html#a0">stp_mxmlElementGetAttr</a>(da, <span class="stringliteral">"upper-bound"</span>);
00341   <span class="keywordflow">if</span> (stmp)
00342     {
00343       high = <a class="code" href="xml_8c.html#a23">stp_xmlstrtod</a>(stmp);
00344     }
00345   <span class="keywordflow">else</span>
00346     {
00347       <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: \"upper-bound\" missing\n"</span>);
00348       <span class="keywordflow">goto</span> error;
00349     }
00350 
00351   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(<a class="code" href="group__util.html#ga47">STP_DBG_XML</a>,
00352                <span class="stringliteral">"stp_sequence_create_from_xmltree: stp_sequence_set_size: %d\n"</span>,
00353                point_count);
00354   <a class="code" href="group__sequence.html#ga15">stp_sequence_set_size</a>(ret, point_count);
00355   <a class="code" href="group__sequence.html#ga11">stp_sequence_set_bounds</a>(ret, low, high);
00356 
00357   <span class="comment">/* Now read in the data points */</span>
00358   <span class="keywordflow">if</span> (point_count)
00359     {
00360       <a class="code" href="structstp__mxml__node__s.html">stp_mxml_node_t</a> *child = da-&gt;<a class="code" href="structstp__mxml__node__s.html#o4">child</a>;
00361       i = 0;
00362       <span class="keywordflow">while</span> (child &amp;&amp; i &lt; point_count)
00363         {
00364           <span class="keywordflow">if</span> (child-&gt;<a class="code" href="structstp__mxml__node__s.html#o0">type</a> == <a class="code" href="mxml_8h.html#a43a24">STP_MXML_TEXT</a>)
00365             {
00366               <span class="keywordtype">char</span> *endptr;
00367               <span class="keywordtype">double</span> tmpval = strtod(child-&gt;<a class="code" href="structstp__mxml__node__s.html#o6">value</a>.<a class="code" href="unionstp__mxml__value__u.html#o4">text</a>.<a class="code" href="structstp__mxml__text__s.html#o1">string</a>, &amp;endptr);
00368               <span class="keywordflow">if</span> (endptr == child-&gt;<a class="code" href="structstp__mxml__node__s.html#o6">value</a>.<a class="code" href="unionstp__mxml__value__u.html#o4">text</a>.<a class="code" href="structstp__mxml__text__s.html#o1">string</a>)
00369                 {
00370                   <a class="code" href="group__util.html#ga16">stp_erprintf</a>
00371                     (<span class="stringliteral">"stp_sequence_create_from_xmltree: bad data %s\n"</span>,
00372                      child-&gt;<a class="code" href="structstp__mxml__node__s.html#o6">value</a>.<a class="code" href="unionstp__mxml__value__u.html#o4">text</a>.<a class="code" href="structstp__mxml__text__s.html#o1">string</a>);
00373                   <span class="keywordflow">goto</span> error;
00374                 }
00375               <span class="keywordflow">if</span> (! finite(tmpval)
00376                   || ( tmpval == 0 &amp;&amp; errno == ERANGE )
00377                   || tmpval &lt; low
00378                   || tmpval &gt; high)
00379                 {
00380                   <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: "</span>
00381                                <span class="stringliteral">"read aborted: datum out of bounds: "</span>
00382                                <span class="stringliteral">"%g (require %g &lt;= x &lt;= %g), n = %d\n"</span>,
00383                                tmpval, low, high, i);
00384                   <span class="keywordflow">goto</span> error;
00385                 }
00386               <span class="comment">/* Datum was valid, so now add to the sequence */</span>
00387               <a class="code" href="group__sequence.html#ga20">stp_sequence_set_point</a>(ret, i, tmpval);
00388               i++;
00389               child = child-&gt;<a class="code" href="structstp__mxml__node__s.html#o1">next</a>;
00390             }
00391         }
00392       <span class="keywordflow">if</span> (i &lt; point_count)
00393         {
00394           <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: "</span>
00395                        <span class="stringliteral">"read aborted: too little data "</span>
00396                        <span class="stringliteral">"(n=%d, needed %d)\n"</span>, i, point_count);
00397           <span class="keywordflow">goto</span> error;
00398         }
00399     }
00400 
00401   <span class="keywordflow">return</span> ret;
00402 
00403  error:
00404   <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"stp_sequence_create_from_xmltree: error during sequence read\n"</span>);
00405   <span class="keywordflow">if</span> (ret)
00406     <a class="code" href="group__sequence.html#ga8">stp_sequence_destroy</a>(ret);
00407   <span class="keywordflow">return</span> NULL;
00408 }
00409 
00410 <a class="code" href="structstp__mxml__node__s.html">stp_mxml_node_t</a> *
<a name="l00411"></a><a class="code" href="sequence_8c.html#a23">00411</a> <a class="code" href="sequence_8c.html#a23">stp_xmltree_create_from_sequence</a>(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *seq)   <span class="comment">/* The sequence */</span>
00412 {
00413   size_t pointcount;
00414   <span class="keywordtype">double</span> low;
00415   <span class="keywordtype">double</span> high;
00416 
00417   <span class="keywordtype">char</span> *count;
00418   <span class="keywordtype">char</span> *lower_bound;
00419   <span class="keywordtype">char</span> *upper_bound;
00420 
00421   <a class="code" href="structstp__mxml__node__s.html">stp_mxml_node_t</a> *seqnode;
00422 
00423   <span class="keywordtype">int</span> i;                 <span class="comment">/* loop counter */</span>
00424 
00425   pointcount = <a class="code" href="group__sequence.html#ga16">stp_sequence_get_size</a>(seq);
00426   <a class="code" href="group__sequence.html#ga12">stp_sequence_get_bounds</a>(seq, &amp;low, &amp;high);
00427 
00428   <span class="comment">/* should count be of greater precision? */</span>
00429   <a class="code" href="print-util_8c.html#a8">stp_asprintf</a>(&amp;count, <span class="stringliteral">"%lu"</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) pointcount);
00430   <a class="code" href="print-util_8c.html#a8">stp_asprintf</a>(&amp;lower_bound, <span class="stringliteral">"%g"</span>, low);
00431   <a class="code" href="print-util_8c.html#a8">stp_asprintf</a>(&amp;upper_bound, <span class="stringliteral">"%g"</span>, high);
00432 
00433   seqnode = <a class="code" href="mxml-node_8c.html#a3">stp_mxmlNewElement</a>(NULL, <span class="stringliteral">"sequence"</span>);
00434   (<span class="keywordtype">void</span>) <a class="code" href="mxml-attr_8c.html#a1">stp_mxmlElementSetAttr</a>(seqnode, <span class="stringliteral">"count"</span>, count);
00435   (<span class="keywordtype">void</span>) <a class="code" href="mxml-attr_8c.html#a1">stp_mxmlElementSetAttr</a>(seqnode, <span class="stringliteral">"lower-bound"</span>, lower_bound);
00436   (<span class="keywordtype">void</span>) <a class="code" href="mxml-attr_8c.html#a1">stp_mxmlElementSetAttr</a>(seqnode, <span class="stringliteral">"upper-bound"</span>, upper_bound);
00437 
00438   <a class="code" href="group__util.html#ga31">stp_free</a>(count);
00439   <a class="code" href="group__util.html#ga31">stp_free</a>(lower_bound);
00440   <a class="code" href="group__util.html#ga31">stp_free</a>(upper_bound);
00441 
00442   <span class="comment">/* Write the curve points into the node content */</span>
00443   <span class="keywordflow">if</span> (pointcount) <span class="comment">/* Is there any data to write? */</span>
00444     {
00445       <span class="keywordflow">for</span> (i = 0; i &lt; pointcount; i++)
00446         {
00447           <span class="keywordtype">double</span> dval;
00448           <span class="keywordtype">char</span> *sval;
00449 
00450           <span class="keywordflow">if</span> ((<a class="code" href="group__sequence.html#ga21">stp_sequence_get_point</a>(seq, i, &amp;dval)) != 1)
00451             <span class="keywordflow">goto</span> error;
00452 
00453           <a class="code" href="print-util_8c.html#a8">stp_asprintf</a>(&amp;sval, <span class="stringliteral">"%g"</span>, dval);
00454           <a class="code" href="mxml-node_8c.html#a7">stp_mxmlNewText</a>(seqnode, 1, sval);
00455           <a class="code" href="group__util.html#ga31">stp_free</a>(sval);
00456       }
00457     }
00458   <span class="keywordflow">return</span> seqnode;
00459 
00460  error:
00461   <span class="keywordflow">if</span> (seqnode)
00462     <a class="code" href="mxml-node_8c.html#a2">stp_mxmlDelete</a>(seqnode);
00463   <span class="keywordflow">return</span> NULL;
00464 }
00465 
00466 
00467 <span class="comment">/* "Overloaded" functions */</span>
00468 
<a name="l00469"></a><a class="code" href="sequence_8c.html#a0">00469</a> <span class="preprocessor">#define DEFINE_DATA_SETTER(t, name)                                          \</span>
00470 <span class="preprocessor">int                                                                          \</span>
00471 <span class="preprocessor">stp_sequence_set_##name##_data(stp_sequence_t *sequence,                     \</span>
00472 <span class="preprocessor">                               size_t count, const t *data)                  \</span>
00473 <span class="preprocessor">{                                                                            \</span>
00474 <span class="preprocessor">  int i;                                                                     \</span>
00475 <span class="preprocessor">  check_sequence(sequence);                                                          \</span>
00476 <span class="preprocessor">  if (count &lt; 2)                                                             \</span>
00477 <span class="preprocessor">    return 0;                                                                \</span>
00478 <span class="preprocessor">                                                                             \</span>
00479 <span class="preprocessor">  </span><span class="comment">/* Validate the data before we commit to it. */</span>                            \
00480   for (i = 0; i &lt; count; i++)                                                \
00481     if (! finite(data[i]) ||                                                 \
00482         data[i] &lt; sequence-&gt;blo ||                                           \
00483         data[i] &gt; sequence-&gt;bhi)                                             \
00484       return 0;                                                              \
00485   stp_sequence_set_size(sequence, count);                                    \
00486   for (i = 0; i &lt; count; i++)                                                \
00487     stp_sequence_set_point(sequence, i, (double) data[i]);                   \
00488   return 1;                                                                  \
00489 }
00490 
00491 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">float</span>, <span class="keywordtype">float</span>)
00492 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">long</span>, <span class="keywordtype">long</span>)
00493 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, ulong)
00494 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>)
00495 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, uint)
00496 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">short</span>, <span class="keywordtype">short</span>)
00497 <a class="code" href="curve_8c.html#a1">DEFINE_DATA_SETTER</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>, ushort)
00498 
00499 
<a name="l00500"></a><a class="code" href="sequence_8c.html#a1">00500</a> #define <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(t, lb, ub, name)                                \
00501 <span class="keyword">const</span> t *                                                                    \
00502 stp_sequence_get_##name##_data(<span class="keyword">const</span> <a class="code" href="structstp__sequence.html">stp_sequence_t</a> *sequence, size_t *count) \
00503 {                                                                            \
00504   <span class="keywordtype">int</span> i;                                                                     \
00505   <span class="keywordflow">if</span> (sequence-&gt;blo &lt; (<span class="keywordtype">double</span>) lb || sequence-&gt;bhi &gt; (<span class="keywordtype">double</span>) ub)            \
00506     <span class="keywordflow">return</span> NULL;                                                             \
00507   <span class="keywordflow">if</span> (!sequence-&gt;name##_data)                                                \
00508     {                                                                        \
00509       ((<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *)sequence)-&gt;name##_data = <a class="code" href="group__util.html#ga29">stp_zalloc</a>(<span class="keyword">sizeof</span>(t) * sequence-&gt;size);            \
00510       <span class="keywordflow">for</span> (i = 0; i &lt; sequence-&gt;size; i++)                                   \
00511         ((<a class="code" href="structstp__sequence.html">stp_sequence_t</a> *)sequence)-&gt;name##_data[i] = (t) sequence-&gt;data[i];                \
00512     }                                                                        \
00513   *count = sequence-&gt;size;                                                   \
00514   <span class="keywordflow">return</span> sequence-&gt;name##_data;                                              \
00515 }
00516 
00517 <span class="preprocessor">#ifndef HUGE_VALF </span><span class="comment">/* ISO constant, from &lt;math.h&gt; */</span>
<a name="l00518"></a><a class="code" href="sequence_8c.html#a2">00518</a> <span class="preprocessor">#define HUGE_VALF 3.402823466E+38F</span>
00519 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00520 <span class="preprocessor"></span>
00521 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">float</span>, -HUGE_VALF, HUGE_VALF, <span class="keywordtype">float</span>)
00522 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">long</span>, LONG_MIN, LONG_MAX, <span class="keywordtype">long</span>)
00523 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, 0, ULONG_MAX, ulong)
00524 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">int</span>, INT_MIN, INT_MAX, <span class="keywordtype">int</span>)
00525 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, 0, UINT_MAX, uint)
00526 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">short</span>, SHRT_MIN, SHRT_MAX, <span class="keywordtype">short</span>)
00527 <a class="code" href="curve_8c.html#a2">DEFINE_DATA_ACCESSOR</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>, 0, USHRT_MAX, ushort)
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Aug 25 07:56:15 2004 for libgimpprint API Reference by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
