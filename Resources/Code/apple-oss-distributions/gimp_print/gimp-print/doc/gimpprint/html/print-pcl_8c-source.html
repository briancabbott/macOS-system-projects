<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libgimpprint API Reference: src/main/print-pcl.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>src/main/print-pcl.c</h1><a href="print-pcl_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * "$Id: print-pcl_8c-source.html,v 1.1.1.2 2004/12/22 23:49:09 jlovell Exp $"</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *   Print plug-in HP PCL driver for the GIMP.</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *   Copyright 1997-2000 Michael Sweet (mike@easysw.com),</span>
00007 <span class="comment"> *      Robert Krawitz (rlk@alum.mit.edu) and</span>
00008 <span class="comment"> *      Dave Hill (dave@minnie.demon.co.uk)</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> *   This program is free software; you can redistribute it and/or modify it</span>
00011 <span class="comment"> *   under the terms of the GNU General Public License as published by the Free</span>
00012 <span class="comment"> *   Software Foundation; either version 2 of the License, or (at your option)</span>
00013 <span class="comment"> *   any later version.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *   This program is distributed in the hope that it will be useful, but</span>
00016 <span class="comment"> *   WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
00017 <span class="comment"> *   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
00018 <span class="comment"> *   for more details.</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
00021 <span class="comment"> *   along with this program; if not, write to the Free Software</span>
00022 <span class="comment"> *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00023 <span class="comment"> */</span>
00024 
00025 <span class="comment">/*</span>
00026 <span class="comment"> * This file must include only standard C header files.  The core code must</span>
00027 <span class="comment"> * compile on generic platforms that don't support glib, gimp, gtk, etc.</span>
00028 <span class="comment"> */</span>
00029 
00030 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span>
00032 <span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="gimp-print_8h.html">gimp-print/gimp-print.h</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="gimp-print-intl-internal_8h.html">gimp-print/gimp-print-intl-internal.h</a>&gt;</span>
00035 <span class="preprocessor">#include "<a class="code" href="gimp-print-internal_8h.html">gimp-print-internal.h</a>"</span>
00036 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00037 <span class="preprocessor">#include &lt;string.h&gt;</span>
00038 
00039 <span class="comment">/* #define DEBUG */</span>
00040 <span class="comment">/* #define PCL_DEBUG_DISABLE_COMPRESSION */</span>
00041 <span class="comment">/* #define PCL_DEBUG_DISABLE_BLANKLINE_REMOVAL */</span>
00042 
00043 <span class="comment">/*</span>
00044 <span class="comment"> * Local functions...</span>
00045 <span class="comment"> */</span>
00046 <span class="keyword">static</span> <span class="keywordtype">void</span>     <a class="code" href="print-pcl_8c.html#a124">pcl_mode0</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>);
00047 <span class="keyword">static</span> <span class="keywordtype">void</span>     <a class="code" href="print-pcl_8c.html#a125">pcl_mode2</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>);
<a name="l00048"></a><a class="code" href="print-pcl_8c.html#a0">00048</a> <span class="preprocessor">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
00049 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="structpcl__privdata__t.html">00050</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00051 <span class="keyword"></span>{
<a name="l00052"></a><a class="code" href="structpcl__privdata__t.html#o0">00052</a>   <span class="keywordtype">int</span> do_blank;
<a name="l00053"></a><a class="code" href="structpcl__privdata__t.html#o1">00053</a>   <span class="keywordtype">int</span> blank_lines;
<a name="l00054"></a><a class="code" href="structpcl__privdata__t.html#o2">00054</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *comp_buf;
00055   void (*writefunc)(<a class="code" href="structstp__vars.html">stp_vars_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>);   <span class="comment">/* PCL output function */</span>
<a name="l00056"></a><a class="code" href="structpcl__privdata__t.html#o4">00056</a>   <span class="keywordtype">int</span> do_cret;
<a name="l00057"></a><a class="code" href="structpcl__privdata__t.html#o5">00057</a>   <span class="keywordtype">int</span> do_cretb;
<a name="l00058"></a><a class="code" href="structpcl__privdata__t.html#o6">00058</a>   <span class="keywordtype">int</span> do_6color;
<a name="l00059"></a><a class="code" href="structpcl__privdata__t.html#o7">00059</a>   <span class="keywordtype">int</span> height;
<a name="l00060"></a><a class="code" href="structpcl__privdata__t.html#o8">00060</a>   <span class="keywordtype">int</span> duplex;
<a name="l00061"></a><a class="code" href="structpcl__privdata__t.html#o9">00061</a>   <span class="keywordtype">int</span> tumble;
<a name="l00062"></a><a class="code" href="structpcl__privdata__t.html#o10">00062</a>   <span class="keywordtype">int</span> use_crd;
00063 } <a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a>;
00064 
00065 <span class="comment">/*</span>
00066 <span class="comment"> * Generic define for a name/value set</span>
00067 <span class="comment"> */</span>
00068 
<a name="l00069"></a><a class="code" href="structpcl__t.html">00069</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00070 <span class="keyword"></span>{
<a name="l00071"></a><a class="code" href="structpcl__t.html#o0">00071</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>    *pcl_name;
<a name="l00072"></a><a class="code" href="structpcl__t.html#o1">00072</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>    *pcl_text;
<a name="l00073"></a><a class="code" href="structpcl__t.html#o2">00073</a>   <span class="keywordtype">int</span>           pcl_code;
<a name="l00074"></a><a class="code" href="structpcl__t.html#o3">00074</a>   <span class="keywordtype">int</span>           p0;
<a name="l00075"></a><a class="code" href="structpcl__t.html#o4">00075</a>   <span class="keywordtype">int</span>           p1;
00076 } <a class="code" href="structpcl__t.html">pcl_t</a>;
00077 
<a name="l00078"></a><a class="code" href="print-pcl_8c.html#a78">00078</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__dotsize.html">stp_dotsize_t</a> <a class="code" href="print-pcl_8c.html#a78">single_dotsize</a>[] =
00079 {
00080   { 0x1, 1.0 }
00081 };
00082 
<a name="l00083"></a><a class="code" href="print-pcl_8c.html#a79">00083</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__shade.html">stp_shade_t</a> <a class="code" href="print-pcl_8c.html#a79">photo_dither_shades</a>[] =
00084 {
00085   { 1.0000, 1, <a class="code" href="print-pcl_8c.html#a78">single_dotsize</a> },
00086   { 0.3333, 1, <a class="code" href="print-pcl_8c.html#a78">single_dotsize</a> },
00087 };
00088 
00089 <span class="comment">/*</span>
00090 <span class="comment"> * Media size to PCL media size code table</span>
00091 <span class="comment"> *</span>
00092 <span class="comment"> * Note, you can force the list of papersizes given in the GUI to be only those</span>
00093 <span class="comment"> * supported by defining PCL_NO_CUSTOM_PAPERSIZES</span>
00094 <span class="comment"> */</span>
00095 
00096 <span class="comment">/* #define PCL_NO_CUSTOM_PAPERSIZES */</span>
00097 
<a name="l00098"></a><a class="code" href="print-pcl_8c.html#a1">00098</a> <span class="preprocessor">#define PCL_PAPERSIZE_EXECUTIVE         1</span>
<a name="l00099"></a><a class="code" href="print-pcl_8c.html#a2">00099</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_LETTER            2</span>
<a name="l00100"></a><a class="code" href="print-pcl_8c.html#a3">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_LEGAL             3</span>
<a name="l00101"></a><a class="code" href="print-pcl_8c.html#a4">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_TABLOID           6       </span><span class="comment">/* "Ledger" */</span>
00102 <span class="preprocessor">#define PCL_PAPERSIZE_STATEMENT         15      </span><span class="comment">/* Called "Manual" in print-util */</span>
<a name="l00103"></a><a class="code" href="print-pcl_8c.html#a5">00103</a> <span class="preprocessor">#define PCL_PAPERSIZE_SUPER_B           16      </span><span class="comment">/* Called "13x19" in print-util */</span>
00104 <span class="preprocessor">#define PCL_PAPERSIZE_A5                25</span>
<a name="l00105"></a><a class="code" href="print-pcl_8c.html#a6">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_A4                26</span>
00106 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_A3                27</span>
<a name="l00107"></a><a class="code" href="print-pcl_8c.html#a7">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_JIS_B5            45</span>
<a name="l00108"></a><a class="code" href="print-pcl_8c.html#a8">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_JIS_B4            46</span>
<a name="l00109"></a><a class="code" href="print-pcl_8c.html#a9">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_HAGAKI_CARD       71</span>
<a name="l00110"></a><a class="code" href="print-pcl_8c.html#a10">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_OUFUKU_CARD       72</span>
<a name="l00111"></a><a class="code" href="print-pcl_8c.html#a11">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_A6_CARD           73</span>
<a name="l00112"></a><a class="code" href="print-pcl_8c.html#a12">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_4x6               74</span>
<a name="l00113"></a><a class="code" href="print-pcl_8c.html#a13">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_5x8               75</span>
<a name="l00114"></a><a class="code" href="print-pcl_8c.html#a14">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_3x5               78</span>
<a name="l00115"></a><a class="code" href="print-pcl_8c.html#a15">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_MONARCH_ENV       80</span>
<a name="l00116"></a><a class="code" href="print-pcl_8c.html#a16">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_COMMERCIAL10_ENV  81</span>
<a name="l00117"></a><a class="code" href="print-pcl_8c.html#a17">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_DL_ENV            90</span>
<a name="l00118"></a><a class="code" href="print-pcl_8c.html#a18">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_C5_ENV            91</span>
<a name="l00119"></a><a class="code" href="print-pcl_8c.html#a19">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_C6_ENV            92</span>
<a name="l00120"></a><a class="code" href="print-pcl_8c.html#a20">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_CUSTOM            101     </span><span class="comment">/* Custom size */</span>
<a name="l00121"></a><a class="code" href="print-pcl_8c.html#a21">00121</a> <span class="preprocessor">#define PCL_PAPERSIZE_INVITATION_ENV    109</span>
<a name="l00122"></a><a class="code" href="print-pcl_8c.html#a22">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_JAPANESE_3_ENV    110</span>
<a name="l00123"></a><a class="code" href="print-pcl_8c.html#a23">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_JAPANESE_4_ENV    111</span>
00124 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_KAKU_ENV          113</span>
<a name="l00125"></a><a class="code" href="print-pcl_8c.html#a24">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSIZE_HP_CARD           114     </span><span class="comment">/* HP Greeting card!?? */</span>
<a name="l00126"></a><a class="code" href="print-pcl_8c.html#a25">00126</a> 
<a name="l00127"></a><a class="code" href="print-pcl_8c.html#a26">00127</a> <span class="comment">/*</span>
<a name="l00128"></a><a class="code" href="print-pcl_8c.html#a27">00128</a> <span class="comment"> * This data comes from the HP documentation "Deskjet 1220C and 1120C</span>
<a name="l00129"></a><a class="code" href="print-pcl_8c.html#a28">00129</a> <span class="comment"> * PCL reference guide 2.0, Nov 1999". NOTE: The first name *must* match</span>
00130 <span class="comment"> * those in print-util.c for the lookups to work properly!</span>
00131 <span class="comment"> * The long names are not used so they have been removed, the ones in</span>
00132 <span class="comment"> * print-util.c are used in the interface.</span>
00133 <span class="comment"> */</span>
00134 
00135 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> <a class="code" href="print-pcl_8c.html#a80">pcl_media_sizes</a>[] =
00136 {
00137     { <span class="stringliteral">"Executive"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>},                 <span class="comment">/* US Exec (7.25 x 10.5 in) */</span>
00138     { <span class="stringliteral">"Letter"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>},                       <span class="comment">/* US Letter (8.5 x 11 in) */</span>
00139     { <span class="stringliteral">"Legal"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>},                         <span class="comment">/* US Legal (8.5 x 14 in) */</span>
<a name="l00140"></a><a class="code" href="print-pcl_8c.html#a80">00140</a>     { <span class="stringliteral">"Tabloid"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a4">PCL_PAPERSIZE_TABLOID</a>},                     <span class="comment">/* US Tabloid (11 x 17 in) */</span>
00141     { <span class="stringliteral">"Statement"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>},                 <span class="comment">/* US Manual/Statement (5.5 x 8.5 in) */</span>
00142     { <span class="stringliteral">"SuperB"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a6">PCL_PAPERSIZE_SUPER_B</a>},                      <span class="comment">/* US 13x19/Super B (13 x 19 in) */</span>
00143     { <span class="stringliteral">"A5"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>},                               <span class="comment">/* ISO/JIS A5 (148 x 210 mm) */</span>
00144     { <span class="stringliteral">"A4"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>},                               <span class="comment">/* ISO/JIS A4 (210 x 297 mm) */</span>
00145     { <span class="stringliteral">"A3"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a9">PCL_PAPERSIZE_A3</a>},                               <span class="comment">/* ISO/JIS A3 (297 x 420 mm) */</span>
00146     { <span class="stringliteral">"B5"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>},                           <span class="comment">/* JIS B5 (182 x 257 mm). */</span>
00147     { <span class="stringliteral">"B4"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a11">PCL_PAPERSIZE_JIS_B4</a>},                           <span class="comment">/* JIS B4 (257 x 364 mm). */</span>
00148     { <span class="stringliteral">"w283h420"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>},                <span class="comment">/* Japanese Hagaki Card (100 x 148 mm) */</span>
00149     { <span class="stringliteral">"w420h567"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a13">PCL_PAPERSIZE_OUFUKU_CARD</a>},                <span class="comment">/* Japanese Oufuku Card (148 x 200 mm) */</span>
00150     { <span class="stringliteral">"A6"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>},                          <span class="comment">/* ISO/JIS A6 card */</span>
00151     { <span class="stringliteral">"w288h432"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>},                        <span class="comment">/* US Index card (4 x 6 in) */</span>
00152     { <span class="stringliteral">"w360h576"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>},                        <span class="comment">/* US Index card (5 x 8 in) */</span>
00153     { <span class="stringliteral">"w216h360"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a17">PCL_PAPERSIZE_3x5</a>},                        <span class="comment">/* US Index card (3 x 5 in) */</span>
00154     { <span class="stringliteral">"Monarch"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a18">PCL_PAPERSIZE_MONARCH_ENV</a>},                 <span class="comment">/* Monarch Envelope (3 7/8 x 7 1/2 in) */</span>
00155     { <span class="stringliteral">"COM10"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>},              <span class="comment">/* US Commercial 10 Envelope (4.125 x 9.5 in) Portrait */</span>
00156     { <span class="stringliteral">"DL"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>},                           <span class="comment">/* DL envelope (110 x 220 mm) Portrait */</span>
00157     { <span class="stringliteral">"C5"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a21">PCL_PAPERSIZE_C5_ENV</a>},                           <span class="comment">/* C5 envelope (162 x 229 mm) */</span>
00158     { <span class="stringliteral">"C6"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>},                           <span class="comment">/* C6 envelope (114 x 162 mm) */</span>
00159     { <span class="stringliteral">"w315h414"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a24">PCL_PAPERSIZE_INVITATION_ENV</a>},             <span class="comment">/* US A2 Invitation envelope (4 3/8 x 5 3/4 in) */</span>
00160     { <span class="stringliteral">"w340h666"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a25">PCL_PAPERSIZE_JAPANESE_3_ENV</a>},             <span class="comment">/* Japanese Long Envelope #3 (120 x 235 mm) */</span>
00161     { <span class="stringliteral">"w255h581"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a26">PCL_PAPERSIZE_JAPANESE_4_ENV</a>},             <span class="comment">/* Japanese Long Envelope #4 (90 x 205 mm) */</span>
00162     { <span class="stringliteral">"w680h941"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a27">PCL_PAPERSIZE_KAKU_ENV</a>},                   <span class="comment">/* Japanese Kaku Envelope (240 x 332.1 mm) */</span>
00163 <span class="comment">/**** MRS: this size not supported by print-util funcs! ****/</span>
00164     { <span class="stringliteral">"w612h792"</span>, <span class="stringliteral">"notused"</span>, <a class="code" href="print-pcl_8c.html#a28">PCL_PAPERSIZE_HP_CARD</a>},                    <span class="comment">/* Hp greeting card */</span>
00165 };
00166 <span class="preprocessor">#define NUM_PRINTER_PAPER_SIZES (sizeof(pcl_media_sizes) / sizeof(pcl_t))</span>
00167 <span class="preprocessor"></span>
00168 <span class="comment">/*</span>
00169 <span class="comment"> * Media type to code table</span>
00170 <span class="comment"> */</span>
<a name="l00171"></a><a class="code" href="print-pcl_8c.html#a29">00171</a> 
00172 <span class="preprocessor">#define PCL_PAPERTYPE_PLAIN     0</span>
00173 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERTYPE_BOND      1</span>
00174 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERTYPE_PREMIUM   2</span>
00175 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERTYPE_GLOSSY    3       </span><span class="comment">/* or photo */</span>
00176 <span class="preprocessor">#define PCL_PAPERTYPE_TRANS     4</span>
<a name="l00177"></a><a class="code" href="print-pcl_8c.html#a30">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERTYPE_QPHOTO    5       </span><span class="comment">/* Quick dry photo (2000 only) */</span>
<a name="l00178"></a><a class="code" href="print-pcl_8c.html#a31">00178</a> <span class="preprocessor">#define PCL_PAPERTYPE_QTRANS    6       </span><span class="comment">/* Quick dry transparency (2000 only) */</span>
<a name="l00179"></a><a class="code" href="print-pcl_8c.html#a32">00179</a> 
<a name="l00180"></a><a class="code" href="print-pcl_8c.html#a33">00180</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> <a class="code" href="print-pcl_8c.html#a81">pcl_media_types</a>[] =
00181 {
<a name="l00182"></a><a class="code" href="print-pcl_8c.html#a34">00182</a>     { <span class="stringliteral">"Plain"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Plain"</span>), <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>},
<a name="l00183"></a><a class="code" href="print-pcl_8c.html#a35">00183</a>     { <span class="stringliteral">"Bond"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Bond"</span>), <a class="code" href="print-pcl_8c.html#a31">PCL_PAPERTYPE_BOND</a>},
00184     { <span class="stringliteral">"Premium"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Premium"</span>), <a class="code" href="print-pcl_8c.html#a32">PCL_PAPERTYPE_PREMIUM</a>},
<a name="l00185"></a><a class="code" href="print-pcl_8c.html#a36">00185</a>     { <span class="stringliteral">"Glossy"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Glossy Photo"</span>), <a class="code" href="print-pcl_8c.html#a33">PCL_PAPERTYPE_GLOSSY</a>},
00186     { <span class="stringliteral">"Transparency"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Transparency"</span>), <a class="code" href="print-pcl_8c.html#a34">PCL_PAPERTYPE_TRANS</a>},
00187     { <span class="stringliteral">"GlossyQD"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Quick-dry Photo"</span>), <a class="code" href="print-pcl_8c.html#a35">PCL_PAPERTYPE_QPHOTO</a>},
<a name="l00188"></a><a class="code" href="print-pcl_8c.html#a81">00188</a>     { <span class="stringliteral">"TransparencyQD"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Quick-dry Transparency"</span>), <a class="code" href="print-pcl_8c.html#a36">PCL_PAPERTYPE_QTRANS</a>},
00189 };
00190 <span class="preprocessor">#define NUM_PRINTER_PAPER_TYPES (sizeof(pcl_media_types) / sizeof(pcl_t))</span>
00191 <span class="preprocessor"></span>
00192 <span class="comment">/*</span>
00193 <span class="comment"> * Media feed to code table. There are different names for the same code,</span>
00194 <span class="comment"> * so we encode them by adding "lumps" of "PAPERSOURCE_MOD".</span>
00195 <span class="comment"> * This is removed later to get back to the main codes.</span>
00196 <span class="comment"> */</span>
00197 
<a name="l00198"></a><a class="code" href="print-pcl_8c.html#a37">00198</a> <span class="preprocessor">#define PAPERSOURCE_MOD                 16</span>
00199 <span class="preprocessor"></span>
00200 <span class="preprocessor">#define PCL_PAPERSOURCE_STANDARD        0       </span><span class="comment">/* Don't output code */</span>
00201 <span class="preprocessor">#define PCL_PAPERSOURCE_MANUAL          2</span>
00202 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSOURCE_ENVELOPE        3       </span><span class="comment">/* Not used */</span>
00203 
00204 <span class="comment">/* LaserJet types */</span>
00205 <span class="preprocessor">#define PCL_PAPERSOURCE_LJ_TRAY2        1</span>
<a name="l00206"></a><a class="code" href="print-pcl_8c.html#a38">00206</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSOURCE_LJ_TRAY3        4</span>
00207 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSOURCE_LJ_TRAY4        5</span>
<a name="l00208"></a><a class="code" href="print-pcl_8c.html#a39">00208</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSOURCE_LJ_TRAY1        8</span>
00209 <span class="preprocessor"></span>
<a name="l00210"></a><a class="code" href="print-pcl_8c.html#a40">00210</a> <span class="comment">/* Deskjet 340 types */</span>
<a name="l00211"></a><a class="code" href="print-pcl_8c.html#a41">00211</a> <span class="preprocessor">#define PCL_PAPERSOURCE_340_PCSF        1 + PAPERSOURCE_MOD</span>
00212 <span class="preprocessor"></span>                                                <span class="comment">/* Portable sheet feeder for 340 */</span>
00213 <span class="preprocessor">#define PCL_PAPERSOURCE_340_DCSF        4 + PAPERSOURCE_MOD</span>
00214 <span class="preprocessor"></span>                                                <span class="comment">/* Desktop sheet feeder for 340 */</span>
<a name="l00215"></a><a class="code" href="print-pcl_8c.html#a42">00215</a> 
<a name="l00216"></a><a class="code" href="print-pcl_8c.html#a43">00216</a> <span class="comment">/* Other Deskjet types */</span>
<a name="l00217"></a><a class="code" href="print-pcl_8c.html#a44">00217</a> <span class="preprocessor">#define PCL_PAPERSOURCE_DJ_TRAY         1 + PAPERSOURCE_MOD + PAPERSOURCE_MOD</span>
<a name="l00218"></a><a class="code" href="print-pcl_8c.html#a45">00218</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PAPERSOURCE_DJ_TRAY2        4 + PAPERSOURCE_MOD + PAPERSOURCE_MOD</span>
00219 <span class="preprocessor"></span>                                                <span class="comment">/* Tray 2 for 2500 */</span>
00220 <span class="preprocessor">#define PCL_PAPERSOURCE_DJ_OPTIONAL     5 + PAPERSOURCE_MOD + PAPERSOURCE_MOD</span>
<a name="l00221"></a><a class="code" href="print-pcl_8c.html#a46">00221</a> <span class="preprocessor"></span>                                                <span class="comment">/* Optional source for 2500 */</span>
00222 <span class="preprocessor">#define PCL_PAPERSOURCE_DJ_AUTO         7 + PAPERSOURCE_MOD + PAPERSOURCE_MOD</span>
<a name="l00223"></a><a class="code" href="print-pcl_8c.html#a47">00223</a> <span class="preprocessor"></span>                                                <span class="comment">/* Autoselect for 2500 */</span>
00224 
00225 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> <a class="code" href="print-pcl_8c.html#a82">pcl_media_sources</a>[] =
00226 {
<a name="l00227"></a><a class="code" href="print-pcl_8c.html#a48">00227</a>     { <span class="stringliteral">"Standard"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Standard"</span>), <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>},
<a name="l00228"></a><a class="code" href="print-pcl_8c.html#a49">00228</a>     { <span class="stringliteral">"Manual"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Manual"</span>), <a class="code" href="print-pcl_8c.html#a40">PCL_PAPERSOURCE_MANUAL</a>},
00229 <span class="comment">/*  {"Envelope", PCL_PAPERSOURCE_ENVELOPE}, */</span>
<a name="l00230"></a><a class="code" href="print-pcl_8c.html#a50">00230</a>     { <span class="stringliteral">"MultiPurpose"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray 1"</span>), <a class="code" href="print-pcl_8c.html#a45">PCL_PAPERSOURCE_LJ_TRAY1</a>},
00231     { <span class="stringliteral">"Upper"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray 2"</span>), <a class="code" href="print-pcl_8c.html#a42">PCL_PAPERSOURCE_LJ_TRAY2</a>},
<a name="l00232"></a><a class="code" href="print-pcl_8c.html#a51">00232</a>     { <span class="stringliteral">"Lower"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray 3"</span>), <a class="code" href="print-pcl_8c.html#a43">PCL_PAPERSOURCE_LJ_TRAY3</a>},
00233     { <span class="stringliteral">"LargeCapacity"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray 4"</span>), <a class="code" href="print-pcl_8c.html#a44">PCL_PAPERSOURCE_LJ_TRAY4</a>},
00234     { <span class="stringliteral">"Portable"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Portable Sheet Feeder"</span>), <a class="code" href="print-pcl_8c.html#a46">PCL_PAPERSOURCE_340_PCSF</a>},
<a name="l00235"></a><a class="code" href="print-pcl_8c.html#a82">00235</a>     { <span class="stringliteral">"Desktop"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Desktop Sheet Feeder"</span>), <a class="code" href="print-pcl_8c.html#a47">PCL_PAPERSOURCE_340_DCSF</a>},
00236     { <span class="stringliteral">"Tray"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray"</span>), <a class="code" href="print-pcl_8c.html#a48">PCL_PAPERSOURCE_DJ_TRAY</a>},
00237     { <span class="stringliteral">"Tray2"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Tray 2"</span>), <a class="code" href="print-pcl_8c.html#a49">PCL_PAPERSOURCE_DJ_TRAY2</a>},
00238     { <span class="stringliteral">"Optional"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Optional Source"</span>), <a class="code" href="print-pcl_8c.html#a50">PCL_PAPERSOURCE_DJ_OPTIONAL</a>},
00239     { <span class="stringliteral">"Auto"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Autoselect"</span>), <a class="code" href="print-pcl_8c.html#a51">PCL_PAPERSOURCE_DJ_AUTO</a>},
00240 };
00241 <span class="preprocessor">#define NUM_PRINTER_PAPER_SOURCES       (sizeof(pcl_media_sources) / sizeof(pcl_t))</span>
00242 <span class="preprocessor"></span>
00243 <span class="preprocessor">#define PCL_RES_150_150         1</span>
00244 <span class="preprocessor"></span><span class="preprocessor">#define PCL_RES_300_300         2</span>
00245 <span class="preprocessor"></span><span class="preprocessor">#define PCL_RES_600_300         4       </span><span class="comment">/* DJ 600 series */</span>
00246 <span class="preprocessor">#define PCL_RES_600_600_MONO    8       </span><span class="comment">/* DJ 600/800/1100/2000 b/w only */</span>
00247 <span class="preprocessor">#define PCL_RES_600_600         16      </span><span class="comment">/* DJ 9xx/1220C/PhotoSmart */</span>
00248 <span class="preprocessor">#define PCL_RES_1200_600        32      </span><span class="comment">/* DJ 9xx/1220C/PhotoSmart */</span>
00249 <span class="preprocessor">#define PCL_RES_2400_600        64      </span><span class="comment">/* DJ 9xx/1220C/PhotoSmart */</span>
00250 
<a name="l00251"></a><a class="code" href="print-pcl_8c.html#a52">00251</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[] =
00252 {
<a name="l00253"></a><a class="code" href="print-pcl_8c.html#a53">00253</a>     { <span class="stringliteral">"150dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"150x150 DPI"</span>), <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a>, 150, 150},
<a name="l00254"></a><a class="code" href="print-pcl_8c.html#a54">00254</a>     { <span class="stringliteral">"300dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"300x300 DPI"</span>), <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>, 300, 300},
<a name="l00255"></a><a class="code" href="print-pcl_8c.html#a55">00255</a>     { <span class="stringliteral">"600x300dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"600x300 DPI"</span>), <a class="code" href="print-pcl_8c.html#a55">PCL_RES_600_300</a>, 600, 300},
00256     { <span class="stringliteral">"600mono"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"600x600 DPI monochrome"</span>), <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>, 600, 600},
<a name="l00257"></a><a class="code" href="print-pcl_8c.html#a56">00257</a>     { <span class="stringliteral">"600dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"600x600 DPI"</span>), <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>, 600, 600},
00258     { <span class="stringliteral">"1200x600dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"1200x600 DPI"</span>), <a class="code" href="print-pcl_8c.html#a58">PCL_RES_1200_600</a>, 1200, 600},
<a name="l00259"></a><a class="code" href="print-pcl_8c.html#a57">00259</a>     { <span class="stringliteral">"2400x600dpi"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"2400x600 DPI"</span>), <a class="code" href="print-pcl_8c.html#a59">PCL_RES_2400_600</a>, 2400, 600},
00260 };
<a name="l00261"></a><a class="code" href="print-pcl_8c.html#a58">00261</a> <span class="preprocessor">#define NUM_RESOLUTIONS         (sizeof(pcl_resolutions) / sizeof (pcl_t))</span>
00262 <span class="preprocessor"></span>
<a name="l00263"></a><a class="code" href="print-pcl_8c.html#a59">00263</a> <span class="keyword">static</span> <span class="keywordtype">void</span>
00264 <a class="code" href="print-pcl_8c.html#a126">pcl_describe_resolution</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keywordtype">int</span> *x, <span class="keywordtype">int</span> *y)
00265 {
<a name="l00266"></a><a class="code" href="print-pcl_8c.html#a83">00266</a>   <span class="keywordtype">int</span> i;
00267   <span class="keyword">const</span> <span class="keywordtype">char</span> *resolution = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"Resolution"</span>);
00268   <span class="keywordflow">if</span> (resolution)
00269     {
00270       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a60">NUM_RESOLUTIONS</a>; i++)
00271         {
00272           <span class="keywordflow">if</span> (!strcmp(resolution, pcl_resolutions[i].pcl_name))
00273             {
00274               *x = <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o3">p0</a>;
00275               *y = <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o4">p1</a>;
<a name="l00276"></a><a class="code" href="print-pcl_8c.html#a60">00276</a>               <span class="keywordflow">return</span>;
00277             }
00278         }
<a name="l00279"></a><a class="code" href="print-pcl_8c.html#a126">00279</a>     }
00280   *x = -1;
00281   *y = -1;
00282 }
00283 
00284 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
00285   <span class="keywordtype">int</span> top_margin;
00286   <span class="keywordtype">int</span> bottom_margin;
00287   <span class="keywordtype">int</span> left_margin;
00288   <span class="keywordtype">int</span> right_margin;
00289 } <a class="code" href="structmargins__t.html">margins_t</a>;
00290 
00291 <span class="comment">/*</span>
00292 <span class="comment"> * Printer capability data</span>
00293 <span class="comment"> */</span>
00294 
00295 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
00296   <span class="keywordtype">int</span> model;
00297   <span class="keywordtype">int</span> custom_max_width;
00298   <span class="keywordtype">int</span> custom_max_height;
<a name="l00299"></a><a class="code" href="structmargins__t.html">00299</a>   <span class="keywordtype">int</span> custom_min_width;
<a name="l00300"></a><a class="code" href="structmargins__t.html#o0">00300</a>   <span class="keywordtype">int</span> custom_min_height;
<a name="l00301"></a><a class="code" href="structmargins__t.html#o1">00301</a>   <span class="keywordtype">int</span> resolutions;
<a name="l00302"></a><a class="code" href="structmargins__t.html#o2">00302</a>   <a class="code" href="structmargins__t.html">margins_t</a> normal_margins;
<a name="l00303"></a><a class="code" href="structmargins__t.html#o3">00303</a>   <a class="code" href="structmargins__t.html">margins_t</a> a4_margins;
00304   <span class="keywordtype">int</span> color_type;               <span class="comment">/* 2 print head or one, 2 level or 4 */</span>
00305   <span class="keywordtype">int</span> stp_printer_type;         <span class="comment">/* Deskjet/Laserjet and quirks */</span>
00306 <span class="comment">/* The paper size, paper type and paper source codes cannot be combined */</span>
00307   <span class="keyword">const</span> <span class="keywordtype">short</span> *paper_sizes;     <span class="comment">/* Paper sizes */</span>
00308   <span class="keyword">const</span> <span class="keywordtype">short</span> *paper_types;     <span class="comment">/* Paper types */</span>
00309   <span class="keyword">const</span> <span class="keywordtype">short</span> *paper_sources;   <span class="comment">/* Paper sources */</span>
<a name="l00310"></a><a class="code" href="structpcl__cap__t.html">00310</a>   } <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a>;
<a name="l00311"></a><a class="code" href="structpcl__cap__t.html#o0">00311</a> 
<a name="l00312"></a><a class="code" href="structpcl__cap__t.html#o1">00312</a> <span class="preprocessor">#define PCL_COLOR_NONE          0</span>
<a name="l00313"></a><a class="code" href="structpcl__cap__t.html#o2">00313</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_COLOR_CMY           1       </span><span class="comment">/* One print head */</span>
<a name="l00314"></a><a class="code" href="structpcl__cap__t.html#o3">00314</a> <span class="preprocessor">#define PCL_COLOR_CMYK          2       </span><span class="comment">/* Two print heads */</span>
<a name="l00315"></a><a class="code" href="structpcl__cap__t.html#o4">00315</a> <span class="preprocessor">#define PCL_COLOR_CMYK4         4       </span><span class="comment">/* CRet printing */</span>
<a name="l00316"></a><a class="code" href="structpcl__cap__t.html#o5">00316</a> <span class="preprocessor">#define PCL_COLOR_CMYKcm        8       </span><span class="comment">/* CMY + Photo Cart */</span>
<a name="l00317"></a><a class="code" href="structpcl__cap__t.html#o6">00317</a> <span class="preprocessor">#define PCL_COLOR_CMYK4b        16      </span><span class="comment">/* CRet for HP840c */</span>
<a name="l00318"></a><a class="code" href="structpcl__cap__t.html#o7">00318</a> 
<a name="l00319"></a><a class="code" href="structpcl__cap__t.html#o8">00319</a> <span class="preprocessor">#define PCL_PRINTER_LJ          1</span>
<a name="l00320"></a><a class="code" href="structpcl__cap__t.html#o9">00320</a> <span class="preprocessor"></span><span class="preprocessor">#define PCL_PRINTER_DJ          2</span>
00321 <span class="preprocessor"></span><span class="preprocessor">#define PCL_PRINTER_NEW_ERG     4       </span><span class="comment">/* use "\033*rC" to end raster graphics,</span>
<a name="l00322"></a><a class="code" href="structpcl__cap__t.html#o10">00322</a> <span class="comment">                                           instead of "\033*rB" */</span>
<a name="l00323"></a><a class="code" href="structpcl__cap__t.html#o11">00323</a> <span class="preprocessor">#define PCL_PRINTER_TIFF        8       </span><span class="comment">/* Use TIFF compression */</span>
<a name="l00324"></a><a class="code" href="structpcl__cap__t.html#o12">00324</a> <span class="preprocessor">#define PCL_PRINTER_MEDIATYPE   16      </span><span class="comment">/* Use media type &amp; print quality */</span>
00325 <span class="preprocessor">#define PCL_PRINTER_CUSTOM_SIZE 32      </span><span class="comment">/* Custom sizes supported */</span>
00326 <span class="preprocessor">#define PCL_PRINTER_BLANKLINE   64      </span><span class="comment">/* Blank line removal supported */</span>
<a name="l00327"></a><a class="code" href="print-pcl_8c.html#a61">00327</a> <span class="preprocessor">#define PCL_PRINTER_DUPLEX      128     </span><span class="comment">/* Printer can have duplexer */</span>
<a name="l00328"></a><a class="code" href="print-pcl_8c.html#a62">00328</a> 
00329 <span class="comment">/*</span>
<a name="l00330"></a><a class="code" href="print-pcl_8c.html#a63">00330</a> <span class="comment"> * FIXME - the 520 shouldn't be lumped in with the 500 as it supports</span>
00331 <span class="comment"> * more paper sizes.</span>
<a name="l00332"></a><a class="code" href="print-pcl_8c.html#a64">00332</a> <span class="comment"> *</span>
00333 <span class="comment"> * The following models use depletion, raster quality and shingling:-</span>
<a name="l00334"></a><a class="code" href="print-pcl_8c.html#a65">00334</a> <span class="comment"> * 500, 500c, 510, 520, 550c, 560c.</span>
00335 <span class="comment"> * The rest use Media Type and Print Quality.</span>
<a name="l00336"></a><a class="code" href="print-pcl_8c.html#a66">00336</a> <span class="comment"> *</span>
00337 <span class="comment"> * This data comes from the HP documentation "Deskjet 1220C and 1120C</span>
00338 <span class="comment"> * PCL reference guide 2.0, Nov 1999".</span>
<a name="l00339"></a><a class="code" href="print-pcl_8c.html#a67">00339</a> <span class="comment"> */</span>
<a name="l00340"></a><a class="code" href="print-pcl_8c.html#a68">00340</a> 
<a name="l00341"></a><a class="code" href="print-pcl_8c.html#a69">00341</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a84">emptylist</a>[] =
00342 {
00343   -1
<a name="l00344"></a><a class="code" href="print-pcl_8c.html#a70">00344</a> };
00345 
<a name="l00346"></a><a class="code" href="print-pcl_8c.html#a71">00346</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a85">standard_papersizes</a>[] =
00347 {
<a name="l00348"></a><a class="code" href="print-pcl_8c.html#a72">00348</a>   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00349   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
<a name="l00350"></a><a class="code" href="print-pcl_8c.html#a73">00350</a>   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00351   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
<a name="l00352"></a><a class="code" href="print-pcl_8c.html#a74">00352</a>   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00353   -1,
00354 };
00355 
00356 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>[] =
00357 {
00358   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00359   -1
00360 };
00361 
00362 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a87">dj340_papersizes</a>[] =
00363 {
00364   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00365   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00366   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
<a name="l00367"></a><a class="code" href="print-pcl_8c.html#a84">00367</a>   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00368   -1,
00369 };
00370 
00371 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a88">dj400_papersizes</a>[] =
<a name="l00372"></a><a class="code" href="print-pcl_8c.html#a85">00372</a> {
00373   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00374   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00375   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00376   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00377   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
00378   -1,
00379 };
00380 
00381 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a89">dj500_papersizes</a>[] =
<a name="l00382"></a><a class="code" href="print-pcl_8c.html#a86">00382</a> {
00383 <span class="comment">/*    PCL_PAPERSIZE_EXECUTIVE, The 500 doesn't support this, the 520 does */</span>
00384   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00385   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00386   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00387   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
<a name="l00388"></a><a class="code" href="print-pcl_8c.html#a87">00388</a> <span class="comment">/*    PCL_PAPERSIZE_DL_ENV,    The 500 doesn't support this, the 520 does */</span>
00389   -1,
00390 };
00391 
00392 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a90">dj540_papersizes</a>[] =
00393 {
00394   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00395   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00396   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
<a name="l00397"></a><a class="code" href="print-pcl_8c.html#a88">00397</a>   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00398   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00399   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
00400   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
00401   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00402   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00403   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00404   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00405   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00406   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
<a name="l00407"></a><a class="code" href="print-pcl_8c.html#a89">00407</a>   -1,
00408 };
00409 
00410 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>[] =
00411 {
00412   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00413   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00414   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00415   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00416   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00417   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
<a name="l00418"></a><a class="code" href="print-pcl_8c.html#a90">00418</a>   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00419   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00420   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00421   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00422   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00423   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00424   <a class="code" href="print-pcl_8c.html#a24">PCL_PAPERSIZE_INVITATION_ENV</a>,
00425   -1,
00426 };
00427 
00428 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a92">dj1220_papersizes</a>[] =
00429 {
00430   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00431   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00432   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00433   <a class="code" href="print-pcl_8c.html#a4">PCL_PAPERSIZE_TABLOID</a>,
00434   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
00435   <a class="code" href="print-pcl_8c.html#a6">PCL_PAPERSIZE_SUPER_B</a>,
<a name="l00436"></a><a class="code" href="print-pcl_8c.html#a91">00436</a>   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00437   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00438   <a class="code" href="print-pcl_8c.html#a9">PCL_PAPERSIZE_A3</a>,
00439   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
00440   <a class="code" href="print-pcl_8c.html#a11">PCL_PAPERSIZE_JIS_B4</a>,
00441   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
00442   <a class="code" href="print-pcl_8c.html#a13">PCL_PAPERSIZE_OUFUKU_CARD</a>,
00443   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00444   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00445   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00446   <a class="code" href="print-pcl_8c.html#a17">PCL_PAPERSIZE_3x5</a>,
00447   <a class="code" href="print-pcl_8c.html#a28">PCL_PAPERSIZE_HP_CARD</a>,
00448   <a class="code" href="print-pcl_8c.html#a18">PCL_PAPERSIZE_MONARCH_ENV</a>,
00449   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00450   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00451   <a class="code" href="print-pcl_8c.html#a21">PCL_PAPERSIZE_C5_ENV</a>,
00452   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00453   <a class="code" href="print-pcl_8c.html#a24">PCL_PAPERSIZE_INVITATION_ENV</a>,
<a name="l00454"></a><a class="code" href="print-pcl_8c.html#a92">00454</a>   <a class="code" href="print-pcl_8c.html#a25">PCL_PAPERSIZE_JAPANESE_3_ENV</a>,
00455   <a class="code" href="print-pcl_8c.html#a26">PCL_PAPERSIZE_JAPANESE_4_ENV</a>,
00456   <a class="code" href="print-pcl_8c.html#a27">PCL_PAPERSIZE_KAKU_ENV</a>,
00457   -1,
00458 };
00459 
00460 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a93">dj1100_papersizes</a>[] =
00461 {
00462   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00463   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00464   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00465   <a class="code" href="print-pcl_8c.html#a4">PCL_PAPERSIZE_TABLOID</a>,
00466   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
00467   <a class="code" href="print-pcl_8c.html#a6">PCL_PAPERSIZE_SUPER_B</a>,
00468   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00469   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00470   <a class="code" href="print-pcl_8c.html#a9">PCL_PAPERSIZE_A3</a>,
00471   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
00472   <a class="code" href="print-pcl_8c.html#a11">PCL_PAPERSIZE_JIS_B4</a>,
00473   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
00474   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00475   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00476   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00477   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00478   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00479   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00480   <a class="code" href="print-pcl_8c.html#a24">PCL_PAPERSIZE_INVITATION_ENV</a>,
00481   <a class="code" href="print-pcl_8c.html#a25">PCL_PAPERSIZE_JAPANESE_3_ENV</a>,
00482   <a class="code" href="print-pcl_8c.html#a26">PCL_PAPERSIZE_JAPANESE_4_ENV</a>,
00483   <a class="code" href="print-pcl_8c.html#a27">PCL_PAPERSIZE_KAKU_ENV</a>,
00484   -1,
00485 };
<a name="l00486"></a><a class="code" href="print-pcl_8c.html#a93">00486</a> 
00487 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a94">dj1200_papersizes</a>[] =
00488 {
00489   <span class="comment">/* This printer is not mentioned in the Comparison tables,</span>
00490 <span class="comment">     so I'll just pick some likely sizes... */</span>
00491   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00492   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00493   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00494   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00495   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00496   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00497   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00498   -1,
00499 };
00500 
00501 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a95">dj2000_papersizes</a>[] =
00502 {
00503   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00504   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00505   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00506   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00507   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00508   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
00509   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00510   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00511   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00512   <a class="code" href="print-pcl_8c.html#a17">PCL_PAPERSIZE_3x5</a>,
<a name="l00513"></a><a class="code" href="print-pcl_8c.html#a94">00513</a>   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00514   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00515   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00516   <a class="code" href="print-pcl_8c.html#a24">PCL_PAPERSIZE_INVITATION_ENV</a>,
00517   -1,
00518 };
00519 
00520 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a96">dj2500_papersizes</a>[] =
00521 {
00522   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00523   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00524   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00525   <a class="code" href="print-pcl_8c.html#a4">PCL_PAPERSIZE_TABLOID</a>,
00526   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
<a name="l00527"></a><a class="code" href="print-pcl_8c.html#a95">00527</a>   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00528   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00529   <a class="code" href="print-pcl_8c.html#a9">PCL_PAPERSIZE_A3</a>,
00530   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
00531   <a class="code" href="print-pcl_8c.html#a11">PCL_PAPERSIZE_JIS_B4</a>,
00532   <a class="code" href="print-pcl_8c.html#a12">PCL_PAPERSIZE_HAGAKI_CARD</a>,
00533   <a class="code" href="print-pcl_8c.html#a14">PCL_PAPERSIZE_A6_CARD</a>,
00534   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00535   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00536   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00537   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00538   -1,
00539 };
00540 
00541 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>[] =
00542 {
00543   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00544   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
00545   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
<a name="l00546"></a><a class="code" href="print-pcl_8c.html#a96">00546</a>   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00547   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00548   <a class="code" href="print-pcl_8c.html#a18">PCL_PAPERSIZE_MONARCH_ENV</a>,
00549   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00550   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00551   <a class="code" href="print-pcl_8c.html#a21">PCL_PAPERSIZE_C5_ENV</a>,
00552   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00553   -1,
00554 };
00555 
00556 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a98">ljbig_papersizes</a>[] =
00557 {
00558   <a class="code" href="print-pcl_8c.html#a1">PCL_PAPERSIZE_EXECUTIVE</a>,
00559   <a class="code" href="print-pcl_8c.html#a5">PCL_PAPERSIZE_STATEMENT</a>,
00560   <a class="code" href="print-pcl_8c.html#a2">PCL_PAPERSIZE_LETTER</a>,
00561   <a class="code" href="print-pcl_8c.html#a3">PCL_PAPERSIZE_LEGAL</a>,
00562   <a class="code" href="print-pcl_8c.html#a4">PCL_PAPERSIZE_TABLOID</a>,
00563   <a class="code" href="print-pcl_8c.html#a7">PCL_PAPERSIZE_A5</a>,
00564   <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>,
00565   <a class="code" href="print-pcl_8c.html#a9">PCL_PAPERSIZE_A3</a>,
00566   <a class="code" href="print-pcl_8c.html#a10">PCL_PAPERSIZE_JIS_B5</a>,
<a name="l00567"></a><a class="code" href="print-pcl_8c.html#a97">00567</a>   <a class="code" href="print-pcl_8c.html#a11">PCL_PAPERSIZE_JIS_B4</a>,                <span class="comment">/* Guess */</span>
00568   <a class="code" href="print-pcl_8c.html#a15">PCL_PAPERSIZE_4x6</a>,
00569   <a class="code" href="print-pcl_8c.html#a16">PCL_PAPERSIZE_5x8</a>,
00570   <a class="code" href="print-pcl_8c.html#a18">PCL_PAPERSIZE_MONARCH_ENV</a>,
00571   <a class="code" href="print-pcl_8c.html#a19">PCL_PAPERSIZE_COMMERCIAL10_ENV</a>,
00572   <a class="code" href="print-pcl_8c.html#a20">PCL_PAPERSIZE_DL_ENV</a>,
00573   <a class="code" href="print-pcl_8c.html#a21">PCL_PAPERSIZE_C5_ENV</a>,
00574   <a class="code" href="print-pcl_8c.html#a22">PCL_PAPERSIZE_C6_ENV</a>,
00575   -1,
00576 };
00577 
00578 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>[] =
00579 {
00580   <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>,
00581   <a class="code" href="print-pcl_8c.html#a31">PCL_PAPERTYPE_BOND</a>,
<a name="l00582"></a><a class="code" href="print-pcl_8c.html#a98">00582</a>   <a class="code" href="print-pcl_8c.html#a32">PCL_PAPERTYPE_PREMIUM</a>,
00583   <a class="code" href="print-pcl_8c.html#a33">PCL_PAPERTYPE_GLOSSY</a>,
00584   <a class="code" href="print-pcl_8c.html#a34">PCL_PAPERTYPE_TRANS</a>,
00585   -1,
00586 };
00587 
00588 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a100">new_papertypes</a>[] =
00589 {
00590   <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>,
00591   <a class="code" href="print-pcl_8c.html#a31">PCL_PAPERTYPE_BOND</a>,
00592   <a class="code" href="print-pcl_8c.html#a32">PCL_PAPERTYPE_PREMIUM</a>,
00593   <a class="code" href="print-pcl_8c.html#a33">PCL_PAPERTYPE_GLOSSY</a>,
00594   <a class="code" href="print-pcl_8c.html#a34">PCL_PAPERTYPE_TRANS</a>,
00595   <a class="code" href="print-pcl_8c.html#a35">PCL_PAPERTYPE_QPHOTO</a>,
00596   <a class="code" href="print-pcl_8c.html#a36">PCL_PAPERTYPE_QTRANS</a>,
00597   -1,
00598 };
00599 
00600 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>[] =
00601 {
00602   <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>,
00603   <a class="code" href="print-pcl_8c.html#a40">PCL_PAPERSOURCE_MANUAL</a>,
<a name="l00604"></a><a class="code" href="print-pcl_8c.html#a99">00604</a>   <a class="code" href="print-pcl_8c.html#a45">PCL_PAPERSOURCE_LJ_TRAY1</a>,
00605   <a class="code" href="print-pcl_8c.html#a42">PCL_PAPERSOURCE_LJ_TRAY2</a>,
00606   <a class="code" href="print-pcl_8c.html#a43">PCL_PAPERSOURCE_LJ_TRAY3</a>,
00607   <a class="code" href="print-pcl_8c.html#a44">PCL_PAPERSOURCE_LJ_TRAY4</a>,
00608   -1,
00609 };
00610 
00611 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a102">dj340_papersources</a>[] =
00612 {
00613   <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>,
<a name="l00614"></a><a class="code" href="print-pcl_8c.html#a100">00614</a>   <a class="code" href="print-pcl_8c.html#a40">PCL_PAPERSOURCE_MANUAL</a>,
00615   <a class="code" href="print-pcl_8c.html#a46">PCL_PAPERSOURCE_340_PCSF</a>,
00616   <a class="code" href="print-pcl_8c.html#a47">PCL_PAPERSOURCE_340_DCSF</a>,
00617   -1,
00618 };
00619 
00620 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>[] =
00621 {
00622   <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>,
00623   <a class="code" href="print-pcl_8c.html#a40">PCL_PAPERSOURCE_MANUAL</a>,
00624   <a class="code" href="print-pcl_8c.html#a48">PCL_PAPERSOURCE_DJ_TRAY</a>,
00625   -1,
<a name="l00626"></a><a class="code" href="print-pcl_8c.html#a101">00626</a> };
00627 
00628 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a104">dj2500_papersources</a>[] =
00629 {
00630   <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>,
00631   <a class="code" href="print-pcl_8c.html#a40">PCL_PAPERSOURCE_MANUAL</a>,
00632   <a class="code" href="print-pcl_8c.html#a51">PCL_PAPERSOURCE_DJ_AUTO</a>,
00633   <a class="code" href="print-pcl_8c.html#a48">PCL_PAPERSOURCE_DJ_TRAY</a>,
00634   <a class="code" href="print-pcl_8c.html#a49">PCL_PAPERSOURCE_DJ_TRAY2</a>,
00635   <a class="code" href="print-pcl_8c.html#a50">PCL_PAPERSOURCE_DJ_OPTIONAL</a>,
00636   -1,
<a name="l00637"></a><a class="code" href="print-pcl_8c.html#a102">00637</a> };
00638 
00639 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>[] =
00640 {
00641   <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>,
00642   -1
00643 };
00644 
00645 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> <a class="code" href="print-pcl_8c.html#a106">pcl_model_capabilities</a>[] =
<a name="l00646"></a><a class="code" href="print-pcl_8c.html#a103">00646</a> {
00647   <span class="comment">/* Default/unknown printer - assume laserjet */</span>
00648   { 0,
00649     17 * 72 / 2, 14 * 72,               <span class="comment">/* Max paper size */</span>
00650     1, 1,                               <span class="comment">/* Min paper size */</span>
00651     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,  <span class="comment">/* Resolutions */</span>
00652     {12, 12, 18, 18},                   <span class="comment">/* non-A4 Margins */</span>
00653     {12, 12, 10, 10},                   <span class="comment">/* A4 Margins */</span>
<a name="l00654"></a><a class="code" href="print-pcl_8c.html#a104">00654</a>     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
00655     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a>,
00656     <a class="code" href="print-pcl_8c.html#a85">standard_papersizes</a>,
00657     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00658     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00659   },
00660   <span class="comment">/* DesignJet 230/430 (monochrome ) */</span>
00661   { 10230,
00662     36 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00663     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00664     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
<a name="l00665"></a><a class="code" href="print-pcl_8c.html#a105">00665</a>     {49, 49, 15, 15},
00666     {49, 49, 15, 15},
00667     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
00668     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00669     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00670     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
<a name="l00671"></a><a class="code" href="print-pcl_8c.html#a106">00671</a>     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00672   },
00673   <span class="comment">/* DesignJet 250C/450C/455CA/488CA */</span>
00674   <span class="comment">/* The "CA" versions have a "software RIP" but are the same hardware */</span>
00675   { 10250,
00676     36 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00677     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00678     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00679     {49, 49, 15, 15},
00680     {49, 49, 15, 15},
00681     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00682     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00683     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00684     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00685     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00686   },
00687   <span class="comment">/* DesignJet 700 (monochrome) */</span>
00688   { 10700,
00689     36 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00690     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00691     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
00692     {30, 30, 15, 15},           <span class="comment">/* These margins are for sheet mode FIX */</span>
00693     {30, 30, 15, 15},
00694     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
00695     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00696     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00697     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00698     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00699   },
00700   <span class="comment">/* DesignJet 750C */</span>
00701   { 10750,
00702     36 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00703     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00704     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00705     {30, 30, 15, 15},   <span class="comment">/* These margins are for roll mode FIX */</span>
00706     {30, 30, 15, 15},
00707     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00708     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00709     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00710     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00711     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00712   },
00713   <span class="comment">/* DesignJet 2000C/2500C (36" wide) */</span>
00714   { 12500,      <span class="comment">/* Deskjet 2500 already has "2500" */</span>
00715     36 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00716     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00717     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00718     {49, 49, 15, 15},           <span class="comment">/* Check/Fix */</span>
00719     {49, 49, 15, 15},
00720     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00721     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00722     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00723     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00724     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00725   },
00726   <span class="comment">/* DesignJet 3000C/3500C (54" wide) */</span>
00727   { 13500,      <span class="comment">/* Deskjet 2500 already has "2500" */</span>
00728     54 * 72, 150 * 12 * 72,             <span class="comment">/* 150ft in roll mode, 64" in sheet */</span>
00729     830 * 72 / 100, 583 * 72 / 100,     <span class="comment">/* 8.3" wide min in sheet mode */</span>
00730     <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00731     {49, 49, 15, 15},           <span class="comment">/* Check/Fix */</span>
00732     {49, 49, 15, 15},
00733     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00734     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>,
00735     <a class="code" href="print-pcl_8c.html#a86">letter_only_papersizes</a>,
00736     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00737     <a class="code" href="print-pcl_8c.html#a105">standard_papersources</a>,
00738   },
00739   <span class="comment">/* Deskjet 340 */</span>
00740   { 340,
00741     17 * 72 / 2, 14 * 72,
00742     1, 1,                               <span class="comment">/* Min paper size */</span>
00743     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00744     {6, 48, 18, 18},    <span class="comment">/* from bpd07933.pdf */</span>
00745     {6, 48, 10, 11},    <span class="comment">/* from bpd07933.pdf */</span>
00746     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00747     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00748     <a class="code" href="print-pcl_8c.html#a87">dj340_papersizes</a>,
00749     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00750     <a class="code" href="print-pcl_8c.html#a102">dj340_papersources</a>,
00751   },
00752   <span class="comment">/* Deskjet 400 */</span>
00753   { 400,
00754     17 * 72 / 2, 14 * 72,
00755     1, 1,                               <span class="comment">/* Min paper size */</span>
00756     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00757     {7, 41, 18, 18},
00758     {7, 41, 10, 10},    <span class="comment">/* Check/Fix */</span>
00759     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00760     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00761     <a class="code" href="print-pcl_8c.html#a88">dj400_papersizes</a>,
00762     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00763     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00764   },
00765   <span class="comment">/* Deskjet 500, 520. Lexmark 4076 */</span>
00766   { 500,
00767     17 * 72 / 2, 14 * 72,
00768     1, 1,                               <span class="comment">/* Min paper size */</span>
00769     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00770     {7, 41, 18, 18},
00771     {7, 41, 10, 10},    <span class="comment">/* Check/Fix */</span>
00772     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
00773     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00774     <a class="code" href="print-pcl_8c.html#a89">dj500_papersizes</a>,
00775     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00776     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00777   },
00778   <span class="comment">/* Deskjet 500C */</span>
00779   { 501,
00780     17 * 72 / 2, 14 * 72,
00781     1, 1,                               <span class="comment">/* Min paper size */</span>
00782     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00783     {7, 33, 18, 18},
00784     {7, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00785     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00786     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00787     <a class="code" href="print-pcl_8c.html#a89">dj500_papersizes</a>,
00788     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00789     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00790   },
00791   <span class="comment">/* Deskjet 540C */</span>
00792   { 540,
00793     17 * 72 / 2, 14 * 72,
00794     1, 1,                               <span class="comment">/* Min paper size */</span>
00795     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00796     {7, 33, 18, 18},
00797     {7, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00798     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00799     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00800       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00801     <a class="code" href="print-pcl_8c.html#a90">dj540_papersizes</a>,
00802     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00803     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00804   },
00805   <span class="comment">/* Deskjet 550C, 560C */</span>
00806   { 550,
00807     17 * 72 / 2, 14 * 72,
00808     1, 1,                               <span class="comment">/* Min paper size */</span>
00809     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00810     {3, 33, 18, 18},
00811     {5, 33, 10, 10},
00812     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00813     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00814 <span class="comment">/* The 550/560 support COM10 and DL envelope, but the control codes</span>
00815 <span class="comment">   are negative, indicating landscape mode. This needs thinking about! */</span>
00816     <a class="code" href="print-pcl_8c.html#a87">dj340_papersizes</a>,
00817     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00818     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00819   },
00820   <span class="comment">/* Deskjet 600/600C */</span>
00821   { 600,
00822     17 * 72 / 2, 14 * 72,
00823     5 * 72, 583 * 72 / 100,             <span class="comment">/* Min paper size */</span>
00824     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a55">PCL_RES_600_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00825     {0, 33, 18, 18},
00826     {0, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00827     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00828     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00829       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00830     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00831     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00832     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00833   },
00834   <span class="comment">/* Deskjet 6xx series */</span>
00835   { 601,
00836     17 * 72 / 2, 14 * 72,
00837     1, 1,                               <span class="comment">/* Min paper size */</span>
00838     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a55">PCL_RES_600_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00839     {0, 33, 18, 18},
00840     {0, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00841     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00842     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00843       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00844     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00845     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00846     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00847   },
00848   <span class="comment">/* Deskjet 69x series (Photo Capable) */</span>
00849   { 690,
00850     17 * 72 / 2, 14 * 72,
00851     1, 1,                               <span class="comment">/* Min paper size */</span>
00852     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a55">PCL_RES_600_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
00853     {0, 33, 18, 18},
00854     {0, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00855     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a> | <a class="code" href="print-pcl_8c.html#a65">PCL_COLOR_CMYKcm</a>,
00856     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00857       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00858     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00859     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00860     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00861   },
00862   <span class="comment">/* Deskjet 850/855/870/890 (C-RET) */</span>
00863   { 800,
00864     17 * 72 / 2, 14 * 72,
00865     1, 1,                               <span class="comment">/* Min paper size */</span>
00866     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00867     {3, 33, 18, 18},
00868     {5, 33, 10, 10},
00869     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a> | <a class="code" href="print-pcl_8c.html#a64">PCL_COLOR_CMYK4</a>,
00870     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00871       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00872     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00873     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00874     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00875   },
00876   <span class="comment">/* Deskjet 810C, 812C, 840C, 842C, 845C, 895C (C-RET) */</span>
00877   { 840,
00878     17 * 72 / 2, 14 * 72,
00879     1, 1,                               <span class="comment">/* Min paper size */</span>
00880     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a55">PCL_RES_600_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
00881     {0, 33, 18, 18},
00882     {0, 33, 10, 10},    <span class="comment">/* Check/Fix */</span>
00883     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a> | <a class="code" href="print-pcl_8c.html#a66">PCL_COLOR_CMYK4b</a>,
00884     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00885       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00886     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00887     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00888     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00889   },
00890   <span class="comment">/* Deskjet 900 series, 1220C, PhotoSmart P1000/P1100 */</span>
00891   { 900,
00892     17 * 72 / 2, 14 * 72,
00893     1, 1,                               <span class="comment">/* Min paper size */</span>
00894     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a> <span class="comment">/* | PCL_RES_1200_600 | PCL_RES_2400_600 */</span>,
00895     {3, 33, 18, 18},
00896     {5, 33, 10, 10},    <span class="comment">/* Oliver Vecernik */</span>
00897     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00898     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00899       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> | <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>,
00900     <a class="code" href="print-pcl_8c.html#a91">dj600_papersizes</a>,
00901     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00902     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00903   },
00904   <span class="comment">/* Deskjet 1220C (or other large format 900) */</span>
00905   { 901,
00906     13 * 72, 19 * 72,
00907     1, 1,                               <span class="comment">/* Min paper size */</span>
00908     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a> <span class="comment">/* | PCL_RES_1200_600 | PCL_RES_2400_600 */</span>,
00909     {3, 33, 18, 18},
00910     {5, 33, 10, 10},
00911     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00912     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00913       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00914     <a class="code" href="print-pcl_8c.html#a92">dj1220_papersizes</a>,
00915     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00916     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00917   },
00918   <span class="comment">/* Deskjet 1100C, 1120C */</span>
00919   { 1100,
00920     13 * 72, 19 * 72,
00921     1, 1,                               <span class="comment">/* Min paper size */</span>
00922     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>,
00923     {3, 33, 18, 18},
00924     {5, 33, 10, 10},
00925     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a> | <a class="code" href="print-pcl_8c.html#a64">PCL_COLOR_CMYK4</a>,
00926     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00927       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00928     <a class="code" href="print-pcl_8c.html#a93">dj1100_papersizes</a>,
00929     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00930     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00931   },
00932   <span class="comment">/* Deskjet 1200C */</span>
00933   { 1200,
00934     17 * 72 / 2, 14 * 72,
00935     1, 1,                               <span class="comment">/* Min paper size */</span>
00936     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00937     {12, 12, 18, 18},
00938     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
00939     <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>,
00940     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00941       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00942     <a class="code" href="print-pcl_8c.html#a94">dj1200_papersizes</a>,
00943     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00944     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00945   },
00946   <span class="comment">/* Deskjet 1600C */</span>
00947   { 1600,
00948     17 * 72 / 2, 14 * 72,
00949     1, 1,                               <span class="comment">/* Min paper size */</span>
00950     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00951     {12, 12, 18, 18},
00952     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
00953     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00954     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00955       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00956     <a class="code" href="print-pcl_8c.html#a94">dj1200_papersizes</a>,
00957     <a class="code" href="print-pcl_8c.html#a99">basic_papertypes</a>,
00958     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00959   },
00960   <span class="comment">/* Deskjet 2000 */</span>
00961   { 2000,
00962     17 * 72 / 2, 14 * 72,
00963     1, 1,                               <span class="comment">/* Min paper size */</span>
00964     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
00965     {0, 35, 18, 18},                    <span class="comment">/* Michel Goraczko */</span>
00966     {0, 35, 10, 10},    <span class="comment">/* Check/Fix */</span>
00967     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00968     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00969       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00970     <a class="code" href="print-pcl_8c.html#a95">dj2000_papersizes</a>,
00971     <a class="code" href="print-pcl_8c.html#a100">new_papertypes</a>,
00972     <a class="code" href="print-pcl_8c.html#a103">dj_papersources</a>,
00973   },
00974   <span class="comment">/* Deskjet 2500 */</span>
00975   { 2500,
00976     13 * 72, 19 * 72,
00977     1, 1,                               <span class="comment">/* Min paper size */</span>
00978     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
00979     {12, 12, 18, 18},
00980     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
00981     <a class="code" href="print-pcl_8c.html#a63">PCL_COLOR_CMYK</a>,
00982     <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a> |
00983       <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
00984     <a class="code" href="print-pcl_8c.html#a96">dj2500_papersizes</a>,
00985     <a class="code" href="print-pcl_8c.html#a100">new_papertypes</a>,
00986     <a class="code" href="print-pcl_8c.html#a104">dj2500_papersources</a>,
00987   },
00988   <span class="comment">/* LaserJet II series */</span>
00989   { 2,
00990     17 * 72 / 2, 14 * 72,
00991     1, 1,                               <span class="comment">/* Min paper size */</span>
00992     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
00993     {12, 12, 18, 18},
00994     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
00995     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
00996     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a>,
00997     <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>,
00998     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
00999     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01000   },
01001   <span class="comment">/* LaserJet IIP (TIFF but no blankline) */</span>
01002   { 21,
01003     17 * 72 / 2, 14 * 72,
01004     1, 1,                               <span class="comment">/* Min paper size */</span>
01005     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
01006     {12, 12, 18, 18},
01007     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01008     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01009     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a>,
01010     <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>,
01011     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01012     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01013   },
01014   <span class="comment">/* LaserJet III series */</span>
01015   { 3,
01016     17 * 72 / 2, 14 * 72,
01017     1, 1,                               <span class="comment">/* Min paper size */</span>
01018     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
01019     {12, 12, 18, 18},
01020     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01021     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01022     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
01023     <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>,
01024     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01025     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01026   },
01027   <span class="comment">/* LaserJet 4L */</span>
01028   { 4,
01029     17 * 72 / 2, 14 * 72,
01030     1, 1,                               <span class="comment">/* Min paper size */</span>
01031     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a>,
01032     {12, 12, 18, 18},
01033     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01034     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01035     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
01036     <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>,
01037     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01038     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01039   },
01040   <span class="comment">/* LaserJet 4V */</span>
01041   { 5,
01042     13 * 72, 19 * 72,
01043     1, 1,                               <span class="comment">/* Min paper size */</span>
01044     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
01045     {12, 12, 18, 18},
01046     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01047     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01048     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>,
01049     <a class="code" href="print-pcl_8c.html#a98">ljbig_papersizes</a>,
01050     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01051     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01052   },
01053   <span class="comment">/* LaserJet 4Si */</span>
01054   { 51,
01055     13 * 72, 19 * 72,
01056     1, 1,                               <span class="comment">/* Min paper size */</span>
01057     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
01058     {12, 12, 18, 18},
01059     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01060     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01061     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> |
01062       <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>,
01063     <a class="code" href="print-pcl_8c.html#a98">ljbig_papersizes</a>,
01064     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01065     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01066   },
01067   <span class="comment">/* LaserJet 4 series (except as above), 5 series, 6 series */</span>
01068   { 6,
01069     17 * 72 / 2, 14 * 72,
01070     1, 1,                               <span class="comment">/* Min paper size */</span>
01071     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
01072     {12, 12, 18, 18},
01073     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01074     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01075     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> |
01076       <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>,
01077     <a class="code" href="print-pcl_8c.html#a97">ljsmall_papersizes</a>,
01078     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01079     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01080   },
01081   <span class="comment">/* LaserJet 5Si */</span>
01082   { 7,
01083     13 * 72, 19 * 72,
01084     1, 1,                               <span class="comment">/* Min paper size */</span>
01085     <a class="code" href="print-pcl_8c.html#a53">PCL_RES_150_150</a> | <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> | <a class="code" href="print-pcl_8c.html#a57">PCL_RES_600_600</a>,
01086     {12, 12, 18, 18},
01087     {12, 12, 10, 10},   <span class="comment">/* Check/Fix */</span>
01088     <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>,
01089     <a class="code" href="print-pcl_8c.html#a67">PCL_PRINTER_LJ</a> | <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a> | <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a> | <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a> |
01090       <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>,
01091     <a class="code" href="print-pcl_8c.html#a98">ljbig_papersizes</a>,
01092     <a class="code" href="print-pcl_8c.html#a84">emptylist</a>,
01093     <a class="code" href="print-pcl_8c.html#a101">laserjet_papersources</a>,
01094   },
01095 };
01096 
01097 
01098 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="print-pcl_8c.html#a107">standard_sat_adjustment</a>[] =
01099 <span class="stringliteral">"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n"</span>
01100 <span class="stringliteral">"&lt;gimp-print&gt;\n"</span>
01101 <span class="stringliteral">"&lt;curve wrap=\"wrap\" type=\"linear\" gamma=\"0\"&gt;\n"</span>
01102 <span class="stringliteral">"&lt;sequence count=\"48\" lower-bound=\"0\" upper-bound=\"4\"&gt;\n"</span>
01103 <span class="comment">/* C */</span>  <span class="stringliteral">"1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 "</span>  <span class="comment">/* B */</span>
01104 <span class="comment">/* B */</span>  <span class="stringliteral">"1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 "</span>  <span class="comment">/* M */</span>
01105 <span class="comment">/* M */</span>  <span class="stringliteral">"1.00 0.95 0.90 0.90 0.90 0.90 0.90 0.90 "</span>  <span class="comment">/* R */</span>
01106 <span class="comment">/* R */</span>  <span class="stringliteral">"0.90 0.95 0.95 1.00 1.00 1.00 1.00 1.00 "</span>  <span class="comment">/* Y */</span>
01107 <span class="comment">/* Y */</span>  <span class="stringliteral">"1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 "</span>  <span class="comment">/* G */</span>
01108 <span class="comment">/* G */</span>  <span class="stringliteral">"1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 "</span>  <span class="comment">/* C */</span>
01109 <span class="stringliteral">"&lt;/sequence&gt;\n"</span>
01110 <span class="stringliteral">"&lt;/curve&gt;\n"</span>
01111 <span class="stringliteral">"&lt;/gimp-print&gt;\n"</span>;
01112 
01113 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="print-pcl_8c.html#a108">standard_lum_adjustment</a>[] =
01114 <span class="stringliteral">"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n"</span>
01115 <span class="stringliteral">"&lt;gimp-print&gt;\n"</span>
01116 <span class="stringliteral">"&lt;curve wrap=\"wrap\" type=\"linear\" gamma=\"0\"&gt;\n"</span>
01117 <span class="stringliteral">"&lt;sequence count=\"48\" lower-bound=\"0\" upper-bound=\"4\"&gt;\n"</span>
01118 <span class="comment">/* C */</span>  <span class="stringliteral">"0.50 0.52 0.56 0.60 0.66 0.71 0.74 0.77 "</span>  <span class="comment">/* B */</span>
01119 <span class="comment">/* B */</span>  <span class="stringliteral">"0.81 0.79 0.74 0.68 0.70 0.74 0.77 0.82 "</span>  <span class="comment">/* M */</span>
01120 <span class="comment">/* M */</span>  <span class="stringliteral">"0.88 0.93 0.95 0.97 0.97 0.96 0.95 0.95 "</span>  <span class="comment">/* R */</span>
01121 <span class="comment">/* R */</span>  <span class="stringliteral">"0.95 0.96 0.97 0.98 0.99 1.00 1.00 1.00 "</span>  <span class="comment">/* Y */</span>
01122 <span class="comment">/* Y */</span>  <span class="stringliteral">"1.00 0.97 0.94 0.92 0.90 0.88 0.85 0.79 "</span>  <span class="comment">/* G */</span>
01123 <span class="comment">/* G */</span>  <span class="stringliteral">"0.69 0.64 0.58 0.54 0.54 0.54 0.53 0.51 "</span>  <span class="comment">/* C */</span>
<a name="l01124"></a><a class="code" href="print-pcl_8c.html#a107">01124</a> <span class="stringliteral">"&lt;/sequence&gt;\n"</span>
01125 <span class="stringliteral">"&lt;/curve&gt;\n"</span>
01126 <span class="stringliteral">"&lt;/gimp-print&gt;\n"</span>;
01127 
01128 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="print-pcl_8c.html#a109">standard_hue_adjustment</a>[] =
01129 <span class="stringliteral">"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n"</span>
01130 <span class="stringliteral">"&lt;gimp-print&gt;\n"</span>
01131 <span class="stringliteral">"&lt;curve wrap=\"wrap\" type=\"linear\" gamma=\"0\"&gt;\n"</span>
01132 <span class="stringliteral">"&lt;sequence count=\"48\" lower-bound=\"-6\" upper-bound=\"6\"&gt;\n"</span>
01133 <span class="comment">/* C */</span>  <span class="stringliteral">"0.00 0.06 0.10 0.10 0.06 -.01 -.09 -.17 "</span>  <span class="comment">/* B */</span>
01134 <span class="comment">/* B */</span>  <span class="stringliteral">"-.25 -.33 -.38 -.38 -.36 -.34 -.34 -.34 "</span>  <span class="comment">/* M */</span>
01135 <span class="comment">/* M */</span>  <span class="stringliteral">"-.34 -.34 -.36 -.40 -.50 -.40 -.30 -.20 "</span>  <span class="comment">/* R */</span>
01136 <span class="comment">/* R */</span>  <span class="stringliteral">"-.12 -.07 -.04 -.02 0.00 0.00 0.00 0.00 "</span>  <span class="comment">/* Y */</span>
01137 <span class="comment">/* Y */</span>  <span class="stringliteral">"0.00 0.00 0.00 -.05 -.10 -.15 -.22 -.24 "</span>  <span class="comment">/* G */</span>
01138 <span class="comment">/* G */</span>  <span class="stringliteral">"-.26 -.30 -.33 -.28 -.25 -.20 -.13 -.06 "</span>  <span class="comment">/* C */</span>
<a name="l01139"></a><a class="code" href="print-pcl_8c.html#a108">01139</a> <span class="stringliteral">"&lt;/sequence&gt;\n"</span>
01140 <span class="stringliteral">"&lt;/curve&gt;\n"</span>
01141 <span class="stringliteral">"&lt;/gimp-print&gt;\n"</span>;
01142 
01143 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> <a class="code" href="print-pcl_8c.html#a110">the_parameters</a>[] =
01144 {
01145   {
01146     <span class="stringliteral">"PageSize"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Page Size"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Basic Printer Setup"</span>),
01147     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Size of the paper being printed to"</span>),
01148     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a19">STP_PARAMETER_CLASS_CORE</a>,
01149     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01150   },
01151   {
01152     <span class="stringliteral">"MediaType"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Media Type"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Basic Printer Setup"</span>),
01153     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Type of media (plain paper, photo paper, etc.)"</span>),
<a name="l01154"></a><a class="code" href="print-pcl_8c.html#a109">01154</a>     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01155     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01156   },
01157   {
01158     <span class="stringliteral">"InputSlot"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Media Source"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Basic Printer Setup"</span>),
01159     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Source (input slot) of the media"</span>),
01160     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01161     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01162   },
01163   {
01164     <span class="stringliteral">"Resolution"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Resolution"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Basic Printer Setup"</span>),
01165     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Resolution and quality of the print"</span>),
01166     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01167     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01168   },
<a name="l01169"></a><a class="code" href="print-pcl_8c.html#a110">01169</a>   {
01170     <span class="stringliteral">"InkType"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Ink Type"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Advanced Printer Setup"</span>),
01171     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Type of ink in the printer"</span>),
01172     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01173     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01174   },
01175   {
01176     <span class="stringliteral">"InkChannels"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Ink Channels"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Advanced Printer Functionality"</span>),
01177     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Ink Channels"</span>),
01178     <a class="code" href="group__vars.html#gga132a8">STP_PARAMETER_TYPE_INT</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01179     <a class="code" href="group__vars.html#gga134a27">STP_PARAMETER_LEVEL_INTERNAL</a>, 0, 0, -1, 0, 0
01180   },
01181   {
01182     <span class="stringliteral">"PrintingMode"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Printing Mode"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Core Parameter"</span>),
01183     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Printing Output Mode"</span>),
01184     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a19">STP_PARAMETER_CLASS_CORE</a>,
01185     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01186   },
01187   {
01188     <span class="stringliteral">"Duplex"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Double-Sided Printing"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Basic Printer Setup"</span>),
01189     <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Duplex/Tumble Setting"</span>),
01190     <a class="code" href="group__vars.html#gga132a7">STP_PARAMETER_TYPE_STRING_LIST</a>, <a class="code" href="group__vars.html#gga133a17">STP_PARAMETER_CLASS_FEATURE</a>,
01191     <a class="code" href="group__vars.html#gga134a21">STP_PARAMETER_LEVEL_BASIC</a>, 1, 1, -1, 1, 0
01192   },
01193 };
01194 
01195 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="print-pcl_8c.html#a111">the_parameter_count</a> =
01196 <span class="keyword">sizeof</span>(<a class="code" href="print-pcl_8c.html#a110">the_parameters</a>) / <span class="keyword">sizeof</span>(<span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a>);
01197 
01198 <span class="keyword">typedef</span> <span class="keyword">struct</span>
01199 <span class="keyword"></span>{
01200   <span class="keyword">const</span> <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> param;
01201   <span class="keywordtype">double</span> min;
01202   <span class="keywordtype">double</span> <a class="code" href="print-lexmark_8c.html#a6">max</a>;
01203   <span class="keywordtype">double</span> defval;
01204   <span class="keywordtype">int</span> color_only;
01205 } <a class="code" href="structfloat__param__t.html">float_param_t</a>;
01206 
01207 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structfloat__param__t.html">float_param_t</a> <a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[] =
01208 {
01209   {
01210     {
01211       <span class="stringliteral">"CyanDensity"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Cyan Balance"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Output Level Adjustment"</span>),
01212       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Adjust the cyan balance"</span>),
01213       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
01214       <a class="code" href="group__vars.html#gga134a22">STP_PARAMETER_LEVEL_ADVANCED</a>, 0, 1, 1, 1, 0
01215     }, 0.0, 2.0, 1.0, 1
01216   },
01217   {
01218     {
01219       <span class="stringliteral">"MagentaDensity"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Magenta Balance"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Output Level Adjustment"</span>),
01220       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Adjust the magenta balance"</span>),
<a name="l01221"></a><a class="code" href="print-pcl_8c.html#a111">01221</a>       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
01222       <a class="code" href="group__vars.html#gga134a22">STP_PARAMETER_LEVEL_ADVANCED</a>, 0, 1, 2, 1, 0
01223     }, 0.0, 2.0, 1.0, 1
01224   },
01225   {
<a name="l01226"></a><a class="code" href="structfloat__param__t.html#o0">01226</a>     {
<a name="l01227"></a><a class="code" href="structfloat__param__t.html#o1">01227</a>       <span class="stringliteral">"YellowDensity"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Yellow Balance"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Output Level Adjustment"</span>),
<a name="l01228"></a><a class="code" href="structfloat__param__t.html#o2">01228</a>       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Adjust the yellow balance"</span>),
<a name="l01229"></a><a class="code" href="structfloat__param__t.html#o3">01229</a>       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
<a name="l01230"></a><a class="code" href="structfloat__param__t.html#o4">01230</a>       <a class="code" href="group__vars.html#gga134a22">STP_PARAMETER_LEVEL_ADVANCED</a>, 0, 1, 3, 1, 0
01231     }, 0.0, 2.0, 1.0, 1
01232   },
<a name="l01233"></a><a class="code" href="print-pcl_8c.html#a112">01233</a>   {
01234     {
01235       <span class="stringliteral">"BlackDensity"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Black Balance"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Output Level Adjustment"</span>),
01236       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Adjust the black balance"</span>),
01237       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
01238       <a class="code" href="group__vars.html#gga134a22">STP_PARAMETER_LEVEL_ADVANCED</a>, 0, 1, 0, 1, 0
01239     }, 0.0, 2.0, 1.0, 1
01240   },
01241   {
01242     {
01243       <span class="stringliteral">"LightCyanTransition"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Light Cyan Transition"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Advanced Ink Adjustment"</span>),
01244       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Light Cyan Transition"</span>),
01245       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
01246       <a class="code" href="group__vars.html#gga134a26">STP_PARAMETER_LEVEL_ADVANCED4</a>, 0, 1, -1, 1, 0
01247     }, 0.0, 5.0, 1.0, 1
01248   },
01249   {
01250     {
01251       <span class="stringliteral">"LightMagentaTransition"</span>, <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Light Magenta Transition"</span>), <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Advanced Ink Adjustment"</span>),
01252       <a class="code" href="group__intl__internal.html#ga6">N_</a>(<span class="stringliteral">"Light Magenta Transition"</span>),
01253       <a class="code" href="group__vars.html#gga132a10">STP_PARAMETER_TYPE_DOUBLE</a>, <a class="code" href="group__vars.html#gga133a18">STP_PARAMETER_CLASS_OUTPUT</a>,
01254       <a class="code" href="group__vars.html#gga134a26">STP_PARAMETER_LEVEL_ADVANCED4</a>, 0, 1, -1, 1, 0
01255     }, 0.0, 5.0, 1.0, 1
01256   },
01257 };
01258 
01259 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="print-pcl_8c.html#a113">float_parameter_count</a> =
01260 <span class="keyword">sizeof</span>(<a class="code" href="print-pcl_8c.html#a112">float_parameters</a>) / <span class="keyword">sizeof</span>(<span class="keyword">const</span> <a class="code" href="structfloat__param__t.html">float_param_t</a>);
01261 
01262 <span class="comment">/*</span>
01263 <span class="comment"> * Convert a name into it's option value</span>
01264 <span class="comment"> */</span>
01265 
01266 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="print-pcl_8c.html#a127">pcl_string_to_val</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *string,                <span class="comment">/* I: String */</span>
01267                            <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> *options,        <span class="comment">/* I: Options */</span>
01268                            <span class="keywordtype">int</span> num_options)             <span class="comment">/* I: Num options */</span>
01269 {
01270 
01271   <span class="keywordtype">int</span> i;
01272   <span class="keywordtype">int</span> code = -1;
01273 
01274  <span class="comment">/*</span>
01275 <span class="comment">  * Look up the string in the table and convert to the code.</span>
01276 <span class="comment">  */</span>
01277 
01278   <span class="keywordflow">for</span> (i=0; i&lt;num_options; i++) {
01279     <span class="keywordflow">if</span> (!strcmp(string, options[i].pcl_name)) {
01280        code=options[i].<a class="code" href="structpcl__t.html#o2">pcl_code</a>;
01281        <span class="keywordflow">break</span>;
01282        }
01283   }
01284 
<a name="l01285"></a><a class="code" href="print-pcl_8c.html#a113">01285</a>   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"String: %s, Code: %d\n"</span>, string, code);
01286 
01287   <span class="keywordflow">return</span>(code);
01288 }
01289 
01290 <span class="comment">/*</span>
01291 <span class="comment"> * Convert a value into it's option name</span>
<a name="l01292"></a><a class="code" href="print-pcl_8c.html#a127">01292</a> <span class="comment"> */</span>
01293 
01294 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="print-pcl_8c.html#a128">pcl_val_to_string</a>(<span class="keywordtype">int</span> code,                 <span class="comment">/* I: Code */</span>
01295                            <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> *options,        <span class="comment">/* I: Options */</span>
01296                            <span class="keywordtype">int</span> num_options)             <span class="comment">/* I: Num options */</span>
01297 {
01298 
01299   <span class="keywordtype">int</span> i;
01300   <span class="keyword">const</span> <span class="keywordtype">char</span> *string = NULL;
01301 
01302  <span class="comment">/*</span>
01303 <span class="comment">  * Look up the code in the table and convert to the string.</span>
01304 <span class="comment">  */</span>
01305 
01306   <span class="keywordflow">for</span> (i=0; i&lt;num_options; i++) {
01307     <span class="keywordflow">if</span> (code == options[i].<a class="code" href="structpcl__t.html#o2">pcl_code</a>) {
01308        string=options[i].pcl_name;
01309        <span class="keywordflow">break</span>;
01310        }
01311   }
01312 
01313   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(<a class="code" href="group__util.html#ga35">STP_DBG_PCL</a>, <span class="stringliteral">"Code: %d, String: %s\n"</span>, code, string);
01314 
01315   <span class="keywordflow">return</span>(string);
01316 }
01317 
01318 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="print-pcl_8c.html#a129">pcl_val_to_text</a>(<span class="keywordtype">int</span> code,                   <span class="comment">/* I: Code */</span>
01319                            <span class="keyword">const</span> <a class="code" href="structpcl__t.html">pcl_t</a> *options,        <span class="comment">/* I: Options */</span>
<a name="l01320"></a><a class="code" href="print-pcl_8c.html#a128">01320</a>                            <span class="keywordtype">int</span> num_options)             <span class="comment">/* I: Num options */</span>
01321 {
01322 
01323   <span class="keywordtype">int</span> i;
01324   <span class="keyword">const</span> <span class="keywordtype">char</span> *string = NULL;
01325 
01326  <span class="comment">/*</span>
01327 <span class="comment">  * Look up the code in the table and convert to the string.</span>
01328 <span class="comment">  */</span>
01329 
01330   <span class="keywordflow">for</span> (i=0; i&lt;num_options; i++) {
01331     <span class="keywordflow">if</span> (code == options[i].<a class="code" href="structpcl__t.html#o2">pcl_code</a>) {
01332        string=options[i].pcl_text;
01333        <span class="keywordflow">break</span>;
01334        }
01335   }
01336 
01337   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(<a class="code" href="group__util.html#ga35">STP_DBG_PCL</a>, <span class="stringliteral">"Code: %d, String: %s\n"</span>, code, string);
01338 
01339   <span class="keywordflow">return</span>(string);
01340 }
01341 
01342 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> dot_sizes[] = { 0.5, 0.832, 1.0 };
01343 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="print-pcl_8c.html#a115">dot_sizes_cret</a>[] = { 1.0, 1.0, 1.0 };
<a name="l01344"></a><a class="code" href="print-pcl_8c.html#a129">01344</a> 
01345 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__dotsize.html">stp_dotsize_t</a> <a class="code" href="print-pcl_8c.html#a116">variable_dotsizes</a>[] =
01346 {
01347   { 0x1, 0.5 },
01348   { 0x2, 0.67 },
01349   { 0x3, 1.0 }
01350 };
01351 
01352 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__shade.html">stp_shade_t</a> <a class="code" href="print-pcl_8c.html#a117">variable_shades</a>[] =
01353 {
01354   { 0.38, 3, <a class="code" href="print-pcl_8c.html#a116">variable_dotsizes</a> },
01355   { 1.0, 3, <a class="code" href="print-pcl_8c.html#a116">variable_dotsizes</a> }
01356 };
01357 
01358 <span class="comment">/*</span>
01359 <span class="comment"> * pcl_get_model_capabilities() - Return struct of model capabilities</span>
01360 <span class="comment"> */</span>
01361 
01362 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *                                <span class="comment">/* O: Capabilities */</span>
01363 <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(<span class="keywordtype">int</span> model)   <span class="comment">/* I: Model */</span>
01364 {
01365   <span class="keywordtype">int</span> i;
01366   <span class="keywordtype">int</span> models= <span class="keyword">sizeof</span>(<a class="code" href="print-pcl_8c.html#a106">pcl_model_capabilities</a>) / <span class="keyword">sizeof</span>(<a class="code" href="structpcl__cap__t.html">pcl_cap_t</a>);
01367   <span class="keywordflow">for</span> (i=0; i&lt;models; i++) {
<a name="l01368"></a><a class="code" href="print-pcl_8c.html#a114">01368</a>     <span class="keywordflow">if</span> (<a class="code" href="print-pcl_8c.html#a106">pcl_model_capabilities</a>[i].<a class="code" href="structpcl__cap__t.html#o0">model</a> == model) {
<a name="l01369"></a><a class="code" href="print-pcl_8c.html#a115">01369</a>       <span class="keywordflow">return</span> &amp;(<a class="code" href="print-pcl_8c.html#a106">pcl_model_capabilities</a>[i]);
01370     }
<a name="l01371"></a><a class="code" href="print-pcl_8c.html#a116">01371</a>   }
01372   <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"pcl: model %d not found in capabilities list.\n"</span>,model);
01373   <span class="keywordflow">return</span> &amp;(<a class="code" href="print-pcl_8c.html#a106">pcl_model_capabilities</a>[0]);
01374 }
01375 
01376 <span class="comment">/*</span>
01377 <span class="comment"> * Convert Media size name into PCL media code for printer</span>
<a name="l01378"></a><a class="code" href="print-pcl_8c.html#a117">01378</a> <span class="comment"> */</span>
01379 
01380 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="print-pcl_8c.html#a131">pcl_convert_media_size</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *media_size,       <span class="comment">/* I: Media size string */</span>
01381                                   <span class="keywordtype">int</span>  model)           <span class="comment">/* I: model number */</span>
01382 {
01383 
01384   <span class="keywordtype">int</span> i;
01385   <span class="keywordtype">int</span> media_code = 0;
01386   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps;
01387 
01388  <span class="comment">/*</span>
<a name="l01389"></a><a class="code" href="print-pcl_8c.html#a130">01389</a> <span class="comment">  * First look up the media size in the table and convert to the code.</span>
01390 <span class="comment">  */</span>
01391 
01392   media_code = <a class="code" href="print-pcl_8c.html#a127">pcl_string_to_val</a>(media_size, pcl_media_sizes,
01393                                  NUM_PRINTER_PAPER_SIZES);
01394 
01395   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Media Size: %s, Code: %d\n"</span>, media_size, media_code);
01396 
01397  <span class="comment">/*</span>
01398 <span class="comment">  * Now see if the printer supports the code found.</span>
01399 <span class="comment">  */</span>
01400 
01401   <span class="keywordflow">if</span> (media_code != -1) {
01402     caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(model);
01403 
01404     <span class="keywordflow">for</span> (i=0; (i&lt;<a class="code" href="print-pcl_8c.html#a29">NUM_PRINTER_PAPER_SIZES</a>) &amp;&amp; (caps-&gt;<a class="code" href="structpcl__cap__t.html#o10">paper_sizes</a>[i] != -1); i++) {
01405       <span class="keywordflow">if</span> (media_code == (<span class="keywordtype">int</span>) caps-&gt;<a class="code" href="structpcl__cap__t.html#o10">paper_sizes</a>[i])
<a name="l01406"></a><a class="code" href="print-pcl_8c.html#a131">01406</a>         <span class="keywordflow">return</span>(media_code);             <span class="comment">/* Is supported */</span>
01407     }
01408 
01409     <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Media Code %d not supported by printer model %d.\n"</span>,
01410       media_code, model);
01411     <span class="keywordflow">return</span>(-1);                         <span class="comment">/* Not supported */</span>
01412   }
01413   <span class="keywordflow">else</span>
01414     <span class="keywordflow">return</span>(-1);                         <span class="comment">/* Not supported */</span>
01415 }
01416 
01417 
01418 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> <a class="code" href="print-pcl_8c.html#a118">ink_types</a>[] =
01419 {
01420   { <span class="stringliteral">"CMYK"</span>,     <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Color + Black Cartridges"</span>) },
01421   { <span class="stringliteral">"Photo"</span>,    <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Color + Photo Cartridges"</span>) }
01422 };
01423 
01424 <span class="comment">/*</span>
01425 <span class="comment"> * Duplex support - modes available</span>
01426 <span class="comment"> * Note that the internal names MUST match those in cups/genppd.c else the</span>
01427 <span class="comment"> * PPD files will not be generated correctly</span>
01428 <span class="comment"> */</span>
01429 
01430 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> <a class="code" href="print-pcl_8c.html#a119">duplex_types</a>[] =
01431 {
01432   { <span class="stringliteral">"None"</span>,             <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Off"</span>) },
01433   { <span class="stringliteral">"DuplexNoTumble"</span>,   <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Long Edge (Standard)"</span>) },
01434   { <span class="stringliteral">"DuplexTumble"</span>,     <a class="code" href="group__intl__internal.html#ga6">N_</a> (<span class="stringliteral">"Short Edge (Flip)"</span>) }
01435 };
01436 <span class="preprocessor">#define NUM_DUPLEX (sizeof (duplex_types) / sizeof (stp_param_string_t))</span>
01437 <span class="preprocessor"></span>
01438 <span class="comment">/*</span>
01439 <span class="comment"> * 'pcl_papersize_valid()' - Is the paper size valid for this printer.</span>
01440 <span class="comment"> */</span>
01441 
01442 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>
01443 <a class="code" href="print-pcl_8c.html#a132">pcl_papersize_valid</a>(<span class="keyword">const</span> <a class="code" href="structstp__papersize__t.html">stp_papersize_t</a> *pt,
<a name="l01444"></a><a class="code" href="print-pcl_8c.html#a118">01444</a>                     <span class="keywordtype">int</span> model)
01445 {
01446 
01447   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(model);
01448 
01449 <span class="preprocessor">#ifdef PCL_NO_CUSTOM_PAPERSIZES</span>
01450 <span class="preprocessor"></span>  <span class="keywordtype">int</span> use_custom = 0;
01451 <span class="preprocessor">#else</span>
01452 <span class="preprocessor"></span>  <span class="keywordtype">int</span> use_custom = ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a>)
01453                      == <a class="code" href="print-pcl_8c.html#a72">PCL_PRINTER_CUSTOM_SIZE</a>);
01454 <span class="preprocessor">#endif</span>
01455 <span class="preprocessor"></span>
<a name="l01456"></a><a class="code" href="print-pcl_8c.html#a119">01456</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pwidth = pt-&gt;<a class="code" href="structstp__papersize__t.html#o3">width</a>;
01457   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pheight = pt-&gt;<a class="code" href="structstp__papersize__t.html#o4">height</a>;
01458 
01459 <span class="comment">/*</span>
01460 <span class="comment"> * This function decides whether a paper size is allowed for the</span>
01461 <span class="comment"> * current printer. The DeskJet feed mechanisms set a minimum and</span>
<a name="l01462"></a><a class="code" href="print-pcl_8c.html#a75">01462</a> <span class="comment"> * maximum size for the paper, BUT some of the directly supported</span>
01463 <span class="comment"> * media sizes are less than this minimum (eg card and envelopes)</span>
01464 <span class="comment"> * So, we allow supported sizes though, but clamp custom sizes</span>
01465 <span class="comment"> * to the min and max sizes.</span>
01466 <span class="comment"> */</span>
01467 
01468 <span class="comment">/*</span>
<a name="l01469"></a><a class="code" href="print-pcl_8c.html#a132">01469</a> <span class="comment"> * Is it a valid name?</span>
01470 <span class="comment"> */</span>
01471 
01472   <span class="keywordflow">if</span> (strlen(pt-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>) &lt;= 0)
01473     <span class="keywordflow">return</span>(0);
01474 
01475 <span class="comment">/*</span>
01476 <span class="comment"> * Is it a recognised supported name?</span>
01477 <span class="comment"> */</span>
01478 
01479   <span class="keywordflow">if</span> (<a class="code" href="print-pcl_8c.html#a131">pcl_convert_media_size</a>(pt-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>, model) != -1)
01480     <span class="keywordflow">return</span>(1);
01481 
01482 <span class="comment">/*</span>
01483 <span class="comment"> * If we are not allowed to use custom paper sizes, we are done</span>
01484 <span class="comment"> */</span>
01485 
01486   <span class="keywordflow">if</span> (use_custom == 0)
01487     <span class="keywordflow">return</span>(0);
01488 
01489 <span class="comment">/*</span>
01490 <span class="comment"> * We are allowed custom paper sizes. Check that the size is within</span>
01491 <span class="comment"> * limits.</span>
01492 <span class="comment"> */</span>
01493 
01494   <span class="keywordflow">if</span> (pwidth &lt;= caps-&gt;<a class="code" href="structpcl__cap__t.html#o1">custom_max_width</a> &amp;&amp;
01495      pheight &lt;= caps-&gt;<a class="code" href="structpcl__cap__t.html#o2">custom_max_height</a> &amp;&amp;
01496      (pheight &gt;=  caps-&gt;<a class="code" href="structpcl__cap__t.html#o4">custom_min_height</a> || pheight == 0) &amp;&amp;
01497      (pwidth &gt;= caps-&gt;<a class="code" href="structpcl__cap__t.html#o3">custom_min_width</a> || pwidth == 0))
01498     <span class="keywordflow">return</span>(1);
01499 
01500   <span class="keywordflow">return</span>(0);
01501 }
01502 
01503 <span class="comment">/*</span>
01504 <span class="comment"> * 'pcl_parameters()' - Return the parameter values for the given parameter.</span>
01505 <span class="comment"> */</span>
01506 
01507 <span class="keyword">static</span> <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a>
01508 <a class="code" href="print-pcl_8c.html#a133">pcl_list_parameters</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
01509 {
01510   <a class="code" href="group__vars.html#ga1">stp_parameter_list_t</a> *ret = <a class="code" href="group__vars.html#ga43">stp_parameter_list_create</a>();
01511   <span class="keywordtype">int</span> i;
01512   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a111">the_parameter_count</a>; i++)
01513     <a class="code" href="group__vars.html#ga82">stp_parameter_list_add_param</a>(ret, &amp;(<a class="code" href="print-pcl_8c.html#a110">the_parameters</a>[i]));
01514   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a113">float_parameter_count</a>; i++)
01515     <a class="code" href="group__vars.html#ga82">stp_parameter_list_add_param</a>(ret, &amp;(<a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[i].param));
01516   <span class="keywordflow">return</span> ret;
01517 }
01518 
01519 <span class="keyword">static</span> <span class="keywordtype">void</span>
01520 <a class="code" href="print-pcl_8c.html#a134">pcl_parameters</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
01521                <a class="code" href="structstp__parameter__t.html">stp_parameter_t</a> *description)
01522 {
01523   <span class="keywordtype">int</span>           model = <a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v);
01524   <span class="keywordtype">int</span>           i;
01525   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps;
01526   description-&gt;<a class="code" href="structstp__parameter__t.html#o4">p_type</a> = <a class="code" href="group__vars.html#gga132a16">STP_PARAMETER_TYPE_INVALID</a>;
01527 
01528   <span class="keywordflow">if</span> (name == NULL)
01529     <span class="keywordflow">return</span>;
01530 
01531   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"pcl_parameters(): Name = %s\n"</span>, name);
01532 
01533   caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(model);
<a name="l01534"></a><a class="code" href="print-pcl_8c.html#a133">01534</a> 
01535   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Printer model = %d\n"</span>, model);
01536   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"PageWidth = %d, PageHeight = %d\n"</span>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o1">custom_max_width</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o2">custom_max_height</a>);
01537   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"MinPageWidth = %d, MinPageHeight = %d\n"</span>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o3">custom_min_width</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o4">custom_min_height</a>);
01538   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Normal Margins: top = %d, bottom = %d, left = %d, right = %d\n"</span>,
01539     caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o1">bottom_margin</a>,
01540     caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o3">right_margin</a>);
01541   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"A4 Margins: top = %d, bottom = %d, left = %d, right = %d\n"</span>,
01542     caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o1">bottom_margin</a>,
01543     caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o3">right_margin</a>);
01544   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Resolutions: %d\n"</span>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o5">resolutions</a>);
01545   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"ColorType = %d, PrinterType = %d\n"</span>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a>, caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a>);
<a name="l01546"></a><a class="code" href="print-pcl_8c.html#a134">01546</a> 
01547   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a113">float_parameter_count</a>; i++)
01548     <span class="keywordflow">if</span> (strcmp(name, float_parameters[i].param.name) == 0)
01549       {
01550         <a class="code" href="group__vars.html#ga75">stp_fill_parameter_settings</a>(description,
01551                                     &amp;(<a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[i].param));
01552         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.dbl = <a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[i].<a class="code" href="structfloat__param__t.html#o3">defval</a>;
01553         description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.dbl.upper = <a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[i].<a class="code" href="structfloat__param__t.html#o2">max</a>;
01554         description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.dbl.lower = <a class="code" href="print-pcl_8c.html#a112">float_parameters</a>[i].<a class="code" href="structfloat__param__t.html#o1">min</a>;
01555       }
01556 
01557   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a111">the_parameter_count</a>; i++)
01558     <span class="keywordflow">if</span> (strcmp(name, the_parameters[i].name) == 0)
01559       {
01560         <a class="code" href="group__vars.html#ga75">stp_fill_parameter_settings</a>(description, &amp;(the_parameters[i]));
01561         <span class="keywordflow">break</span>;
01562       }
01563   description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str = NULL;
01564 
01565   <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"PageSize"</span>) == 0)
01566     {
01567       <span class="keywordtype">int</span> papersizes = <a class="code" href="group__papersize.html#ga0">stp_known_papersizes</a>();
01568       description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01569       <span class="keywordflow">for</span> (i = 0; i &lt; papersizes; i++)
01570         {
01571           <span class="keyword">const</span> <a class="code" href="structstp__papersize__t.html">stp_papersize_t</a> *pt = <a class="code" href="group__papersize.html#ga10">stp_get_papersize_by_index</a>(i);
01572           <span class="keywordflow">if</span> (strlen(pt-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>) &gt; 0 &amp;&amp; <a class="code" href="print-pcl_8c.html#a132">pcl_papersize_valid</a>(pt, model))
01573             <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01574                                        pt-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>, pt-&gt;<a class="code" href="structstp__papersize__t.html#o1">text</a>);
01575         }
01576       description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str =
01577         <a class="code" href="string-list_8c.html#a6">stp_string_list_param</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, 0)-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01578     }
01579   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"MediaType"</span>) == 0)
01580   {
01581     description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01582     <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o11">paper_types</a>[0] != -1)
01583       {
01584         <span class="keywordflow">for</span> (i=0; (i &lt; <a class="code" href="print-pcl_8c.html#a37">NUM_PRINTER_PAPER_TYPES</a>) &amp;&amp; (caps-&gt;<a class="code" href="structpcl__cap__t.html#o11">paper_types</a>[i] != -1); i++)
01585           <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01586                                     <a class="code" href="print-pcl_8c.html#a128">pcl_val_to_string</a>(caps-&gt;<a class="code" href="structpcl__cap__t.html#o11">paper_types</a>[i],
01587                                                       pcl_media_types,
01588                                                       NUM_PRINTER_PAPER_TYPES),
01589                                     <a class="code" href="print-pcl_8c.html#a129">pcl_val_to_text</a>(caps-&gt;<a class="code" href="structpcl__cap__t.html#o11">paper_types</a>[i],
01590                                                     pcl_media_types,
01591                                                     NUM_PRINTER_PAPER_TYPES));
01592         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str =
01593           <a class="code" href="string-list_8c.html#a6">stp_string_list_param</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, 0)-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01594       }
01595     <span class="keywordflow">else</span>
01596       description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;
01597   }
01598   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"InputSlot"</span>) == 0)
01599   {
01600     description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01601     <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o12">paper_sources</a>[0] != -1)
01602       {
01603         <span class="keywordflow">for</span> (i=0; (i &lt; <a class="code" href="print-pcl_8c.html#a52">NUM_PRINTER_PAPER_SOURCES</a>) &amp;&amp; (caps-&gt;<a class="code" href="structpcl__cap__t.html#o12">paper_sources</a>[i] != -1); i++)
01604           <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01605                                     <a class="code" href="print-pcl_8c.html#a128">pcl_val_to_string</a>(caps-&gt;<a class="code" href="structpcl__cap__t.html#o12">paper_sources</a>[i],
01606                                                       pcl_media_sources,
01607                                                       NUM_PRINTER_PAPER_SOURCES),
01608                                     <a class="code" href="print-pcl_8c.html#a129">pcl_val_to_text</a>(caps-&gt;<a class="code" href="structpcl__cap__t.html#o12">paper_sources</a>[i],
01609                                                     pcl_media_sources,
01610                                                     NUM_PRINTER_PAPER_SOURCES));
01611         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str =
01612           <a class="code" href="string-list_8c.html#a6">stp_string_list_param</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, 0)-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01613       }
01614     <span class="keywordflow">else</span>
01615       description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;
01616   }
01617   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"Resolution"</span>) == 0)
01618   {
01619     description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01620     description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str = NULL;
01621     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a60">NUM_RESOLUTIONS</a>; i++)
01622       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o5">resolutions</a> &amp; <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o2">pcl_code</a>)
01623         {
01624           <span class="keywordflow">if</span> (<a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o2">pcl_code</a> &gt;= <a class="code" href="print-pcl_8c.html#a54">PCL_RES_300_300</a> &amp;&amp;
01625               description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str == NULL)
01626             description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str =
01627               <a class="code" href="print-pcl_8c.html#a128">pcl_val_to_string</a>(pcl_resolutions[i].pcl_code,
01628                                 pcl_resolutions, NUM_RESOLUTIONS);
01629           <a class="code" href="string-list_8h.html#a7">stp_string_list_add_string</a>
01630             (description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01631              <a class="code" href="print-pcl_8c.html#a128">pcl_val_to_string</a>(pcl_resolutions[i].pcl_code,
01632                                pcl_resolutions, NUM_RESOLUTIONS),
01633              <a class="code" href="print-pcl_8c.html#a129">pcl_val_to_text</a>(pcl_resolutions[i].pcl_code,
01634                              pcl_resolutions, NUM_RESOLUTIONS));
01635         }
01636     <span class="keywordflow">if</span> (description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str == NULL)
01637       <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"No default resolution set!\n"</span>);
01638   }
01639   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"InkType"</span>) == 0)
01640   {
01641     description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01642     <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a65">PCL_COLOR_CMYKcm</a>)
01643     {
01644       description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str = <a class="code" href="print-pcl_8c.html#a118">ink_types</a>[0].<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01645       <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01646                                ink_types[0].name,<a class="code" href="group__intl__internal.html#ga5">_</a>(ink_types[0].text));
01647       <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01648                                ink_types[1].name,<a class="code" href="group__intl__internal.html#ga5">_</a>(ink_types[1].text));
01649     }
01650     <span class="keywordflow">else</span>
01651       description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;
01652   }
01653   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"Duplex"</span>) == 0)
01654   {
01655     <span class="keywordtype">int</span> offer_duplex=0;
01656 
01657     description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01658 
01659 <span class="comment">/*</span>
01660 <span class="comment"> * Don't offer the Duplex/Tumble options if the JobMode parameter is</span>
01661 <span class="comment"> * set to "Page" Mode.</span>
01662 <span class="comment"> * "Page" mode is set by the Gimp Plugin, which only outputs one page at a</span>
01663 <span class="comment"> * time, so Duplex/Tumble is meaningless.</span>
01664 <span class="comment"> */</span>
01665 
01666     <span class="keywordflow">if</span> (<a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"JobMode"</span>))
01667         offer_duplex = strcmp(<a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"JobMode"</span>), <span class="stringliteral">"Page"</span>);
01668     <span class="keywordflow">else</span>
01669      offer_duplex=1;
01670 
01671     <span class="keywordflow">if</span> (offer_duplex)
01672     {
01673       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>)
01674       {
01675         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str = <a class="code" href="print-pcl_8c.html#a119">duplex_types</a>[0].<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01676         <span class="keywordflow">for</span> (i=0; i &lt; <a class="code" href="print-pcl_8c.html#a75">NUM_DUPLEX</a>; i++)
01677         {
01678           <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str,
01679                                duplex_types[i].name,<a class="code" href="group__intl__internal.html#ga5">_</a>(duplex_types[i].text));
01680         }
01681       }
01682       <span class="keywordflow">else</span>
01683         description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;     <span class="comment">/* Not supported by printer */</span>
01684     }
01685     <span class="keywordflow">else</span>
01686       description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;       <span class="comment">/* Not in "Job" mode */</span>
01687   }
01688   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"CyanDensity"</span>) == 0 ||
01689            strcmp(name, <span class="stringliteral">"MagentaDensity"</span>) == 0 ||
01690            strcmp(name, <span class="stringliteral">"YellowDensity"</span>) == 0 ||
01691            strcmp(name, <span class="stringliteral">"BlackDensity"</span>) == 0)
01692     {
01693       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> != <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a> &amp;&amp;
01694           <a class="code" href="group__vars.html#ga100">stp_check_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>, STP_PARAMETER_DEFAULTED) &amp;&amp;
01695           strcmp(<a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>), <span class="stringliteral">"Color"</span>) == 0)
01696         description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 1;
01697       <span class="keywordflow">else</span>
01698         description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;
01699     }
01700   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"LightCyanTransition"</span>) == 0 ||
01701            strcmp(name, <span class="stringliteral">"LightMagentaTransition"</span>) == 0)
01702     {
01703       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a65">PCL_COLOR_CMYKcm</a> &amp;&amp;
01704           <a class="code" href="group__vars.html#ga100">stp_check_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>, STP_PARAMETER_DEFAULTED) &amp;&amp;
01705           strcmp(<a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>), <span class="stringliteral">"Color"</span>) == 0)
01706         description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 1;
01707       <span class="keywordflow">else</span>
01708         description-&gt;<a class="code" href="structstp__parameter__t.html#o8">is_active</a> = 0;
01709     }
01710   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"InkChannels"</span>) == 0)
01711     {
01712       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a65">PCL_COLOR_CMYKcm</a>)
01713         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.integer = 6;
01714       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> == <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>)
01715         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.integer = 1;
01716       <span class="keywordflow">else</span>
01717         description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.integer = 4;
01718       description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.integer.lower = -1;
01719       description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.integer.upper = -1;
01720     }
01721   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">"PrintingMode"</span>) == 0)
01722     {
01723       description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
01724       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> != <a class="code" href="print-pcl_8c.html#a61">PCL_COLOR_NONE</a>)
01725         <a class="code" href="string-list_8h.html#a7">stp_string_list_add_string</a>
01726           (description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, <span class="stringliteral">"Color"</span>, <a class="code" href="group__intl__internal.html#ga5">_</a>(<span class="stringliteral">"Color"</span>));
01727       <a class="code" href="string-list_8h.html#a7">stp_string_list_add_string</a>
01728         (description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, <span class="stringliteral">"BW"</span>, <a class="code" href="group__intl__internal.html#ga5">_</a>(<span class="stringliteral">"Black and White"</span>));
01729       description-&gt;<a class="code" href="structstp__parameter__t.html#o26">deflt</a>.str =
01730         <a class="code" href="string-list_8c.html#a6">stp_string_list_param</a>(description-&gt;<a class="code" href="structstp__parameter__t.html#o18">bounds</a>.str, 0)-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>;
01731     }
01732 }
01733 
01734 
01735 <span class="comment">/*</span>
01736 <span class="comment"> * 'pcl_imageable_area()' - Return the imageable area of the page.</span>
01737 <span class="comment"> */</span>
01738 <span class="keyword">static</span> <span class="keywordtype">void</span>
01739 <a class="code" href="print-pcl_8c.html#a135">internal_imageable_area</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v,     <span class="comment">/* I */</span>
01740                         <span class="keywordtype">int</span>  use_paper_margins,
01741                         <span class="keywordtype">int</span>  *left,     <span class="comment">/* O - Left position in points */</span>
01742                         <span class="keywordtype">int</span>  *right,    <span class="comment">/* O - Right position in points */</span>
01743                         <span class="keywordtype">int</span>  *bottom,   <span class="comment">/* O - Bottom position in points */</span>
01744                         <span class="keywordtype">int</span>  *top)      <span class="comment">/* O - Top position in points */</span>
01745 {
01746   <span class="keywordtype">int</span>   width, height;                  <span class="comment">/* Size of page */</span>
01747   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps;                <span class="comment">/* Printer caps */</span>
01748   <span class="keywordtype">int</span>   pcl_media_size;                 <span class="comment">/* Converted media size */</span>
01749   <span class="keyword">const</span> <span class="keywordtype">char</span> *media_size = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PageSize"</span>);
01750   <span class="keyword">const</span> <a class="code" href="structstp__papersize__t.html">stp_papersize_t</a> *pp = NULL;
01751   <span class="keywordtype">int</span> left_margin = 0;
01752   <span class="keywordtype">int</span> right_margin = 0;
01753   <span class="keywordtype">int</span> bottom_margin = 0;
01754   <span class="keywordtype">int</span> top_margin = 0;
01755 
01756   caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(<a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v));
01757 
01758   <a class="code" href="group__papersize.html#ga13">stp_default_media_size</a>(v, &amp;width, &amp;height);
01759 
01760 <span class="comment">/* If we are using A4 paper, then the margins are different than any</span>
01761 <span class="comment"> * other paper size. This is because HP wanted to have the same printable</span>
01762 <span class="comment"> * width for A4 as for letter. Go figure.</span>
01763 <span class="comment"> */</span>
01764 
<a name="l01765"></a><a class="code" href="print-pcl_8c.html#a135">01765</a>   <span class="keywordflow">if</span> (!media_size)
01766     media_size = <span class="stringliteral">""</span>;
01767   <span class="keywordflow">if</span> (strlen(media_size) == 0 &amp;&amp;
01768       ((pp = <a class="code" href="group__papersize.html#ga12">stp_get_papersize_by_size</a>(<a class="code" href="group__vars.html#ga28">stp_get_page_height</a>(v),
01769                                        <a class="code" href="group__vars.html#ga26">stp_get_page_width</a>(v))) != NULL))
01770     media_size = pp-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>;
01771 
01772   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"pcl_imageable_area(): media_size: '%s'\n"</span>,
01773                media_size);
01774 
01775   pcl_media_size = <a class="code" href="print-pcl_8c.html#a131">pcl_convert_media_size</a>(media_size, <a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v));
01776   <span class="keywordflow">if</span> (media_size)
01777     pp = <a class="code" href="group__papersize.html#ga9">stp_get_papersize_by_name</a>(media_size);
01778   <span class="keywordflow">if</span> (pp &amp;&amp; use_paper_margins)
01779     {
01780       left_margin = pp-&gt;<a class="code" href="structstp__papersize__t.html#o6">left</a>;
01781       right_margin = pp-&gt;<a class="code" href="structstp__papersize__t.html#o8">right</a>;
01782       bottom_margin = pp-&gt;<a class="code" href="structstp__papersize__t.html#o7">bottom</a>;
01783       top_margin = pp-&gt;<a class="code" href="structstp__papersize__t.html#o5">top</a>;
01784     }
01785 
01786   <span class="keywordflow">if</span> (pcl_media_size == <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>)
01787   {
01788     left_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(left_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>);
01789     right_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(right_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o3">right_margin</a>);
01790     top_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(top_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>);
01791     bottom_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(bottom_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o1">bottom_margin</a>);
01792   }
01793   <span class="keywordflow">else</span>
01794   {
01795     left_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(left_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>);
01796     right_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(right_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o3">right_margin</a>);
01797     top_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(top_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>);
01798     bottom_margin = <a class="code" href="print-canon_8c.html#a7">MAX</a>(bottom_margin, caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o1">bottom_margin</a>);
01799   }
01800   *left =       left_margin;
01801   *right =      width - right_margin;
01802   *top =        top_margin;
01803   *bottom =     height - bottom_margin;
01804 }
01805 
01806 <span class="keyword">static</span> <span class="keywordtype">void</span>
01807 <a class="code" href="print-pcl_8c.html#a136">pcl_imageable_area</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v,     <span class="comment">/* I */</span>
01808                    <span class="keywordtype">int</span>  *left,          <span class="comment">/* O - Left position in points */</span>
01809                    <span class="keywordtype">int</span>  *right,         <span class="comment">/* O - Right position in points */</span>
01810                    <span class="keywordtype">int</span>  *bottom,        <span class="comment">/* O - Bottom position in points */</span>
01811                    <span class="keywordtype">int</span>  *top)           <span class="comment">/* O - Top position in points */</span>
01812 {
01813   <a class="code" href="print-pcl_8c.html#a135">internal_imageable_area</a>(v, 1, left, right, bottom, top);
01814 }
01815 
01816 <span class="keyword">static</span> <span class="keywordtype">void</span>
01817 <a class="code" href="print-pcl_8c.html#a137">pcl_limit</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v,                  <span class="comment">/* I */</span>
01818           <span class="keywordtype">int</span> *width,
01819           <span class="keywordtype">int</span> *height,
01820           <span class="keywordtype">int</span> *min_width,
01821           <span class="keywordtype">int</span> *min_height)
01822 {
01823   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps= <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(<a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v));
01824   *width =      caps-&gt;<a class="code" href="structpcl__cap__t.html#o1">custom_max_width</a>;
01825   *height =     caps-&gt;<a class="code" href="structpcl__cap__t.html#o2">custom_max_height</a>;
01826   *min_width =  caps-&gt;<a class="code" href="structpcl__cap__t.html#o3">custom_min_width</a>;
01827   *min_height = caps-&gt;<a class="code" href="structpcl__cap__t.html#o4">custom_min_height</a>;
01828 }
01829 
01830 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
01831 <a class="code" href="print-pcl_8c.html#a138">pcl_describe_output</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
01832 {
<a name="l01833"></a><a class="code" href="print-pcl_8c.html#a136">01833</a>   <span class="keywordtype">int</span> printing_color = 0;
01834   <span class="keywordtype">int</span> model = <a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v);
01835   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(model);
01836   <span class="keyword">const</span> <span class="keywordtype">char</span> *print_mode = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>);
01837   <span class="keywordtype">int</span> xdpi, ydpi;
01838 
01839   <a class="code" href="print-pcl_8c.html#a126">pcl_describe_resolution</a>(v, &amp;xdpi, &amp;ydpi);
01840   <span class="keywordflow">if</span> (!print_mode || strcmp(print_mode, <span class="stringliteral">"Color"</span>) == 0)
01841     printing_color = 1;
01842   <span class="keywordflow">if</span> (((caps-&gt;<a class="code" href="structpcl__cap__t.html#o5">resolutions</a> &amp; <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>) == <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>) &amp;&amp;
<a name="l01843"></a><a class="code" href="print-pcl_8c.html#a137">01843</a>       printing_color &amp;&amp; xdpi == 600 &amp;&amp; ydpi == 600)
01844     printing_color = 0;
01845   <span class="keywordflow">if</span> (printing_color)
01846     {
01847       <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>) == <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>)
01848         <span class="keywordflow">return</span> <span class="stringliteral">"CMY"</span>;
01849       <span class="keywordflow">else</span>
01850         <span class="keywordflow">return</span> <span class="stringliteral">"CMYK"</span>;
01851     }
01852   <span class="keywordflow">else</span>
01853     <span class="keywordflow">return</span> <span class="stringliteral">"Grayscale"</span>;
01854 }
01855 
01856 <span class="comment">/*</span>
<a name="l01857"></a><a class="code" href="print-pcl_8c.html#a138">01857</a> <span class="comment"> * 'pcl_print()' - Print an image to an HP printer.</span>
01858 <span class="comment"> */</span>
01859 
01860 <span class="keyword">static</span> <span class="keywordtype">void</span>
01861 <a class="code" href="print-pcl_8c.html#a139">pcl_printfunc</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v)
01862 {
01863   <a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a> *pd = (<a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a> *) <a class="code" href="group__vars.html#ga20">stp_get_component_data</a>(v, <span class="stringliteral">"Driver"</span>);
01864   <span class="keywordtype">int</span> do_blank = pd-&gt;<a class="code" href="structpcl__privdata__t.html#o0">do_blank</a>;
01865   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *black = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a0">STP_ECOLOR_K</a>, 0);
01866   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cyan = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a1">STP_ECOLOR_C</a>, 0);
01867   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lcyan = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a1">STP_ECOLOR_C</a>, 1);
01868   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *magenta = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a2">STP_ECOLOR_M</a>, 0);
01869   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lmagenta = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a2">STP_ECOLOR_M</a>, 1);
01870   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *yellow = <a class="code" href="dither-inks_8c.html#a1">stp_dither_get_channel</a>(v, <a class="code" href="dither_8h.html#a3">STP_ECOLOR_Y</a>, 0);
01871   <span class="keywordtype">int</span> len_c = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a1">STP_ECOLOR_C</a>, 0);
01872   <span class="keywordtype">int</span> len_lc = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a1">STP_ECOLOR_C</a>, 1);
01873   <span class="keywordtype">int</span> len_m = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a2">STP_ECOLOR_M</a>, 0);
01874   <span class="keywordtype">int</span> len_lm = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a2">STP_ECOLOR_M</a>, 1);
01875   <span class="keywordtype">int</span> len_y = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a3">STP_ECOLOR_Y</a>, 0);
01876   <span class="keywordtype">int</span> len_k = <a class="code" href="dither-main_8c.html#a16">stp_dither_get_last_position</a>(v, <a class="code" href="dither_8h.html#a0">STP_ECOLOR_K</a>, 0);
01877   <span class="keywordtype">int</span> is_blank = (do_blank &amp;&amp; (len_c == -1) &amp;&amp; (len_lc == -1) &amp;&amp;
01878                   (len_m == -1) &amp;&amp; (len_lm == -1) &amp;&amp; (len_y == -1) &amp;&amp;
01879                   (len_k == -1));
01880   <span class="keywordtype">int</span> height = pd-&gt;<a class="code" href="structpcl__privdata__t.html#o7">height</a>;
01881   <span class="keyword">const</span> <span class="keywordtype">char</span>    *print_mode = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>);
01882 
01883   <span class="keywordflow">if</span> (is_blank &amp;&amp; (pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a> != 0))       <span class="comment">/* repeated blank line */</span>
01884     {
01885       pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>++;
01886     }
<a name="l01887"></a><a class="code" href="print-pcl_8c.html#a139">01887</a>   <span class="keywordflow">else</span>                          <span class="comment">/* Not blank, or is first one */</span>
01888     {
01889       <span class="keywordflow">if</span> (! is_blank)
01890         {
01891           <span class="keywordflow">if</span> (pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a> &gt; 1)              <span class="comment">/* Output accumulated lines */</span>
01892             {
01893               pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>--;                <span class="comment">/* correct for one already output */</span>
01894               <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(<a class="code" href="group__util.html#ga35">STP_DBG_PCL</a>, <span class="stringliteral">"Blank Lines = %d\n"</span>, pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>);
01895               <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*b%dY"</span>, pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>);
01896               pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>=0;
01897             }
01898           <span class="keywordflow">else</span>;
01899         }
01900       <span class="keywordflow">else</span>
01901         {
01902           pd-&gt;<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>++;
01903         }
01904 
01905       <span class="keywordflow">if</span> (pd-&gt;<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>)
01906         {
01907           <span class="comment">/*</span>
01908 <span class="comment">           * 4-level (CRet) dithers...</span>
01909 <span class="comment">           */</span>
01910           <span class="keywordflow">if</span> (strcmp(print_mode, <span class="stringliteral">"BW"</span>) == 0)
01911             {
01912               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black + height / 2, height / 2, 0);
01913               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black, height / 2, 1);
01914             }
01915           <span class="keywordflow">else</span>
01916             {
01917               <span class="keywordflow">if</span>(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
01918                 {
01919                   <span class="comment">/*        (*(pd-&gt;writefunc))(v, black + height / 2, 0, 0); */</span>
01920                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black, height/2, 0);
01921                 }
01922               <span class="keywordflow">else</span>
01923                 {
01924                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black + height / 2, height / 2, 0);
01925                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black, height / 2, 0);
01926                 }
01927               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, cyan + height / 2, height / 2, 0);
01928               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, cyan, height / 2, 0);
01929               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, magenta + height / 2, height / 2, 0);
01930               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, magenta, height / 2, 0);
01931               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, yellow + height / 2, height / 2, 0);
01932               <span class="keywordflow">if</span> (pd-&gt;<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)
01933                 {
01934                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, yellow, height / 2, 0);
01935                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lcyan + height / 2, height / 2, 0);
01936                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lcyan, height / 2, 0);
01937                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lmagenta + height / 2, height / 2, 0);
01938                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lmagenta, height / 2, 1);               <span class="comment">/* Last plane set on light magenta */</span>
01939                 }
01940               <span class="keywordflow">else</span>
01941                 (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, yellow, height / 2, 1);           <span class="comment">/* Last plane set on yellow */</span>
01942             }
01943         }
01944       <span class="keywordflow">else</span>
01945         {
01946           <span class="comment">/*</span>
01947 <span class="comment">           * Standard 2-level dithers...</span>
01948 <span class="comment">           */</span>
01949 
01950           <span class="keywordflow">if</span> (strcmp(print_mode, <span class="stringliteral">"BW"</span>) == 0)
01951             {
01952               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black, height, 1);
01953             }
01954           <span class="keywordflow">else</span>
01955             {
01956               <span class="keywordflow">if</span> (black != NULL)
01957                 (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, black, height, 0);
01958               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, cyan, height, 0);
01959               (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, magenta, height, 0);
01960               <span class="keywordflow">if</span> (pd-&gt;<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)
01961                 {
01962                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, yellow, height, 0);
01963                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lcyan, height, 0);
01964                   (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, lmagenta, height, 1);           <span class="comment">/* Last plane set on light magenta */</span>
01965                 }
01966               <span class="keywordflow">else</span>
01967                 (*(pd-&gt;<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a>))(v, yellow, height, 1);               <span class="comment">/* Last plane set on yellow */</span>
01968             }
01969         }
01970     }
01971 }
01972 
01973 <span class="keyword">static</span> <span class="keywordtype">double</span>
01974 <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <span class="keyword">const</span> <span class="keywordtype">char</span> *param)
01975 {
01976   <span class="keywordflow">if</span> (param &amp;&amp; <a class="code" href="group__vars.html#ga102">stp_check_float_parameter</a>(v, param, STP_PARAMETER_ACTIVE))
01977     <span class="keywordflow">return</span> <a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(v, param);
01978   <span class="keywordflow">else</span>
01979     <span class="keywordflow">return</span> 1.0;
01980 }
01981 
01982 <span class="keyword">static</span> <span class="keywordtype">int</span>
01983 <a class="code" href="print-pcl_8c.html#a141">pcl_do_print</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <a class="code" href="structstp__image.html">stp_image_t</a> *image)
01984 {
01985   <span class="keywordtype">int</span> i;
01986   <a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a> privdata;
01987   <span class="keywordtype">int</span>           status = 1;
01988   <span class="keywordtype">int</span>           model = <a class="code" href="group__printer.html#ga23">stp_get_model_id</a>(v);
01989   <span class="keyword">const</span> <span class="keywordtype">char</span>    *resolution = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"Resolution"</span>);
01990   <span class="keyword">const</span> <span class="keywordtype">char</span>    *media_size = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PageSize"</span>);
01991   <span class="keyword">const</span> <span class="keywordtype">char</span>    *media_type = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"MediaType"</span>);
01992   <span class="keyword">const</span> <span class="keywordtype">char</span>    *media_source = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"InputSlot"</span>);
01993   <span class="keyword">const</span> <span class="keywordtype">char</span>    *ink_type = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"InkType"</span>);
01994   <span class="keyword">const</span> <span class="keywordtype">char</span>    *print_mode = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>);
01995   <span class="keyword">const</span> <span class="keywordtype">char</span>    *duplex_mode = <a class="code" href="group__vars.html#ga36">stp_get_string_parameter</a>(v, <span class="stringliteral">"Duplex"</span>);
01996   <span class="keywordtype">int</span>           page_number = <a class="code" href="group__vars.html#ga58">stp_get_int_parameter</a>(v, <span class="stringliteral">"PageNumber"</span>);
01997   <span class="keywordtype">int</span>           printing_color = 0;
01998   <span class="keywordtype">int</span>           top = <a class="code" href="group__vars.html#ga20">stp_get_top</a>(v);
01999   <span class="keywordtype">int</span>           left = <a class="code" href="group__vars.html#ga18">stp_get_left</a>(v);
<a name="l02000"></a><a class="code" href="print-pcl_8c.html#a140">02000</a>   <span class="keywordtype">int</span>           y;              <span class="comment">/* Looping vars */</span>
02001   <span class="keywordtype">int</span>           xdpi, ydpi;     <span class="comment">/* Resolution */</span>
02002   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *black,         <span class="comment">/* Black bitmap data */</span>
02003                 *cyan,          <span class="comment">/* Cyan bitmap data */</span>
02004                 *magenta,       <span class="comment">/* Magenta bitmap data */</span>
02005                 *yellow,        <span class="comment">/* Yellow bitmap data */</span>
02006                 *lcyan,         <span class="comment">/* Light Cyan bitmap data */</span>
02007                 *lmagenta;      <span class="comment">/* Light Magenta bitmap data */</span>
02008   <span class="keywordtype">int</span>           page_width,     <span class="comment">/* Width of page */</span>
<a name="l02009"></a><a class="code" href="print-pcl_8c.html#a141">02009</a>                 page_height,    <span class="comment">/* Height of page */</span>
02010                 page_left,
02011                 page_top,
02012                 page_right,
02013                 page_bottom,
02014                 out_width,      <span class="comment">/* Width of image on page */</span>
02015                 out_height,     <span class="comment">/* Height of image on page */</span>
02016                 out_channels,   <span class="comment">/* Output bytes per pixel */</span>
02017                 errdiv,         <span class="comment">/* Error dividend */</span>
02018                 errmod,         <span class="comment">/* Error modulus */</span>
02019                 errval,         <span class="comment">/* Current error value */</span>
02020                 errline,        <span class="comment">/* Current raster line */</span>
02021                 errlast;        <span class="comment">/* Last raster line loaded */</span>
02022   <span class="keywordtype">unsigned</span>      zero_mask;
02023   <span class="keywordtype">int</span>           image_height,
02024                 image_width;
02025   <span class="keyword">const</span> <a class="code" href="structpcl__cap__t.html">pcl_cap_t</a> *caps;                <span class="comment">/* Printer capabilities */</span>
02026   <span class="keywordtype">int</span>           planes = 3;     <span class="comment">/* # of output planes */</span>
02027   <span class="keywordtype">int</span>           pcl_media_size; <span class="comment">/* PCL media size code */</span>
02028   <span class="keyword">const</span> <span class="keywordtype">double</span> *dot_sizes_use;
02029   <span class="keyword">const</span> <a class="code" href="structstp__papersize__t.html">stp_papersize_t</a> *pp;
02030   <span class="keywordtype">int</span>           the_top_margin, <span class="comment">/* Corrected top margin */</span>
02031                 the_left_margin;        <span class="comment">/* Corrected left margin */</span>
02032   <a class="code" href="structstp__curve.html">stp_curve_t</a>   *lum_adjustment;
02033   <a class="code" href="structstp__curve.html">stp_curve_t</a>   *hue_adjustment;
02034   <span class="keywordtype">double</span> density;
02035 
02036   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga34">stp_verify</a>(v))
02037     {
02038       <a class="code" href="print-util_8c.html#a18">stp_eprintf</a>(v, <span class="stringliteral">"Print options not verified; cannot print.\n"</span>);
02039       <span class="keywordflow">return</span> 0;
02040     }
02041   <span class="keywordflow">if</span> (strcmp(print_mode, <span class="stringliteral">"Color"</span>) == 0)
02042     printing_color = 1;
02043 
02044   caps = <a class="code" href="print-pcl_8c.html#a130">pcl_get_model_capabilities</a>(model);
02045 
02046  <span class="comment">/*</span>
02047 <span class="comment">  * Setup a read-only pixel region for the entire image...</span>
02048 <span class="comment">  */</span>
02049 
02050   <a class="code" href="group__image.html#ga0">stp_image_init</a>(image);
02051   image_height = <a class="code" href="group__image.html#ga3">stp_image_height</a>(image);
02052   image_width = <a class="code" href="group__image.html#ga2">stp_image_width</a>(image);
02053 
02054  <span class="comment">/*</span>
02055 <span class="comment">  * Figure out the output resolution...</span>
02056 <span class="comment">  */</span>
02057 
02058   xdpi = 0;
02059   ydpi = 0;
02060   <span class="keywordflow">if</span> (resolution)
02061     {
02062       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="print-pcl_8c.html#a60">NUM_RESOLUTIONS</a>; i++)
02063         {
02064           <span class="keywordflow">if</span> (!strcmp(resolution, pcl_resolutions[i].pcl_name))
02065             {
02066               xdpi = <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o3">p0</a>;
02067               ydpi = <a class="code" href="print-pcl_8c.html#a83">pcl_resolutions</a>[i].<a class="code" href="structpcl__t.html#o4">p1</a>;
02068               <span class="keywordflow">break</span>;
02069             }
02070         }
02071     }
02072 
02073   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL,<span class="stringliteral">"pcl: resolution=%dx%d\n"</span>,xdpi,ydpi);
02074   <span class="keywordflow">if</span> (xdpi == 0 || ydpi == 0)
02075     <span class="keywordflow">return</span> 0;
02076 
02077  <span class="comment">/*</span>
02078 <span class="comment">  * Choose the correct color conversion function...</span>
02079 <span class="comment">  */</span>
02080   <span class="keywordflow">if</span> (((caps-&gt;<a class="code" href="structpcl__cap__t.html#o5">resolutions</a> &amp; <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>) == <a class="code" href="print-pcl_8c.html#a56">PCL_RES_600_600_MONO</a>) &amp;&amp;
02081       printing_color &amp;&amp; xdpi == 600 &amp;&amp; ydpi == 600)
02082     {
02083       <a class="code" href="print-util_8c.html#a18">stp_eprintf</a>(v, <span class="stringliteral">"600x600 resolution only available in MONO\n"</span>);
02084       <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(v, <span class="stringliteral">"PrintingMode"</span>, <span class="stringliteral">"BW"</span>);
02085       printing_color = 0;
02086     }
02087 
02088   privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> = (xdpi &gt;= 300 &amp;&amp;
02089              ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a64">PCL_COLOR_CMYK4</a>) == <a class="code" href="print-pcl_8c.html#a64">PCL_COLOR_CMYK4</a>));
02090   privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a> = (xdpi &gt;= 600 &amp;&amp; ydpi &gt;= 600 &amp;&amp;
02091               ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a66">PCL_COLOR_CMYK4b</a>) == <a class="code" href="print-pcl_8c.html#a66">PCL_COLOR_CMYK4b</a>) &amp;&amp;
02092               printing_color);
02093   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>){
02094     privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> = 1;
02095     dot_sizes_use=<a class="code" href="print-pcl_8c.html#a115">dot_sizes_cret</a>;
02096   }<span class="keywordflow">else</span>{
02097     dot_sizes_use=<a class="code" href="print-pcl_8c.html#a114">dot_sizes</a>;
02098   }
02099 
02100   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"privdata.do_cret = %d\n"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>);
02101   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"privdata.do_cretb = %d\n"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>);
02102 
02103   <span class="keywordflow">if</span> (ink_type)
02104     privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a> = (strcmp(ink_type, <span class="stringliteral">"Photo"</span>) == 0);
02105   <span class="keywordflow">else</span>
02106     privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a> = 0;
02107 
02108   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"privdata.do_6color = %d\n"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>);
02109 
02110  <span class="comment">/*</span>
02111 <span class="comment">  * Compute the output size...</span>
02112 <span class="comment">  */</span>
02113 
02114   out_width = <a class="code" href="group__vars.html#ga22">stp_get_width</a>(v);
02115   out_height = <a class="code" href="group__vars.html#ga24">stp_get_height</a>(v);
02116 
02117   <a class="code" href="print-pcl_8c.html#a135">internal_imageable_area</a>(v, 0, &amp;page_left, &amp;page_right,
02118                           &amp;page_bottom, &amp;page_top);
02119   left -= page_left;
02120   top -= page_top;
02121   page_width = page_right - page_left;
02122   page_height = page_bottom - page_top;
02123 
02124   image_height = <a class="code" href="group__image.html#ga3">stp_image_height</a>(image);
02125   image_width = <a class="code" href="group__image.html#ga2">stp_image_width</a>(image);
02126 
02127  <span class="comment">/*</span>
02128 <span class="comment">  * Set media size here because it is needed by the margin calculation code.</span>
02129 <span class="comment">  */</span>
02130 
02131   <span class="keywordflow">if</span> (!media_size)
02132     media_size = <span class="stringliteral">""</span>;
02133   <span class="keywordflow">if</span> (strlen(media_size) == 0 &amp;&amp;
02134       ((pp = <a class="code" href="group__papersize.html#ga12">stp_get_papersize_by_size</a>(<a class="code" href="group__vars.html#ga28">stp_get_page_height</a>(v),
02135                                        <a class="code" href="group__vars.html#ga26">stp_get_page_width</a>(v))) != NULL))
02136     media_size = pp-&gt;<a class="code" href="structstp__papersize__t.html#o0">name</a>;
02137 
02138   pcl_media_size = <a class="code" href="print-pcl_8c.html#a131">pcl_convert_media_size</a>(media_size, model);
02139 
02140   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL,<span class="stringliteral">"pcl_media_size = %d, media_size = %s\n"</span>, pcl_media_size, media_size);
02141 
02142  <span class="comment">/*</span>
02143 <span class="comment">  * If the media size requested is unknown, try it as a custom size.</span>
02144 <span class="comment">  *</span>
02145 <span class="comment">  * Warning: The margins may need to be fixed for this!</span>
02146 <span class="comment">  */</span>
02147 
02148   <span class="keywordflow">if</span> (pcl_media_size == -1) {
02149     <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Paper size %s is not directly supported by printer.\n"</span>,
02150       media_size);
02151     <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Trying as custom pagesize (watch the margins!)\n"</span>);
02152     pcl_media_size = <a class="code" href="print-pcl_8c.html#a23">PCL_PAPERSIZE_CUSTOM</a>;                      <span class="comment">/* Custom */</span>
02153   }
02154 
02155   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Duplex: %s, Page_Number: %d\n"</span>, duplex_mode, page_number);
02156   privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a>=0;
02157   privdata.<a class="code" href="structpcl__privdata__t.html#o9">tumble</a>=0;
02158 
02159  <span class="comment">/*</span>
02160 <span class="comment">  * Duplex</span>
02161 <span class="comment">  */</span>
02162 
02163   <span class="keywordflow">if</span> (duplex_mode)
02164     {
02165       <span class="keywordflow">if</span> (caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a74">PCL_PRINTER_DUPLEX</a>)
02166         {
02167           <span class="keywordflow">if</span> ((strcmp(duplex_mode, <span class="stringliteral">"DuplexTumble"</span>) == 0) || (strcmp(duplex_mode, <span class="stringliteral">"DuplexNoTumble"</span>) == 0))
02168             privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a>=1;
02169           <span class="keywordflow">if</span> ((strcmp(duplex_mode, <span class="stringliteral">"DuplexTumble"</span>) == 0))
02170             privdata.<a class="code" href="structpcl__privdata__t.html#o9">tumble</a>=1;
02171         }
02172       <span class="keywordflow">else</span>
02173         <a class="code" href="print-util_8c.html#a20">stp_erprintf</a>(<span class="stringliteral">"pcl: cannot duplex on this hardware.\n"</span>);
02174     }
02175 
02176  <span class="comment">/*</span>
02177 <span class="comment">  * Send PCL initialization commands...</span>
02178 <span class="comment">  */</span>
02179 
02180   <span class="keywordflow">if</span> ((privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a> == 0) || ((page_number &amp; 1) == 0))
02181     {
02182       <span class="keywordtype">int</span> pcl_media_type,       <span class="comment">/* PCL media type code */</span>
02183           pcl_media_source;     <span class="comment">/* PCL media source code */</span>
02184 
02185       <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Normal init\n"</span>);
02186 
02187       <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
02188         <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*rbC"</span>, v);        <span class="comment">/* End raster graphics */</span>
02189       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033E"</span>, v);                             <span class="comment">/* PCL reset */</span>
02190       <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
02191         <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033%%-12345X@PJL ENTER LANGUAGE=PCL3GUI\n"</span>);
02192 
02193       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l6D\033&amp;k12H"</span>,v);          <span class="comment">/* 6 lines per inch, 10 chars per inch */</span>
02194       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l0O"</span>,v);                   <span class="comment">/* Portrait */</span>
02195 
02196       <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;l%dA"</span>, pcl_media_size);      <span class="comment">/* Set media size we calculated above */</span>
02197       <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;l%dP"</span>, <a class="code" href="group__vars.html#ga28">stp_get_page_height</a>(v) / 12);
02198                                                 <span class="comment">/* Length of "forms" in "lines" */</span>
02199       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l0L"</span>, v);                  <span class="comment">/* Turn off perforation skip */</span>
02200       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l0E"</span>, v);                  <span class="comment">/* Reset top margin to 0 */</span>
02201 
02202  <span class="comment">/*</span>
02203 <span class="comment">  * Convert media source string to the code, if specified.</span>
02204 <span class="comment">  */</span>
02205 
02206       <span class="keywordflow">if</span> (media_source &amp;&amp; strlen(media_source) != 0) {
02207         pcl_media_source = <a class="code" href="print-pcl_8c.html#a127">pcl_string_to_val</a>(media_source, pcl_media_sources,
02208                              <span class="keyword">sizeof</span>(pcl_media_sources) / <span class="keyword">sizeof</span>(<a class="code" href="structpcl__t.html">pcl_t</a>));
02209 
02210         <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL,<span class="stringliteral">"pcl_media_source = %d, media_source = %s\n"</span>, pcl_media_source,
02211                media_source);
02212 
02213         <span class="keywordflow">if</span> (pcl_media_source == -1)
02214           <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Unknown media source %s, ignored.\n"</span>, media_source);
02215         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pcl_media_source != <a class="code" href="print-pcl_8c.html#a39">PCL_PAPERSOURCE_STANDARD</a>) {
02216 
02217 <span class="comment">/* Correct the value by taking the modulus */</span>
02218 
02219           pcl_media_source = pcl_media_source % <a class="code" href="print-pcl_8c.html#a38">PAPERSOURCE_MOD</a>;
02220           <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;l%dH"</span>, pcl_media_source);
02221         }
02222       }
02223 
02224  <span class="comment">/*</span>
02225 <span class="comment">  * Convert media type string to the code, if specified.</span>
02226 <span class="comment">  */</span>
02227 
02228       <span class="keywordflow">if</span> (media_type &amp;&amp; strlen(media_type) != 0) {
02229         pcl_media_type = <a class="code" href="print-pcl_8c.html#a127">pcl_string_to_val</a>(media_type, pcl_media_types,
02230                            <span class="keyword">sizeof</span>(pcl_media_types) / <span class="keyword">sizeof</span>(<a class="code" href="structpcl__t.html">pcl_t</a>));
02231 
02232         <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL,<span class="stringliteral">"pcl_media_type = %d, media_type = %s\n"</span>, pcl_media_type,
02233                media_type);
02234 
02235         <span class="keywordflow">if</span> (pcl_media_type == -1) {
02236           <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Unknown media type %s, set to PLAIN.\n"</span>, media_type);
02237           pcl_media_type = <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>;
02238         }
02239 
02240 <span class="comment">/*</span>
02241 <span class="comment"> * The HP812C doesn't like glossy paper being selected when using 600x600</span>
02242 <span class="comment"> * C-RET (PhotoRET II). So we use Premium paper instead.</span>
02243 <span class="comment"> *</span>
02244 <span class="comment"> */</span>
02245 
02246         <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a> &amp;&amp; pcl_media_type == <a class="code" href="print-pcl_8c.html#a33">PCL_PAPERTYPE_GLOSSY</a>) {
02247           <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Media type GLOSSY, set to PREMIUM for PhotoRET II.\n"</span>);
02248           pcl_media_type = <a class="code" href="print-pcl_8c.html#a32">PCL_PAPERTYPE_PREMIUM</a>;
02249         }
02250       }
02251       <span class="keywordflow">else</span>
02252         pcl_media_type = <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>;
02253 
02254  <span class="comment">/*</span>
02255 <span class="comment">  * Set DJ print quality to "best" if resolution &gt;= 300</span>
02256 <span class="comment">  */</span>
02257 
02258       <span class="keywordflow">if</span> ((xdpi &gt;= 300) &amp;&amp; ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a>) == <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a>))
02259       {
02260         <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a>) == <a class="code" href="print-pcl_8c.html#a71">PCL_PRINTER_MEDIATYPE</a>)
02261         {
02262           <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*o1M"</span>, v);                      <span class="comment">/* Quality = presentation */</span>
02263           <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;l%dM"</span>, pcl_media_type);
02264         }
02265         <span class="keywordflow">else</span>
02266         {
02267           <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*r2Q"</span>, v);                      <span class="comment">/* Quality (high) */</span>
02268           <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*o2Q"</span>, v);                      <span class="comment">/* Shingling (4 passes) */</span>
02269 
02270  <span class="comment">/* Depletion depends on media type and cart type. */</span>
02271 
02272           <span class="keywordflow">if</span> ((pcl_media_type == <a class="code" href="print-pcl_8c.html#a30">PCL_PAPERTYPE_PLAIN</a>)
02273            || (pcl_media_type == <a class="code" href="print-pcl_8c.html#a31">PCL_PAPERTYPE_BOND</a>)) {
02274             <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>) == <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>)
02275               <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*o2D"</span>, v);                  <span class="comment">/* Depletion 25% */</span>
02276             <span class="keywordflow">else</span>
02277               <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*o5D"</span>, v);                  <span class="comment">/* Depletion 50% with gamma correction */</span>
02278             }
02279 
02280           <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pcl_media_type == <a class="code" href="print-pcl_8c.html#a32">PCL_PAPERTYPE_PREMIUM</a>)
02281                  || (pcl_media_type == <a class="code" href="print-pcl_8c.html#a33">PCL_PAPERTYPE_GLOSSY</a>)
02282                  || (pcl_media_type == <a class="code" href="print-pcl_8c.html#a34">PCL_PAPERTYPE_TRANS</a>))
02283             <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*o1D"</span>, v);                    <span class="comment">/* Depletion none */</span>
02284         }
02285       }
02286 
02287 <span class="comment">/*</span>
02288 <span class="comment"> * Duplex</span>
02289 <span class="comment"> */</span>
02290 
02291       <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a>)
02292           <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v,<span class="stringliteral">"\033&amp;l%dS"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a> + privdata.<a class="code" href="structpcl__privdata__t.html#o9">tumble</a>);
02293       }
02294     <span class="keywordflow">else</span>
02295       {
02296         <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Back face init\n"</span>);
02297         <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;a2G"</span>, v);
02298       }
02299 
02300 <span class="comment">/*</span>
02301 <span class="comment"> * See if we need to use the CRD (Configure Raster Data) command, because we're</span>
02302 <span class="comment"> * doing something interesting on a DeskJet.</span>
02303 <span class="comment"> * (I hate long complicated if statements, the compiler will sort it out!).</span>
02304 <span class="comment"> */</span>
02305 
02306   privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a> = 0;
02307   <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a>) == <a class="code" href="print-pcl_8c.html#a68">PCL_PRINTER_DJ</a>)
02308     {
02309     <span class="keywordflow">if</span> (xdpi != ydpi)                           <span class="comment">/* Different X and Y Resolutions */</span>
02310       privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a> = 1;
02311     <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>)                       <span class="comment">/* Resolution Enhancement */</span>
02312       privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a> = 1;
02313     <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)                     <span class="comment">/* Photo Ink printing */</span>
02314       privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a> = 1;
02315     <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a>)                        <span class="comment">/* Duplexing */</span>
02316       privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a> = 1;
02317     }
02318 
02319   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o10">use_crd</a>)
02320                                                 <span class="comment">/* Set resolution using CRD */</span>
02321   {
02322 
02323 <span class="comment">/*</span>
02324 <span class="comment"> * If duplexing on a CRD printer, we need to use the (re)load media command.</span>
02325 <span class="comment"> */</span>
02326 
02327     <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a>)
02328       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l-2H"</span>,v);                  <span class="comment">/* Load media */</span>
02329 
02330    <span class="comment">/*</span>
02331 <span class="comment">    * Send configure image data command with horizontal and</span>
02332 <span class="comment">    * vertical resolutions as well as a color count...</span>
02333 <span class="comment">    */</span>
02334 
02335     <span class="keywordflow">if</span> (printing_color)
02336       <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>) == <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>)
02337         planes = 3;
02338       <span class="keywordflow">else</span>
02339         <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)
02340           planes = 6;
02341         <span class="keywordflow">else</span>
02342           planes = 4;
02343     <span class="keywordflow">else</span>
02344       planes = 1;
02345 
02346     <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*g%dW"</span>, 2 + (planes * 6));
02347     <a class="code" href="group__util.html#ga11">stp_putc</a>(2, v);                             <span class="comment">/* Format 2 (Complex Direct Planar) */</span>
02348     <a class="code" href="group__util.html#ga11">stp_putc</a>(planes, v);                                <span class="comment">/* # output planes */</span>
02349 
02350     <span class="keywordflow">if</span> (planes != 3) {          <span class="comment">/* Black resolution */</span>
02351       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a> || !privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>) ? 2 : 4);
02352     }
02353 
02354     <span class="keywordflow">if</span> (planes != 1) {          <span class="comment">/* Cyan, magenta, yellow resolutions */</span>
02355       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> ? 4 : 2);
02356       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> ? 4 : 2);
02357       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> ? 4 : 2);
02358     }
02359     <span class="keywordflow">if</span> (planes == 6)            <span class="comment">/* LC, LM resolutions */</span>
02360     {
02361       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> ? 4 : 2);
02362       <a class="code" href="group__util.html#ga17">stp_send_command</a>(v, <span class="stringliteral">""</span>, <span class="stringliteral">"HHH"</span>, xdpi, ydpi, privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a> ? 4 : 2);
02363     }
02364   }
02365   <span class="keywordflow">else</span>
02366   {
02367     <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*t%dR"</span>, xdpi);          <span class="comment">/* Simple resolution */</span>
02368     <span class="keywordflow">if</span> (printing_color)
02369     {
02370       <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>) == <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>)
02371         <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*r-3U"</span>, v);               <span class="comment">/* Simple CMY color */</span>
02372       <span class="keywordflow">else</span>
02373         <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*r-4U"</span>, v);               <span class="comment">/* Simple KCMY color */</span>
02374     }
02375   }
02376 
02377 <span class="preprocessor">#ifndef PCL_DEBUG_DISABLE_COMPRESSION</span>
02378 <span class="preprocessor"></span>  <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a>) == <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a>)
02379   {
02380     <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*b2M"</span>, v);                    <span class="comment">/* Mode 2 (TIFF) */</span>
02381   }
02382   <span class="keywordflow">else</span>
02383 <span class="preprocessor">#endif</span>
02384 <span class="preprocessor"></span>  {
02385     <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*b0M"</span>, v);                    <span class="comment">/* Mode 0 (no compression) */</span>
02386   }
02387 
02388  <span class="comment">/*</span>
02389 <span class="comment">  * Convert image size to printer resolution and setup the page for printing...</span>
02390 <span class="comment">  */</span>
02391 
02392   out_width  = xdpi * out_width / 72;
02393   out_height = ydpi * out_height / 72;
02394 
02395   <span class="keywordflow">if</span> (pcl_media_size == <a class="code" href="print-pcl_8c.html#a8">PCL_PAPERSIZE_A4</a>)
02396   {
02397     the_left_margin = caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>;
02398     the_top_margin = caps-&gt;<a class="code" href="structpcl__cap__t.html#o7">a4_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>;
02399   }
02400   <span class="keywordflow">else</span>
02401   {
02402     the_left_margin = caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o2">left_margin</a>;
02403     the_top_margin = caps-&gt;<a class="code" href="structpcl__cap__t.html#o6">normal_margins</a>.<a class="code" href="structmargins__t.html#o0">top_margin</a>;
02404   }
02405 
02406   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"left %d margin %d top %d margin %d width %d height %d\n"</span>,
02407           left, the_left_margin, top, the_top_margin, out_width, out_height);
02408 
02409   <span class="keywordflow">if</span> (!privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>) {
02410     <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;a%dH"</span>, 10 * left);             <span class="comment">/* Set left raster position */</span>
02411     <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033&amp;a%dV"</span>, 10 * (top + the_top_margin));
02412                                 <span class="comment">/* Set top raster position */</span>
02413   }
02414   <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*r%dS"</span>, out_width);               <span class="comment">/* Set raster width */</span>
02415   <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*r%dT"</span>, out_height);      <span class="comment">/* Set raster height */</span>
02416 
02417   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
02418     {
02419       <span class="comment">/* Move to top left of printed area */</span>
02420       <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*p%dY"</span>, (top + the_top_margin)*4); <span class="comment">/* Measured in dots. */</span>
02421       <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*p%dX"</span>, left*4);
02422     }
02423   <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*r1A"</span>, v);                      <span class="comment">/* Start GFX */</span>
02424 
02425  <span class="comment">/*</span>
02426 <span class="comment">  * Allocate memory for the raster data...</span>
02427 <span class="comment">  */</span>
02428 
02429   privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a> = (out_width + 7) / 8;
02430   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>)
02431     privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a> *= 2;
02432 
02433   <span class="keywordflow">if</span> (!printing_color)
02434   {
02435     black   = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02436     cyan    = NULL;
02437     magenta = NULL;
02438     yellow  = NULL;
02439     lcyan    = NULL;
02440     lmagenta = NULL;
02441   }
02442   <span class="keywordflow">else</span>
02443   {
02444     cyan    = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02445     magenta = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02446     yellow  = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02447 
02448     <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o8">color_type</a> &amp; <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>) == <a class="code" href="print-pcl_8c.html#a62">PCL_COLOR_CMY</a>)
02449       black = NULL;
02450     <span class="keywordflow">else</span>
02451       black = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02452     <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)
02453     {
02454       lcyan    = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02455       lmagenta = <a class="code" href="group__util.html#ga28">stp_malloc</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a>);
02456     }
02457     <span class="keywordflow">else</span>
02458     {
02459       lcyan    = NULL;
02460       lmagenta = NULL;
02461     }
02462   }
02463 
02464   <span class="keywordflow">if</span> (black)
02465     {
02466       <span class="keywordflow">if</span> (cyan)
02467         <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(v, <span class="stringliteral">"STPIOutputType"</span>, <span class="stringliteral">"KCMY"</span>);
02468       <span class="keywordflow">else</span>
02469         <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(v, <span class="stringliteral">"STPIOutputType"</span>, <span class="stringliteral">"Grayscale"</span>);
02470     }
02471   <span class="keywordflow">else</span>
02472     <a class="code" href="group__vars.html#ga32">stp_set_string_parameter</a>(v, <span class="stringliteral">"STPIOutputType"</span>, <span class="stringliteral">"CMY"</span>);
02473 
02474 <span class="comment">/* Allocate buffer for pcl_mode2 tiff compression */</span>
02475 
02476 <span class="preprocessor">#ifndef PCL_DEBUG_DISABLE_COMPRESSION</span>
02477 <span class="preprocessor"></span>  <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a>) == <a class="code" href="print-pcl_8c.html#a70">PCL_PRINTER_TIFF</a>)
02478   {
02479     privdata.<a class="code" href="structpcl__privdata__t.html#o2">comp_buf</a> = <a class="code" href="group__util.html#ga28">stp_malloc</a>((privdata.<a class="code" href="structpcl__privdata__t.html#o7">height</a> + 128 + 7) * 129 / 128);
02480     privdata.<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a> = <a class="code" href="print-pcl_8c.html#a125">pcl_mode2</a>;
02481   }
02482   <span class="keywordflow">else</span>
02483 <span class="preprocessor">#endif</span>
02484 <span class="preprocessor"></span>  {
02485     privdata.<a class="code" href="structpcl__privdata__t.html#o2">comp_buf</a> = NULL;
02486     privdata.<a class="code" href="structpcl__privdata__t.html#o3">writefunc</a> = <a class="code" href="print-pcl_8c.html#a124">pcl_mode0</a>;
02487   }
02488 
02489 <span class="comment">/* Set up dithering for special printers. */</span>
02490 
02491 <span class="preprocessor">#if 1           </span><span class="comment">/* Leave alone for now */</span>
02492   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga102">stp_check_float_parameter</a>(v, <span class="stringliteral">"GCRLower"</span>, STP_PARAMETER_ACTIVE))
02493     <a class="code" href="group__vars.html#ga68">stp_set_default_float_parameter</a>(v, <span class="stringliteral">"GCRLower"</span>, .3);
02494   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga102">stp_check_float_parameter</a>(v, <span class="stringliteral">"GCRUpper"</span>, STP_PARAMETER_ACTIVE))
02495     <a class="code" href="group__vars.html#ga68">stp_set_default_float_parameter</a>(v, <span class="stringliteral">"GCRUpper"</span>, .999);
02496 <span class="preprocessor">#endif</span>
02497 <span class="preprocessor"></span>  <a class="code" href="dither-main_8c.html#a13">stp_dither_init</a>(v, image, out_width, xdpi, ydpi);
02498 
02499   <span class="keywordflow">if</span> (black)
02500     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, black, STP_ECOLOR_K, 0);
02501   <span class="keywordflow">if</span> (cyan)
02502     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, cyan, STP_ECOLOR_C, 0);
02503   <span class="keywordflow">if</span> (lcyan)
02504     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, lcyan, STP_ECOLOR_C, 1);
02505   <span class="keywordflow">if</span> (magenta)
02506     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, magenta, STP_ECOLOR_M, 0);
02507   <span class="keywordflow">if</span> (lmagenta)
02508     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, lmagenta, STP_ECOLOR_M, 1);
02509   <span class="keywordflow">if</span> (yellow)
02510     <a class="code" href="dither-inks_8c.html#a7">stp_dither_add_channel</a>(v, yellow, STP_ECOLOR_Y, 0);
02511 
02512 <span class="comment">/* Ensure that density does not exceed 1.0 */</span>
02513 
02514   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga102">stp_check_float_parameter</a>(v, <span class="stringliteral">"Density"</span>, STP_PARAMETER_DEFAULTED))
02515     {
02516       <a class="code" href="group__vars.html#ga93">stp_set_float_parameter_active</a>(v, <span class="stringliteral">"Density"</span>, STP_PARAMETER_ACTIVE);
02517       <a class="code" href="group__vars.html#ga67">stp_set_float_parameter</a>(v, <span class="stringliteral">"Density"</span>, 1.0);
02518     }
02519 
02520   <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Density: %f\n"</span>, <a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(v, <span class="stringliteral">"Density"</span>));
02521   <span class="keywordflow">if</span> (<a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(v, <span class="stringliteral">"Density"</span>) &gt; 1.0)
02522     <a class="code" href="group__vars.html#ga67">stp_set_float_parameter</a>(v, <span class="stringliteral">"Density"</span>, 1.0);
02523   density = <a class="code" href="group__vars.html#ga70">stp_get_float_parameter</a>(v, <span class="stringliteral">"Density"</span>);
02524 
02525   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o4">do_cret</a>)                 <span class="comment">/* 4-level printing for 800/1120 */</span>
02526     {
02527       <a class="code" href="dither-inks_8c.html#a10">stp_dither_set_inks_simple</a>(v, STP_ECOLOR_Y, 3, dot_sizes_use, 1.0, 0.08);
02528       <span class="keywordflow">if</span> (!privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
02529         <a class="code" href="dither-inks_8c.html#a10">stp_dither_set_inks_simple</a>(v, STP_ECOLOR_K, 3, dot_sizes_use, 1.0, 1.0);
02530 
02531       <span class="comment">/* Note: no printer I know of does both CRet (4-level) and 6 colour, but</span>
02532 <span class="comment">         what the heck. variable_dither_ranges copied from print-escp2.c */</span>
02533 
02534       <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)                   <span class="comment">/* Photo for 69x */</span>
02535         {
02536           <a class="code" href="dither-inks_8c.html#a11">stp_dither_set_inks_full</a>(v, STP_ECOLOR_C, 6, variable_shades, 1.0,
02537                                     0.31 / .5);
02538           <a class="code" href="dither-inks_8c.html#a11">stp_dither_set_inks_full</a>(v, STP_ECOLOR_M, 6, variable_shades, 1.0,
02539                                     0.61 / .97);
02540         }
02541       <span class="keywordflow">else</span>
02542         {
02543           <a class="code" href="dither-inks_8c.html#a10">stp_dither_set_inks_simple</a>(v, STP_ECOLOR_C, 3, dot_sizes_use, 1.0,
02544                                       0.31 / .5);
02545           <a class="code" href="dither-inks_8c.html#a10">stp_dither_set_inks_simple</a>(v, STP_ECOLOR_M, 3, dot_sizes_use, 1.0,
02546                                       0.61 / .7);
02547         }
02548     }
02549   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o6">do_6color</a>)
02550     {
02551       <span class="comment">/* Set light inks for 6 colour printers.</span>
02552 <span class="comment">         Numbers copied from print-escp2.c */</span>
02553       <a class="code" href="dither-inks_8c.html#a11">stp_dither_set_inks_full</a>(v, STP_ECOLOR_C, 2, photo_dither_shades, 1.0,
02554                                 0.31 / .5);
02555       <a class="code" href="dither-inks_8c.html#a11">stp_dither_set_inks_full</a>(v, STP_ECOLOR_M, 2, photo_dither_shades, 1.0,
02556                                 0.61 / .7);
02557     }
02558   <span class="keywordflow">if</span> (black)
02559     <a class="code" href="channel_8c.html#a7">stp_channel_set_density_adjustment</a>(v, STP_ECOLOR_K, 0,
02560                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"BlackDensity"</span>) *
02561                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>));
02562   <span class="keywordflow">if</span> (cyan)
02563     <a class="code" href="channel_8c.html#a7">stp_channel_set_density_adjustment</a>(v, STP_ECOLOR_C, 0,
02564                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"CyanDensity"</span>) *
02565                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>));
02566   <span class="keywordflow">if</span> (magenta)
02567     <a class="code" href="channel_8c.html#a7">stp_channel_set_density_adjustment</a>(v, STP_ECOLOR_M, 0,
02568                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"MagentaDensity"</span>) *
02569                                        <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>));
02570   <span class="keywordflow">if</span> (yellow)
02571     <a class="code" href="channel_8c.html#a7">stp_channel_set_density_adjustment</a>(v, STP_ECOLOR_Y, 0,
02572                                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"YellowDensity"</span>) *
02573                                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>));
02574   <span class="keywordflow">if</span> (lcyan)
02575     <a class="code" href="channel_8h.html#a3">stp_channel_set_density_adjustment</a>
02576       (v, <a class="code" href="dither_8h.html#a1">STP_ECOLOR_C</a>, 1, (<a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"CyanDensity"</span>) *
02577                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"LightCyanTransition"</span>) *
02578                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>)));
02579   <span class="keywordflow">if</span> (lmagenta)
02580     <a class="code" href="channel_8h.html#a3">stp_channel_set_density_adjustment</a>
02581       (v, <a class="code" href="dither_8h.html#a2">STP_ECOLOR_M</a>, 1, (<a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"MagentaDensity"</span>) *
02582                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"LightMagentaTransition"</span>) *
02583                         <a class="code" href="print-pcl_8c.html#a140">get_double_param</a>(v, <span class="stringliteral">"Density"</span>)));
02584 
02585 
02586   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga106">stp_check_curve_parameter</a>(v, <span class="stringliteral">"HueMap"</span>, STP_PARAMETER_ACTIVE))
02587     {
02588       hue_adjustment = <a class="code" href="group__curve.html#ga66">stp_curve_create_from_string</a>(standard_hue_adjustment);
02589       <a class="code" href="group__vars.html#ga47">stp_set_curve_parameter</a>(v, <span class="stringliteral">"HueMap"</span>, hue_adjustment);
02590       <a class="code" href="group__curve.html#ga22">stp_curve_destroy</a>(hue_adjustment);
02591     }
02592   <span class="keywordflow">if</span> (!<a class="code" href="group__vars.html#ga106">stp_check_curve_parameter</a>(v, <span class="stringliteral">"LumMap"</span>, STP_PARAMETER_ACTIVE))
02593     {
02594       lum_adjustment = <a class="code" href="group__curve.html#ga66">stp_curve_create_from_string</a>(standard_lum_adjustment);
02595       <a class="code" href="group__curve.html#ga22">stp_curve_destroy</a>(lum_adjustment);
02596     }
02597 
02598   out_channels = <a class="code" href="group__color.html#ga13">stp_color_init</a>(v, image, 65536);
02599 
02600   errdiv  = image_height / out_height;
02601   errmod  = image_height % out_height;
02602   errval  = 0;
02603   errlast = -1;
02604   errline  = 0;
02605   privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a> = 0;
02606 <span class="preprocessor">#ifndef PCL_DEBUG_DISABLE_BLANKLINE_REMOVAL</span>
02607 <span class="preprocessor"></span>  privdata.<a class="code" href="structpcl__privdata__t.html#o0">do_blank</a> = ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>) ==
02608                        <a class="code" href="print-pcl_8c.html#a73">PCL_PRINTER_BLANKLINE</a>);
02609 <span class="preprocessor">#else</span>
02610 <span class="preprocessor"></span>  privdata.<a class="code" href="structpcl__privdata__t.html#o0">do_blank</a> = 0;
02611 <span class="preprocessor">#endif</span>
02612 <span class="preprocessor"></span>  <a class="code" href="group__vars.html#ga18">stp_allocate_component_data</a>(v, <span class="stringliteral">"Driver"</span>, NULL, NULL, &amp;privdata);
02613 
02614   <span class="keywordflow">for</span> (y = 0; y &lt; out_height; y ++)
02615   {
02616     <span class="keywordtype">int</span> duplicate_line = 1;
02617     <span class="keywordflow">if</span> (errline != errlast)
02618     {
02619       errlast = errline;
02620       duplicate_line = 0;
02621       <span class="keywordflow">if</span> (<a class="code" href="group__color.html#ga14">stp_color_get_row</a>(v, image, errline, &amp;zero_mask))
02622         {
02623           status = 2;
02624           <span class="keywordflow">break</span>;
02625         }
02626     }
02627     <a class="code" href="dither-main_8c.html#a19">stp_dither</a>(v, y, duplicate_line, zero_mask, NULL);
02628     <a class="code" href="print-pcl_8c.html#a139">pcl_printfunc</a>(v);
02629     <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL,<span class="stringliteral">"pcl_print: y = %d, line = %d, val = %d, mod = %d, height = %d\n"</span>,
02630                   y, errline, errval, errmod, out_height);
02631     errval += errmod;
02632     errline += errdiv;
02633     <span class="keywordflow">if</span> (errval &gt;= out_height)
02634     {
02635       errval -= out_height;
02636       errline ++;
02637     }
02638   }
02639 
02640 <span class="comment">/* Output trailing blank lines (may not be required?) */</span>
02641 
02642   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a> &gt; 1)
02643   {
02644     privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>--;             <span class="comment">/* correct for one already output */</span>
02645     <a class="code" href="print-util_8c.html#a24">stp_deprintf</a>(STP_DBG_PCL, <span class="stringliteral">"Blank Lines = %d\n"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>);
02646     <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*b%dY"</span>, privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>);
02647     privdata.<a class="code" href="structpcl__privdata__t.html#o1">blank_lines</a>=0;
02648   }
02649 
02650   <a class="code" href="group__image.html#ga6">stp_image_conclude</a>(image);
02651 
02652  <span class="comment">/*</span>
02653 <span class="comment">  * Cleanup...</span>
02654 <span class="comment">  */</span>
02655 
02656   <span class="keywordflow">if</span> (black != NULL)
02657     <a class="code" href="group__util.html#ga31">stp_free</a>(black);
02658   <span class="keywordflow">if</span> (cyan != NULL)
02659   {
02660     <a class="code" href="group__util.html#ga31">stp_free</a>(cyan);
02661     <a class="code" href="group__util.html#ga31">stp_free</a>(magenta);
02662     <a class="code" href="group__util.html#ga31">stp_free</a>(yellow);
02663   }
02664   <span class="keywordflow">if</span> (lcyan != NULL)
02665   {
02666     <a class="code" href="group__util.html#ga31">stp_free</a>(lcyan);
02667     <a class="code" href="group__util.html#ga31">stp_free</a>(lmagenta);
02668   }
02669 
02670   <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o2">comp_buf</a> != NULL)
02671     <a class="code" href="group__util.html#ga31">stp_free</a>(privdata.<a class="code" href="structpcl__privdata__t.html#o2">comp_buf</a>);
02672 
02673   <span class="keywordflow">if</span> ((caps-&gt;<a class="code" href="structpcl__cap__t.html#o9">stp_printer_type</a> &amp; <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>) == <a class="code" href="print-pcl_8c.html#a69">PCL_PRINTER_NEW_ERG</a>)
02674     <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*rC"</span>, v);
02675   <span class="keywordflow">else</span>
02676     <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033*rB"</span>, v);
02677 
02678   <span class="keywordflow">if</span> ((privdata.<a class="code" href="structpcl__privdata__t.html#o8">duplex</a> == 1) &amp;&amp; ((page_number &amp; 1) == 0))
02679       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\014"</span>, v);              <span class="comment">/* Form feed */</span>
02680   <span class="keywordflow">else</span>
02681     {
02682       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033&amp;l0H"</span>, v);          <span class="comment">/* Eject page */</span>
02683       <span class="keywordflow">if</span> (privdata.<a class="code" href="structpcl__privdata__t.html#o5">do_cretb</a>)
02684         <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033%%-12345X\n"</span>);
02685       <a class="code" href="group__util.html#ga16">stp_puts</a>(<span class="stringliteral">"\033E"</span>, v);             <span class="comment">/* PCL reset */</span>
02686     }
02687   <span class="keywordflow">return</span> status;
02688 }
02689 
02690 <span class="keyword">static</span> <span class="keywordtype">int</span>
02691 <a class="code" href="print-pcl_8c.html#a142">pcl_print</a>(<span class="keyword">const</span> <a class="code" href="structstp__vars.html">stp_vars_t</a> *v, <a class="code" href="structstp__image.html">stp_image_t</a> *image)
02692 {
02693   <span class="keywordtype">int</span> status;
02694   <a class="code" href="structstp__vars.html">stp_vars_t</a> *nv = <a class="code" href="group__vars.html#ga78">stp_vars_create_copy</a>(v);
02695   <a class="code" href="group__util.html#ga77">stp_prune_inactive_options</a>(nv);
02696   status = <a class="code" href="print-pcl_8c.html#a141">pcl_do_print</a>(nv, image);
02697   <a class="code" href="group__vars.html#ga26">stp_vars_destroy</a>(nv);
02698   <span class="keywordflow">return</span> status;
02699 }
02700 
02701 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstp__printfuncs__t.html">stp_printfuncs_t</a> <a class="code" href="print-pcl_8c.html#a120">print_pcl_printfuncs</a> =
02702 {
02703   <a class="code" href="print-pcl_8c.html#a133">pcl_list_parameters</a>,
02704   <a class="code" href="print-pcl_8c.html#a134">pcl_parameters</a>,
02705   <a class="code" href="group__papersize.html#ga4">stp_default_media_size</a>,
02706   <a class="code" href="print-pcl_8c.html#a136">pcl_imageable_area</a>,
02707   <a class="code" href="print-pcl_8c.html#a137">pcl_limit</a>,
02708   <a class="code" href="print-pcl_8c.html#a142">pcl_print</a>,
02709   <a class="code" href="print-pcl_8c.html#a126">pcl_describe_resolution</a>,
02710   <a class="code" href="print-pcl_8c.html#a138">pcl_describe_output</a>,
02711   <a class="code" href="group__printer.html#ga19">stp_verify_printer_params</a>,
02712   NULL,
02713   NULL
02714 };
02715 
02716 
<a name="l02717"></a><a class="code" href="print-pcl_8c.html#a142">02717</a> <span class="comment">/*</span>
02718 <span class="comment"> * 'pcl_mode0()' - Send PCL graphics using mode 0 (no) compression.</span>
02719 <span class="comment"> */</span>
02720 
02721 <span class="keyword">static</span> <span class="keywordtype">void</span>
02722 <a class="code" href="print-pcl_8c.html#a124">pcl_mode0</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v,                <span class="comment">/* I - Print file or command */</span>
02723           <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *line,          <span class="comment">/* I - Output bitmap data */</span>
02724           <span class="keywordtype">int</span>           height,         <span class="comment">/* I - Height of bitmap data */</span>
02725           <span class="keywordtype">int</span>           last_plane)     <span class="comment">/* I - True if this is the last plane */</span>
02726 {
<a name="l02727"></a><a class="code" href="print-pcl_8c.html#a120">02727</a>   <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*b%d%c"</span>, height, last_plane ? <span class="charliteral">'W'</span> : <span class="charliteral">'V'</span>);
02728   <a class="code" href="group__util.html#ga10">stp_zfwrite</a>((<span class="keyword">const</span> <span class="keywordtype">char</span> *) line, height, 1, v);
02729 }
02730 
02731 
02732 <span class="comment">/*</span>
02733 <span class="comment"> * 'pcl_mode2()' - Send PCL graphics using mode 2 (TIFF) compression.</span>
02734 <span class="comment"> */</span>
02735 
02736 <span class="keyword">static</span> <span class="keywordtype">void</span>
02737 <a class="code" href="print-pcl_8c.html#a125">pcl_mode2</a>(<a class="code" href="structstp__vars.html">stp_vars_t</a> *v,                <span class="comment">/* I - Print file or command */</span>
02738           <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *line,          <span class="comment">/* I - Output bitmap data */</span>
02739           <span class="keywordtype">int</span>           height,         <span class="comment">/* I - Height of bitmap data */</span>
02740           <span class="keywordtype">int</span>           last_plane)     <span class="comment">/* I - True if this is the last plane */</span>
02741 {
02742   <a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a> *privdata =
02743     (<a class="code" href="structpcl__privdata__t.html">pcl_privdata_t</a> *) <a class="code" href="group__vars.html#ga20">stp_get_component_data</a>(v, <span class="stringliteral">"Driver"</span>);
02744   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *comp_buf = privdata-&gt;<a class="code" href="structpcl__privdata__t.html#o2">comp_buf</a>;
02745   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *comp_ptr;              <span class="comment">/* Current slot in buffer */</span>
02746 
02747   <a class="code" href="bit-ops_8c.html#a24">stp_pack_tiff</a>(v, line, height, comp_buf, &amp;comp_ptr, NULL, NULL);
<a name="l02748"></a><a class="code" href="print-pcl_8c.html#a124">02748</a> 
02749  <span class="comment">/*</span>
02750 <span class="comment">  * Send a line of raster graphics...</span>
02751 <span class="comment">  */</span>
02752 
02753   <a class="code" href="print-util_8c.html#a7">stp_zprintf</a>(v, <span class="stringliteral">"\033*b%d%c"</span>, (<span class="keywordtype">int</span>)(comp_ptr - comp_buf), last_plane ? <span class="charliteral">'W'</span> : <span class="charliteral">'V'</span>);
02754   <a class="code" href="group__util.html#ga10">stp_zfwrite</a>((<span class="keyword">const</span> <span class="keywordtype">char</span> *)comp_buf, comp_ptr - comp_buf, 1, v);
02755 }
02756 
02757 
02758 <span class="keyword">static</span> <a class="code" href="structstp__family.html">stp_family_t</a> <a class="code" href="print-pcl_8c.html#a121">print_pcl_module_data</a> =
02759   {
02760     &amp;<a class="code" href="print-pcl_8c.html#a120">print_pcl_printfuncs</a>,
02761     NULL
02762   };
<a name="l02763"></a><a class="code" href="print-pcl_8c.html#a125">02763</a> 
02764 
02765 <span class="keyword">static</span> <span class="keywordtype">int</span>
02766 <a class="code" href="print-pcl_8c.html#a143">print_pcl_module_init</a>(<span class="keywordtype">void</span>)
02767 {
02768   <span class="keywordflow">return</span> <a class="code" href="group__printer.html#ga46">stp_family_register</a>(<a class="code" href="print-pcl_8c.html#a121">print_pcl_module_data</a>.<a class="code" href="structstp__family.html#o1">printer_list</a>);
02769 }
02770 
02771 
02772 <span class="keyword">static</span> <span class="keywordtype">int</span>
02773 <a class="code" href="print-pcl_8c.html#a144">print_pcl_module_exit</a>(<span class="keywordtype">void</span>)
02774 {
02775   <span class="keywordflow">return</span> <a class="code" href="group__printer.html#ga47">stp_family_unregister</a>(<a class="code" href="print-pcl_8c.html#a121">print_pcl_module_data</a>.<a class="code" href="structstp__family.html#o1">printer_list</a>);
02776 }
02777 
02778 
02779 <span class="comment">/* Module header */</span>
02780 <span class="preprocessor">#define stp_module_version print_pcl_LTX_stp_module_version</span>
02781 <span class="preprocessor"></span><span class="preprocessor">#define stp_module_data print_pcl_LTX_stp_module_data</span>
02782 <span class="preprocessor"></span>
02783 <a class="code" href="structstp__module__version.html">stp_module_version_t</a> <a class="code" href="structstp__module__version.html">stp_module_version</a> = {0, 0};
<a name="l02784"></a><a class="code" href="print-pcl_8c.html#a121">02784</a> 
02785 <a class="code" href="structstp__module.html">stp_module_t</a> <a class="code" href="print-canon_8c.html#a45">stp_module_data</a> =
02786   {
02787     <span class="stringliteral">"pcl"</span>,
02788     VERSION,
02789     <span class="stringliteral">"PCL family driver"</span>,
02790     <a class="code" href="module_8h.html#a13a4">STP_MODULE_CLASS_FAMILY</a>,
02791     NULL,
<a name="l02792"></a><a class="code" href="print-pcl_8c.html#a143">02792</a>     <a class="code" href="print-pcl_8c.html#a143">print_pcl_module_init</a>,
02793     <a class="code" href="print-pcl_8c.html#a144">print_pcl_module_exit</a>,
02794     (<span class="keywordtype">void</span> *) &amp;<a class="code" href="print-pcl_8c.html#a121">print_pcl_module_data</a>
02795   };
02796 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Aug 25 07:56:14 2004 for libgimpprint API Reference by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
