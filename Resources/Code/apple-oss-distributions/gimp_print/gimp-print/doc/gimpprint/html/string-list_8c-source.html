<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libgimpprint API Reference: src/main/string-list.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>src/main/string-list.c</h1><a href="string-list_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * "$Id: string-list_8c-source.html,v 1.1.1.2 2004/12/22 23:49:12 jlovell Exp $"</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *   Print plug-in driver utility functions for the GIMP.</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *   Copyright 1997-2000 Michael Sweet (mike@easysw.com) and</span>
00007 <span class="comment"> *      Robert Krawitz (rlk@alum.mit.edu)</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *   This program is free software; you can redistribute it and/or modify it</span>
00010 <span class="comment"> *   under the terms of the GNU General Public License as published by the Free</span>
00011 <span class="comment"> *   Software Foundation; either version 2 of the License, or (at your option)</span>
00012 <span class="comment"> *   any later version.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> *   This program is distributed in the hope that it will be useful, but</span>
00015 <span class="comment"> *   WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
00016 <span class="comment"> *   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
00017 <span class="comment"> *   for more details.</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
00020 <span class="comment"> *   along with this program; if not, write to the Free Software</span>
00021 <span class="comment"> *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00022 <span class="comment"> */</span>
00023 
00024 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span>
00026 <span class="preprocessor">#endif</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="gimp-print_8h.html">gimp-print/gimp-print.h</a>&gt;</span>
00028 <span class="preprocessor">#include "<a class="code" href="gimp-print-internal_8h.html">gimp-print-internal.h</a>"</span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="gimp-print-intl-internal_8h.html">gimp-print/gimp-print-intl-internal.h</a>&gt;</span>
00030 <span class="preprocessor">#include &lt;string.h&gt;</span>
00031 
00032 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00033"></a><a class="code" href="string-list_8c.html#a0">00033</a> <a class="code" href="string-list_8c.html#a0">free_list_element</a>(<span class="keywordtype">void</span> *item)
00034 {
00035   <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *string = (<a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) (item);
00036   <a class="code" href="group__util.html#ga31">stp_free</a>((<span class="keywordtype">char</span> *) string-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>);
00037   <a class="code" href="group__util.html#ga31">stp_free</a>((<span class="keywordtype">char</span> *) string-&gt;<a class="code" href="structstp__param__string__t.html#o1">text</a>);
00038   <a class="code" href="group__util.html#ga31">stp_free</a>(string);
00039 }
00040 
00041 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00042"></a><a class="code" href="string-list_8c.html#a1">00042</a> <a class="code" href="string-list_8c.html#a1">namefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00043 {
00044   <span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *string = (<span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) (item);
00045   <span class="keywordflow">return</span> string-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>;
00046 }
00047 
00048 <span class="keyword">static</span> <span class="keywordtype">void</span> *
<a name="l00049"></a><a class="code" href="string-list_8c.html#a2">00049</a> <a class="code" href="string-list_8c.html#a2">copyfunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00050 {
00051   <span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *string = (<span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) (item);
00052   <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *new_string = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structstp__param__string__t.html">stp_param_string_t</a>));
00053   new_string-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(string-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a>);
00054   new_string-&gt;<a class="code" href="structstp__param__string__t.html#o1">text</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(string-&gt;<a class="code" href="structstp__param__string__t.html#o1">text</a>);
00055   <span class="keywordflow">return</span> new_string;
00056 }
00057 
00058 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00059"></a><a class="code" href="string-list_8c.html#a3">00059</a> <a class="code" href="string-list_8c.html#a3">long_namefunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *item)
00060 {
00061   <span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *string = (<span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) (item);
00062   <span class="keywordflow">return</span> string-&gt;<a class="code" href="structstp__param__string__t.html#o1">text</a>;
00063 }
00064 
00065 <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *
<a name="l00066"></a><a class="code" href="string-list_8c.html#a4">00066</a> <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>(<span class="keywordtype">void</span>)
00067 {
00068   <a class="code" href="structstp__list.html">stp_list_t</a> *ret = <a class="code" href="list_8h.html#a7">stp_list_create</a>();
00069   <a class="code" href="print-list_8c.html#a19">stp_list_set_freefunc</a>(ret, <a class="code" href="string-list_8c.html#a0">free_list_element</a>);
00070   <a class="code" href="print-list_8c.html#a23">stp_list_set_namefunc</a>(ret, namefunc);
00071   <a class="code" href="print-list_8c.html#a21">stp_list_set_copyfunc</a>(ret, copyfunc);
00072   <a class="code" href="print-list_8c.html#a25">stp_list_set_long_namefunc</a>(ret, long_namefunc);
00073   <span class="keywordflow">return</span> (<a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *) ret;
00074 }
00075 
00076 <span class="keywordtype">void</span>
<a name="l00077"></a><a class="code" href="string-list_8c.html#a5">00077</a> <a class="code" href="string-list_8c.html#a5">stp_string_list_destroy</a>(<a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list)
00078 {
00079   <a class="code" href="print-list_8c.html#a10">stp_list_destroy</a>((<a class="code" href="structstp__list.html">stp_list_t</a> *) list);
00080 }
00081 
00082 <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *
<a name="l00083"></a><a class="code" href="string-list_8c.html#a6">00083</a> <a class="code" href="string-list_8c.html#a6">stp_string_list_param</a>(<span class="keyword">const</span> <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list, size_t element)
00084 {
00085   <span class="keywordflow">return</span> (<a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) <a class="code" href="list_8h.html#a30">stp_list_item_get_data</a>
00086     (<a class="code" href="print-list_8c.html#a14">stp_list_get_item_by_index</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list, element));
00087 }
00088 
00089 <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *
<a name="l00090"></a><a class="code" href="string-list_8c.html#a7">00090</a> <a class="code" href="string-list_8c.html#a7">stp_string_list_find</a>(<span class="keyword">const</span> <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00091 {
00092   <span class="keywordflow">return</span> (<a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *) <a class="code" href="list_8h.html#a30">stp_list_item_get_data</a>
00093     (<a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list, name));
00094 }
00095 
00096 size_t
<a name="l00097"></a><a class="code" href="string-list_8c.html#a8">00097</a> <a class="code" href="string-list_8c.html#a8">stp_string_list_count</a>(<span class="keyword">const</span> <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list)
00098 {
00099   <span class="keywordflow">return</span> <a class="code" href="print-list_8c.html#a11">stp_list_get_length</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list);
00100 }
00101 
00102 <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *
<a name="l00103"></a><a class="code" href="string-list_8c.html#a9">00103</a> <a class="code" href="string-list_8c.html#a9">stp_string_list_create_copy</a>(<span class="keyword">const</span> <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list)
00104 {
00105   <span class="keywordflow">return</span> (<a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *) <a class="code" href="print-list_8c.html#a9">stp_list_copy</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *)list);
00106 }
00107 
00108 <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *
<a name="l00109"></a><a class="code" href="string-list_8c.html#a10">00109</a> <a class="code" href="string-list_8c.html#a10">stp_string_list_create_from_params</a>(<span class="keyword">const</span> <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *list,
00110                                    size_t count)
00111 {
00112   size_t i = 0;
00113   <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *retval = <a class="code" href="string-list_8h.html#a1">stp_string_list_create</a>();
00114   <span class="keywordflow">for</span> (i = 0; i &lt; count; i++)
00115     <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(retval, list[i].name, list[i].text);
00116   <span class="keywordflow">return</span> retval;
00117 }
00118 
00119 <span class="keywordtype">void</span>
<a name="l00120"></a><a class="code" href="string-list_8c.html#a11">00120</a> <a class="code" href="string-list_8c.html#a11">stp_string_list_add_string</a>(<a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list,
00121                            <span class="keyword">const</span> <span class="keywordtype">char</span> *name,
00122                            <span class="keyword">const</span> <span class="keywordtype">char</span> *text)
00123 {
00124   <a class="code" href="structstp__param__string__t.html">stp_param_string_t</a> *new_string = <a class="code" href="group__util.html#ga28">stp_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structstp__param__string__t.html">stp_param_string_t</a>));
00125   new_string-&gt;<a class="code" href="structstp__param__string__t.html#o0">name</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(name);
00126   new_string-&gt;<a class="code" href="structstp__param__string__t.html#o1">text</a> = <a class="code" href="group__util.html#ga35">stp_strdup</a>(text);
00127   <a class="code" href="print-list_8c.html#a29">stp_list_item_create</a>((<a class="code" href="structstp__list.html">stp_list_t</a> *) list, NULL, new_string);
00128 }
00129 
00130 <span class="keywordtype">void</span>
<a name="l00131"></a><a class="code" href="string-list_8c.html#a12">00131</a> <a class="code" href="string-list_8c.html#a12">stp_string_list_remove_string</a>(<a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list,
00132                               <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00133 {
00134   <a class="code" href="structstp__list__item.html">stp_list_item_t</a> *item =
00135     <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *) list, name);
00136   <span class="keywordflow">if</span> (item)
00137     <a class="code" href="print-list_8c.html#a30">stp_list_item_destroy</a>((<a class="code" href="structstp__list.html">stp_list_t</a> *) list, item);
00138 }
00139 
00140 <span class="keywordtype">int</span>
<a name="l00141"></a><a class="code" href="string-list_8c.html#a13">00141</a> <a class="code" href="string-list_8c.html#a13">stp_string_list_is_present</a>(<span class="keyword">const</span> <a class="code" href="string-list_8h.html#a0">stp_string_list_t</a> *list,
00142                            <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00143 {
00144   <span class="keywordflow">if</span> (list &amp;&amp; value &amp;&amp;
00145       <a class="code" href="print-list_8c.html#a16">stp_list_get_item_by_name</a>((<span class="keyword">const</span> <a class="code" href="structstp__list.html">stp_list_t</a> *) list, value))
00146     <span class="keywordflow">return</span> 1;
00147   <span class="keywordflow">else</span>
00148     <span class="keywordflow">return</span> 0;
00149 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Aug 25 07:56:15 2004 for libgimpprint API Reference by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
